(this["webpackJsonpfinal-project"]=this["webpackJsonpfinal-project"]||[]).push([[0],{257:function(e,t,a){e.exports=a.p+"static/media/remove_from_cart.ccf11e5c.svg"},258:function(e,t,a){e.exports=a.p+"static/media/edit.a679f828.svg"},260:function(e,t,a){e.exports=a.p+"static/media/up_down_arrows.d68eb9f0.svg"},267:function(e,t,a){e.exports=a.p+"static/media/send.7cd8afcb.svg"},268:function(e,t,a){e.exports=a.p+"static/media/wishlist.58d71a39.svg"},269:function(e,t,a){e.exports=a.p+"static/media/shopping_cart.0ff5ef33.svg"},270:function(e,t,a){e.exports=a.p+"static/media/bin.817d91ee.svg"},295:function(e,t,a){e.exports=a(594)},501:function(e,t,a){},502:function(e,t,a){},503:function(e,t,a){},505:function(e,t,a){},506:function(e,t,a){},507:function(e,t,a){},508:function(e,t,a){},509:function(e,t,a){},510:function(e,t,a){},511:function(e,t,a){},512:function(e,t,a){},513:function(e,t,a){},583:function(e,t){},586:function(e,t,a){},587:function(e,t,a){},588:function(e,t,a){},589:function(e,t,a){},590:function(e,t,a){},591:function(e,t,a){},592:function(e,t,a){},593:function(e,t,a){},594:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(44),o=a.n(s),c=a(12),i=a(5),l=a(6),u=a(8),m=a(7),p=a(9),d=a(17),g=a(25),h=Object(g.a)(),f=a(18),v=a(19),b=a(1),y=a.n(b),E=a(21),w=a(101),x=a.n(w),O=x.a.create({withCredentials:!0}),N=function(e,t,a){return S(e,"GET",t,a)},C=function(e,t){return S(e,"POST",t)},j=function(e,t){return S(e,"PUT",t)},k=function(e,t){return S(e,"DELETE",t)};function S(e){var t,a,n,r,s=arguments;return y.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:"get",a=s.length>2&&void 0!==s[2]?s[2]:null,n=s.length>3?s[3]:void 0,s.length>4?s[4]:void 0,o.prev=4,o.next=7,y.a.awrap(O({url:"".concat("/api/").concat(e),method:t,data:a,params:n}));case 7:return r=o.sent,o.abrupt("return",r.data);case 11:throw o.prev=11,o.t0=o.catch(4),console.log("Had Issues ".concat(t,"ing to the backend, endpoint: ").concat(e,", with data: ").concat(a)),console.dir(o.t0),o.t0.response&&401===o.t0.response.status&&h.push("/login"),o.t0;case 17:case"end":return o.stop()}}),null,null,[[4,11]])}var U={query:function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N("order","",e));case 1:case"end":return t.stop()}}))},add:function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",C("order",e));case 1:case"end":return t.stop()}}))}};var T={sortGames:function(e,t,a){return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("Popularity"!==t){n.next=4;break}return n.abrupt("return",G(e,a));case 4:if("ReleaseDate"!==t){n.next=8;break}return n.abrupt("return",D(e,a));case 8:if("Rating"!==t){n.next=12;break}return n.abrupt("return",I(e,a));case 12:if("Price"!==t){n.next=16;break}return n.abrupt("return",R(e,a));case 16:return n.abrupt("return",e);case 17:case"end":return n.stop()}}))},sortByDownloads:G,getGraphsDetails:B,getGameRating:M,dateByMillisecond:A,dateFromObjectId:function(e){return new Date(1e3*parseInt(e.substring(0,8),16))},formatDate:function(e){var t=e.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+t},getSum:function(e){var t,a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.a.awrap(B(e,"games"));case 2:return t=n.sent,a=e.map((function(e,a){return t[a]*e.price})),n.abrupt("return",{sum:a,downloadsByGame:t});case 5:case"end":return n.stop()}}))},formatGameRating:function(e){return e>50?"Really positive":e>10?"Positive":e>-10?"Mixed":e>-50?"Negetive":"Really negetive"}};function M(e){var t=e.reviews;return+t.reduce((function(e,t){return"like"===t.rating?e+1:e-1}),0)/t.length*100}function A(e){var t=new Date;return e&&t.setDate(t.getDate()-e),t.getTime()}function D(e){var t,a,n=arguments;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.length>1&&void 0!==n[1]&&n[1],a=e.sort((function(e,a){return t?e.publishedAt<a.publishedAt?-1:e.publishedAt>a.publishedAt?0:1:e.publishedAt>a.publishedAt?-1:e.publishedAt<a.publishedAt?0:1})),r.abrupt("return",a);case 3:case"end":return r.stop()}}))}function I(e){var t,a,n=arguments;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.length>1&&void 0!==n[1]&&n[1],e.forEach((function(e){return e.totalRating=M(e)})),a=e.sort((function(e,a){return t?e.totalRating<a.totalRating?-1:e.totalRating>a.totalRating?0:1:e.totalRating>a.totalRating?-1:e.totalRating<a.totalRating?0:1})),r.abrupt("return",a);case 4:case"end":return r.stop()}}))}function G(e){var t,a,n,r=arguments;return y.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=r.length>1&&void 0!==r[1]&&r[1],s.next=3,y.a.awrap(B(e));case 3:return a=s.sent,e.forEach((function(e){e.downloadsCount=a[e.title]})),n=e.sort((function(e,a){return t?e.downloadsCount<a.downloadsCount?-1:e.downloadsCount>a.downloadsCount?0:1:e.downloadsCount>a.downloadsCount?-1:e.downloadsCount<a.downloadsCount?0:1})),s.abrupt("return",n);case 7:case"end":return s.stop()}}))}function R(e,t){return e.sort((function(e,a){return t?a.price>e.price?-1:a.price<e.price?0:1:a.price<e.price?-1:a.price>e.price?0:1}))}function B(e,t){var a,n,r,s,o,c=arguments;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:31,n=[],r={},s=[],o=[],e.forEach((function(e){n.push(U.query({lastMonthId:A(a),gameIds:e._id})),s.push(e.title),o.push(0)})),i.next=8,y.a.awrap(Promise.all(n));case 8:if(i.sent.forEach((function(e,a){return e.forEach((function(e,n){var c=new Date(e.createdAt/1),i=c.getDate();i+="/".concat(c.getMonth()+1);var l=r[i];if(!l||0!==n)return"games"===t?o[a]+=1:l?(r[s[a]]=n,r[i]=l+1):(r[s[a]]=1,r[i]=1)}))})),"games"!==t){i.next=12;break}return i.abrupt("return",o);case 12:return i.abrupt("return",r);case 13:case"end":return i.stop()}}))}var _={add:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(C("game",e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=N("game","",e);return t},getById:function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N("game/".concat(e)));case 1:case"end":return t.stop()}}))},update:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(j("game/".concat(e._id),e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},remove:function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(k("game/".concat(e)));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}};function P(e){return{type:"SET_GAMES",games:e}}function F(e){return{type:"SET_GAME",game:e}}function L(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(_.query(e));case 3:return a=n.sent,t(P(a)),n.abrupt("return",a);case 8:n.prev=8,n.t0=n.catch(0),console.log("Had issues getting games",n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}}var W={login:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(C("auth/login",e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},signUp:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(C("auth/signup",e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},logout:function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(C("auth/logout"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))},add:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(C("user",e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},remove:function(e){return k("user/".concat(e))},getById:function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N("user/".concat(e)));case 1:case"end":return t.stop()}}))},update:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(j("user/".concat(e._id),e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))}};function H(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(W.update(e));case 3:return a=n.sent,t(J(a)),n.abrupt("return");case 8:throw n.prev=8,n.t0=n.catch(0),console.log("Had issues in updating user",n.t0),n.t0;case 12:case"end":return n.stop()}}),null,null,[[0,8]])}}function q(e){return{type:"SET_USER",user:e}}function J(e){return{type:"UPDATE_USER",user:e}}var X=a(13);var $={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)}},K={query:function(){return $.loadFromStorage("cart")},addToCart:function(e){var t=$.loadFromStorage("cart");try{if(t.find((function(t){return e===t}))){var a="Already in the cart";throw"Already in the cart"}return t.push(e),$.saveToStorage("cart",t),"success"}catch(a){throw console.log("Already in the cart"),a}},removeFromCart:function(e){var t=$.loadFromStorage("cart").filter((function(t){return t!==e}));$.saveToStorage("cart",t)},clear:function(){return $.saveToStorage("cart",[]),[]}};function z(e){return function(t){try{return K.addToCart(e),void t(function(e){return{type:"ADD_TO_CART",item:e}}(e))}catch(a){throw console.log(a),a}}}function V(e){return{type:"SET_CART",cart:e}}var Y=a(22),Q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a.setData=function(e){var t=[];if(a.props.game){for(var n=30;n>=0;n--){var r=new Date;r.setDate(r.getDate()-n);var s="".concat(r.getDate(),"/").concat(r.getMonth()+1),o=void 0;o=e[s]?e[s]:0,t.push({name:s,sum:a.props.game.price*o})}a.setState({data:t})}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.gameOrders!==this.props.gameOrders&&this.setData(this.props.gameOrders)}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement("div",{className:"flex column chart align-center"},r.a.createElement("strong",{className:"small-chart-title"},"Income distribution per day"),r.a.createElement(Y.d,{width:200,height:150,data:e,margin:{top:5,right:5,left:5,bottom:5}},r.a.createElement(Y.h,{dataKey:"name"}),r.a.createElement(Y.g,null),r.a.createElement(Y.c,{stroke:"#45667d",dataKey:"sum",fill:"#5c88a7"})))}}]),t}(n.Component),Z=(a(501),a(78)),ee=a.n(Z),te=a(79),ae=a.n(te),ne=a(257),re=a.n(ne),se=a(258),oe=a.n(se),ce=document.getElementById("modal-root"),ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).el=document.createElement("div"),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){ce.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){ce.removeChild(this.el)}},{key:"render",value:function(){return o.a.createPortal(this.props.children,this.el)}}]),t}(r.a.Component);a(502);function le(e){return r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,e.modalTxt))}var ue=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={publisherName:"",gameOrders:null,toggleModal:!1,modalTxt:""},a.onOpenDetails=function(e){h.push("/game/".concat(e))},a.onOpenEdit=function(e){e.stopPropagation(),h.push("/edit/".concat(a.props.game._id))},a.onRemoveFromCart=function(e){e.stopPropagation(),a.props.onRemoveFromCart(a.props.game._id),a.props.removeGameFromCart(a.props.game._id)},a.onPlayClick=function(e){e.stopPropagation(),h.push("/play/".concat(a.props.game._id))},a.getDetailsForChart=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(T.getGraphsDetails([a.props.game]));case 2:e=t.sent,a.setState({gameOrders:e});case 4:case"end":return t.stop()}}))},a.toggleWishedGame=function(e){var t=a.props,n=t.user,r=t.game;e.stopPropagation();var s,o=n&&n.wishedGames||[];s=-1===o.findIndex((function(e){return e===r._id}))?Object(X.a)({},n,{wishedGames:[].concat(Object(v.a)(o),[r._id])}):Object(X.a)({},n,{wishedGames:o.filter((function(e){return e!==r._id}))}),a.setState({modalTxt:"Wishlist has been updated",toggleModal:!0},a.onToggleModal()),a.props.onUpdateUser(s)},a.onAddToCart=function(e){e.stopPropagation();try{a.props.addGameToCart(a.props.game._id),a.setState({modalTxt:"Game has been added to the cart",toggleModal:!0},a.onToggleModal())}catch(t){a.setState({modalTxt:"Game is already in the cart",toggleModal:!0},a.onToggleModal())}},a.onToggleModal=function(){setTimeout((function(){a.setState((function(e){return{toggleModal:!e.toggleModal}}))}),2e3)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e,t,a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.props.game,n.next=3,y.a.awrap(W.getById(e.publisher));case 3:t=n.sent,a=t.userName,this.setState({publisherName:a}),this.props.isDashboard&&this.getDetailsForChart();case 7:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.props,a=t.game,n=t.user,s=t.isProfile,o=t.isDashboard,c=t.isModal,i=t.isWishList,l=this.state,u=l.gameOrders,m=l.toggleModal,p=l.modalTxt,d=T.formatGameRating(T.getGameRating(a));return r.a.createElement("li",{className:o?"game-card flex column dsh-game-card":c?"modal-card flex modal-game-container":"game-card",onClick:function(){return e.onOpenDetails(a._id)}},o?r.a.createElement(Q,{game:a,gameOrders:u}):r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{alt:"thumbnail",className:"game-thumbnail",src:a.thumbnail})),r.a.createElement("section",{className:"details-container flex column"},r.a.createElement("div",{className:"full"},r.a.createElement("div",{className:c?"flex align-center column":"flex align-center"},r.a.createElement("strong",{className:c||o?"short-title":"full game-title",title:a.title},a.title),s&&o&&r.a.createElement("p",{className:"price"},"$",a.price),!s&&!c&&r.a.createElement("img",{alt:"like",className:c?"flex align-self-end like-icon":"like-icon",onClick:this.toggleWishedGame,src:n&&n.wishedGames.find((function(e){return e===a._id}))?ee.a:ae.a})),!c&&!o&&r.a.createElement("strong",{className:"publisher"},this.state.publisherName)),r.a.createElement("div",{className:s?'flex  align-end" flex-end':"flex space-between align-end"},!s&&r.a.createElement("p",{className:"price"},"$",a.price),!s&&!c&&r.a.createElement("p",{className:"rating"},d," (",a.reviews.length,")"),c&&!i&&r.a.createElement("img",{alt:"remove",src:re.a,className:"pointer like-icon",onClick:this.onRemoveFromCart}),s&&!o&&r.a.createElement("div",{className:"play-btn-container flex flex-end"},r.a.createElement("button",{title:"Play",className:"play-btn",onClick:this.onPlayClick},"Play")),s&&o&&r.a.createElement("button",{title:"Edit",className:"btn",onClick:this.onOpenEdit},r.a.createElement("img",{alt:"",src:oe.a})),i&&r.a.createElement("img",{alt:"like",className:c?"flex align-self-end like-icon":"like-icon",onClick:this.toggleWishedGame,src:n&&n.wishedGames.find((function(e){return e===a._id}))?ee.a:ae.a}),i&&r.a.createElement("button",{type:"primary",className:"buy-btn",onClick:this.onAddToCart},"Add to cart "),m&&r.a.createElement(ie,null,r.a.createElement(le,{modalTxt:p,toggleModal:this.onToggleModal})))))}}]),t}(n.Component),me={removeGameFromCart:function(e){return function(t){K.removeFromCart(e),t(function(e){return{type:"REMOVE_FROM_CART",item:e}}(e))}},addGameToCart:z},pe=Object(c.b)((function(e){return{cart:e.cartStore.cart}}),me)(ue);function de(e){var t=e.games,a=e.user;return r.a.createElement("ul",{className:e.isHomepage?"hp-cards-container clean-list container":e.isModal?"clean-list modal-cards":"cards-container clean-list container"},null===t||void 0===t?void 0:t.map((function(t){return r.a.createElement(pe,{isModal:e.isModal,game:t,user:a,key:t._id,isProfile:e.isProfile,isHomepage:e.isHomepage,isDashboard:e.isDashboard,onUpdateUser:e.onUpdateUser,onRemoveFromCart:e.onRemoveFromCart,isWishList:e.isWishList})})))}a(503);var ge=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={Popularity:[],ReleaseDate:[],Rating:[]},a.onUpdateUser=function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:a.props.updateUser(e);case 1:case"end":return t.stop()}}))},a.setGames=function(e){var t,n,r,s=arguments;return y.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:4,n=Object(v.a)(a.props.games),o.next=4,y.a.awrap(T.sortGames(n,e));case 4:(r=o.sent).splice(t,n.length),a.setState(Object(f.a)({},e,r));case 7:case"end":return o.stop()}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),e.next=3,y.a.awrap(this.props.loadGames());case 3:this.setGames("Popularity"),this.setGames("ReleaseDate"),this.setGames("Rating");case 6:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.Popularity,a=e.ReleaseDate,n=e.Rating;return r.a.createElement("div",{className:"homepage-container content-container container full"},r.a.createElement("div",{className:"hero-text flex column totally-center"},r.a.createElement("h1",{className:"main-heading"},"Gamein"),r.a.createElement("p",null,"The ultimate destination for buying, discussing, and playing games"),r.a.createElement(E.a,{to:"/game",onClick:this.on,className:"hero-btn"},"To the shop")),r.a.createElement("div",null,r.a.createElement("div",{className:"flex  heading space-between"},r.a.createElement("p",null,"Most Popular"),r.a.createElement(E.a,{to:"/game?sortBy=Popularity"},"See More \u2192")),r.a.createElement(de,{isHomepage:!0,user:this.props.user,onUpdateUser:this.onUpdateUser,games:t})),r.a.createElement("div",null,r.a.createElement("div",{className:"flex  heading space-between"},r.a.createElement("p",null,"Recently Released"),r.a.createElement(E.a,{to:"/game?sortBy=ReleaseDate"},"See More \u2192")),r.a.createElement(de,{isHomepage:!0,user:this.props.user,onUpdateUser:this.onUpdateUser,games:a})),r.a.createElement("div",null,r.a.createElement("div",{className:"flex  heading space-between"},r.a.createElement("p",null,"Top Rated"),r.a.createElement(E.a,{to:"/game?sortBy=Rating"},"See More \u2192")),r.a.createElement(de,{isHomepage:!0,user:this.props.user,onUpdateUser:this.onUpdateUser,games:n})))}}]),t}(n.Component),he={loadGames:L,updateUser:H},fe=Object(c.b)((function(e){return{games:e.gameStore.games,user:e.userStore.loggedInUser}}),he)(ge),ve=(a(505),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loginCred:{userName:"",password:""},isIncorrectInput:!1},a.loginHandleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){return{loginCred:Object(X.a)({},e.loginCred,Object(f.a)({},n,r))}}))},a.doLogin=function(e){var t,n,r,s;return y.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),t=a.state.loginCred,n=t.userName,r=t.password,n&&r){o.next=4;break}return o.abrupt("return",console.log("all details are required"));case 4:return s={userName:n,password:r},o.prev=5,o.next=8,y.a.awrap(a.props.login(s));case 8:a.setState({loginCred:{userName:"",password:""}},(function(){return h.push("/")})),o.next=15;break;case 11:o.prev=11,o.t0=o.catch(5),a.setState({isIncorrectInput:!0}),console.log("Had issues while logging in ");case 15:case"end":return o.stop()}}),null,null,[[5,11]])},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this.props.loggedInUser,t=r.a.createElement("form",{className:"login-form flex column justify-center align-center",onSubmit:this.doLogin},r.a.createElement("input",{className:"login-input input",type:"text",name:"userName",value:this.state.loginCred.userName,onChange:this.loginHandleChange,placeholder:"User name"}),r.a.createElement("input",{className:"login-input input",type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),this.state.isIncorrectInput&&r.a.createElement("strong",{className:"wrong-input"},"Wrong username/password please try again."),r.a.createElement("button",{className:"login-btn btn"},"Login"),r.a.createElement("p",null,"Not with us yet ?"),r.a.createElement("button",{className:"login-btn btn",onClick:function(){return h.push("/sign-up")}},"Join"));return r.a.createElement("div",{className:"login-container content-container flex column justify-center align-center container"},r.a.createElement("img",{className:"login-logo",alt:"logo",src:"/logo.png",width:"100px"}),(!e||!e.userName)&&t)}}]),t}(n.Component)),be={login:function(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(W.login(e));case 3:return a=n.sent,t(q(a)),n.abrupt("return");case 8:throw n.prev=8,n.t0=n.catch(0),console.log(n.t0),n.t0;case 12:case"end":return n.stop()}}),null,null,[[0,8]])}}},ye=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),be)(ve);a(506);function Ee(e){var t,a,n,r,s,o,c;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:for(t=[],a=0;a<e.length;a++){"dfdvfunfj","zc8aff64",n=e[a].type.split("/"),r="https://api.cloudinary.com/v1_1/".concat("dfdvfunfj","/").concat(n[0],"/upload"),(s=new FormData).append("file",e[a]),s.append("upload_preset","zc8aff64");try{t.push(x.a.post(r,s))}catch(l){console.log("Had issues uploading to cloudinary",l)}}return i.next=4,y.a.awrap(Promise.all(t));case 4:return o=i.sent,c=o.map((function(e){return e.data.url})),i.abrupt("return",c);case 7:case"end":return i.stop()}}))}var we=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={signUpCred:{fullName:"",userName:"",password:"",about:"",imgUrl:""},isLoadingImg:!1},a.addMediaAndTags=function(e){var t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a.setState({isLoadingImg:!0}),n.next=3,y.a.awrap(Ee(e.target.files));case 3:return t=n.sent,n.abrupt("return",a.setState({imgUrl:t[0],isLoadingImg:!1}));case 5:case"end":return n.stop()}}))},a.signUpHandleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){return{signUpCred:Object(X.a)({},e.signUpCred,Object(f.a)({},n,r))}}))},a.doSignUp=function(e){var t,n,r,s,o,c;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.preventDefault(),t=a.state.signUpCred,n=t.fullName,r=t.userName,s=t.password,o=t.about,n&&r&&s&&o){i.next=4;break}return i.abrupt("return",console.log("all inputs are required fullName, userName, password, about",n,r,s,o));case 4:return c={fullName:n,userName:r,password:s,about:o,imgUrl:a.state.imgUrl},i.prev=5,i.next=8,y.a.awrap(a.props.signUp(c));case 8:a.setState({signUpCred:{fullName:"",password:"",userName:"",about:"",imgUrl:""}},(function(){return h.push("/")})),i.next=14;break;case 11:throw i.prev=11,i.t0=i.catch(5),i.t0;case 14:case"end":return i.stop()}}),null,null,[[5,11]])},a.removeImg=function(){return a.setState({imgUrl:""})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this.state,t=e.imgUrl,a=e.isLoadingImg,n=this.props.loggedInUser,s="";t&&(s=r.a.createElement("div",{className:"media-container"},r.a.createElement("img",{src:t,className:"signup-img",alt:""}),r.a.createElement("span",{className:"pointer",onClick:this.removeImg},"X")));var o=r.a.createElement("form",{className:"signup-form flex column align-center",onSubmit:this.doSignUp},r.a.createElement("input",{type:"text",className:"input",name:"fullName",value:this.state.signUpCred.fullName,onChange:this.signUpHandleChange,placeholder:"Full Name"}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"input",name:"userName",value:this.state.signUpCred.userName,onChange:this.signUpHandleChange,placeholder:"UserName"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",className:"input",name:"password",value:this.state.signUpCred.password,onChange:this.signUpHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"input",name:"about",value:this.state.signUpCred.about,onChange:this.signUpHandleChange,placeholder:"About"}),r.a.createElement("br",null),r.a.createElement("input",{type:"file",className:"hidden",name:"imgUrl",placeholder:"Profile Image",onChange:this.addMediaAndTags,id:"upload"}),r.a.createElement("label",{htmlFor:"upload",className:"input pointer upload-button flex"},r.a.createElement("img",{alt:"",src:"https://pngimage.net/wp-content/uploads/2018/06/png-upload-4.png"}),"Upload Img"),s,r.a.createElement("br",null),s&&r.a.createElement("button",{className:"signup-btn"},"Join"));return r.a.createElement("div",{className:"content-container signup-container flex column align-center"},r.a.createElement("img",{className:"signup-logo",alt:"logo",src:"/logo.png",width:"100px"}),a&&r.a.createElement("div",{className:"loader"}),(!n||!n.userName)&&o)}}]),t}(n.Component),xe={signUp:function(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(W.signUp(e));case 3:return a=n.sent,t(q(a)),n.abrupt("return");case 8:throw n.prev=8,n.t0=n.catch(0),console.log("Had issues in signing up",n.t0),n.t0;case 12:case"end":return n.stop()}}),null,null,[[0,8]])}}},Oe=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),xe)(we),Ne=(a(507),a(260)),Ce=a.n(Ne),je=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",tag:"",filterBy:"title",sortBy:"",isAscending:!1,isShown:!1},a.inputChange=function(e){var t=e.target,n=t.name,r=t.value;return"filterBy"===n?a.setState({title:"",tag:"",filterBy:r},(function(){return a.onFilterBy()})):"sortBy"===n?a.setState((function(e){return{sortBy:r,isShown:!e.isShown}}),a.onFilterBy):void a.setState(Object(f.a)({},a.state.filterBy,r),a.onFilterBy)},a.onFilterBy=function(){a.props.onFilterBy(a.state)},a.changeOrder=function(){a.setState((function(e){return Object(X.a)({},e,{isAscending:!e.isAscending})}),a.onFilterBy)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=window.location.search,t=new URLSearchParams(e).get("sortBy");console.log(t),this.setState({sortBy:t||"Sort By:"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.filterBy,n=t.sortBy,s=t.isShown;return r.a.createElement("div",{className:"search-filter-container totally-center"},r.a.createElement("div",{className:"search-container flex"},r.a.createElement("input",{className:"search-input input",value:this.state[a],type:"search",placeholder:"Search by ".concat(a),onChange:this.inputChange}),r.a.createElement("input",{className:"hidden",name:"filterBy",onChange:this.inputChange,defaultChecked:!0,id:"title",value:"title",type:"radio"}),r.a.createElement("label",{className:"btn title-btn pointer",htmlFor:"title"}," Title"),r.a.createElement("input",{className:"hidden",onChange:this.inputChange,name:"filterBy",id:"tag",value:"tag",type:"radio"}),r.a.createElement("label",{className:"btn tag-btn pointer",htmlFor:"tag"}," Tag ")),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"filter-container flex column "},r.a.createElement("button",{htmlFor:"sortBy",onClick:function(){return e.setState((function(e){return{isShown:!e.isShown}}))},className:s?"btn sort-by pointer sort-by-checked":"btn sort-by pointer"},""!==n?"ReleaseDate"===n?"Release Date":n:"Sort by"),s&&r.a.createElement("div",{className:"sort-by-inputs"},r.a.createElement("button",{className:"pointer sort-by-button",name:"sortBy",onClick:this.inputChange,value:"ReleaseDate"},"Release Date"),r.a.createElement("button",{className:"pointer sort-by-button",name:"sortBy",onClick:this.inputChange,value:"Popularity"},"Popularity"),r.a.createElement("button",{className:"pointer sort-by-button",name:"sortBy",onClick:this.inputChange,value:"Rating"},"Rating"),r.a.createElement("button",{className:"pointer sort-by-button",onClick:this.inputChange,name:"sortBy",value:"Price"},"Price"))),r.a.createElement("button",{className:"btn order-btn",onClick:this.changeOrder},r.a.createElement("img",{alt:"",src:Ce.a}))))}}]),t}(n.Component),ke=(a(508),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={games:null},a.componentDidMount=function(){var e,t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:window.scrollTo(0,0),e=window.location.search,t={sortBy:new URLSearchParams(e).get("sortBy")},a.onFilterBy(t);case 4:case"end":return n.stop()}}))},a.onUpdateUser=function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:a.props.updateUser(e);case 1:case"end":return t.stop()}}))},a.onFilterBy=function(){var e,t,n,r=arguments;return y.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},s.next=3,y.a.awrap(a.props.loadGames(Object(X.a)({},e)));case 3:if(t=s.sent,!e.sortBy){s.next=11;break}return s.next=7,y.a.awrap(T.sortGames(t,e.sortBy,e.isAscending));case 7:n=s.sent,a.setState({games:n}),s.next=12;break;case 11:a.setState({games:t});case 12:case"end":return s.stop()}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.games;return r.a.createElement("div",{className:"content-container flex column container align-center"},r.a.createElement(je,{onFilterBy:this.onFilterBy}),r.a.createElement(de,{history:this.props.history,user:this.props.user,onUpdateUser:this.onUpdateUser,games:e}))}}]),t}(n.Component)),Se={loadGames:L,updateUser:H},Ue=Object(c.b)((function(e){return{games:e.gameStore.games,user:e.userStore.loggedInUser}}),Se)(ke),Te=a(596),Me=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLongTxtShown:a.props.isLongTxtShown},a.getText=function(){return a.state.isLongTxtShown?a.props.text:a.props.text.substring(0,a.props.shortLength)},a.handleReadMore=function(){a.setState((function(e){return{isLongTxtShown:!e.isLongTxtShown}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getButtonTxt",value:function(){return this.state.isLongTxtShown?"":"..."}},{key:"render",value:function(){return r.a.createElement("span",{className:"read-more",onClick:this.handleReadMore},this.getText(),this.props.text.length>=this.props.shortLength&&r.a.createElement("span",{className:"read-more-button"},this.getButtonTxt()))}}]),t}(n.Component),Ae=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:[{name:"0",purcheses:0}]},a.setData=function(e){var t=[];if(a.props.games.length){for(var n=29;n>=0;n--){var r=new Date;r.setDate(r.getDate()-n);var s="".concat(r.getDate(),"/").concat(r.getMonth()+1),o=void 0;o=e[s]?e[s]:0,t.push({name:s,purchases:o})}a.setState({data:t})}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.orderDates!==this.props.orderDates&&this.setData(this.props.orderDates)}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement("div",{className:"flex column chart align-center"},r.a.createElement("strong",{className:"chart-title"},"Downloads distribution per day"),r.a.createElement(Y.b,{width:350,height:300,data:e,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement(Y.h,{dataKey:"name"}),r.a.createElement(Y.i,null),r.a.createElement(Y.g,null),r.a.createElement(Y.a,{type:"monotone",dataKey:"purchases",stroke:"#517692",fill:"#6899bc"})))}}]),t}(n.PureComponent),De=(a(509),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={data:[{fill:"#16578F",name:"publish Games",value:1}],gameTitles:null,colors:["#6899bc","#517692","#3a5568","#81b2d5","#2e4453","#1b2a49","#465881","#00909e","#c9d1d3"]},a.setData=function(e){var t=a.state.colors,n=[],r=[];a.props.games.forEach((function(s,o){e[o]&&(!a.props.user&&o>3||(r.push(s.title),n.push({fill:t[o],name:s.title,value:e[o]})))})),a.setState({data:n,gameTitles:r})},a.renderCustomizedLabel=function(e){var t=e.cx,a=e.cy,n=e.midAngle,s=e.innerRadius,o=e.outerRadius,c=e.percent,i=(e.index,Math.PI/180),l=s+.5*(o-s),u=t+l*Math.cos(-n*i),m=a+l*Math.sin(-n*i);return r.a.createElement("text",{x:u<110&&m>110?u-13.5:u,y:m,fill:"white",textAnchor:u>t?"start":"end",dominantBaseline:"central"},"".concat((100*c).toFixed(0),"%"))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.sumOfGames!==this.props.sumOfGames&&this.setData(this.props.sumOfGames)}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.gameTitles,n=e.colors;return r.a.createElement("div",{className:"flex column chart align-center"},r.a.createElement("strong",{className:"chart-title"},"Income distribution per game"),r.a.createElement("div",{className:"flex column align-center"},r.a.createElement(Y.f,{width:250,height:250},r.a.createElement(Y.e,{dataKey:"value",isAnimationActive:!0,data:t,cx:100,cy:100,outerRadius:100,fill:"#8884d8",labelLine:!1,label:this.renderCustomizedLabel}),r.a.createElement(Y.g,null)),r.a.createElement("div",{className:"legend flex wrap"},a&&a.map((function(e,t){return r.a.createElement("div",{className:"legend-item flex",key:e},r.a.createElement("div",{className:"menu-color",style:{background:n[t],width:"20px",height:"20px"}}),r.a.createElement("div",{className:"title"},e))})))))}}]),t}(n.PureComponent));a(510);function Ie(e){return r.a.createElement("div",{className:"info-card flex column align-center"},r.a.createElement("p",null,e.children),r.a.createElement("p",{className:"data"},e.children.includes("Earned")&&"$",e.data))}a(511);var Ge,Re=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orders:null,filterBy:{_id:""},sumOfGames:[],monthMoneySum:null,downloadsByMonth:null,downloadsByWeek:null},a.getGraphsDetails=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(T.getGraphsDetails(a.props.games));case 2:e=t.sent,a.setState({orders:e});case 4:case"end":return t.stop()}}))},a.getWeekInfo=function(){var e,t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.a.awrap(T.getGraphsDetails(a.props.games,"games",7));case 2:e=n.sent,t=e.reduce((function(e,t){return e+t}),0).toLocaleString(),a.setState({downloadsByWeek:t});case 5:case"end":return n.stop()}}))},a.getMonthInfo=function(){var e,t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.a.awrap(T.getSum(a.props.games));case 2:e=r.sent,t=e.sum.reduce((function(e,t){return e+t}),0).toLocaleString(),n=e.downloadsByGame.reduce((function(e,t){return e+t}),0).toLocaleString(),a.setState({sumOfGames:e.sum,monthMoneySum:t,downloadsByMonth:n});case 6:case"end":return r.stop()}}))},a.componentDidUpdate=function(e){e.games.length!==a.props.games.length&&(a.getGraphsDetails(),a.getWeekInfo(),a.getMonthInfo())},a.componentDidMount=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:a.props.loggedInUser?(e=a.props.loggedInUser._id,a.setState({filterBy:{_id:e}},(function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.awrap(a.props.loadGames(a.state.filterBy));case 2:case"end":return e.stop()}}))}))):a.props.loadGames(),a.getGraphsDetails(),a.getWeekInfo(),a.getMonthInfo();case 4:case"end":return t.stop()}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.state,a=t.orders,n=t.sumOfGames,s=t.monthMoneySum,o=t.downloadsByMonth,c=t.downloadsByWeek;return this.props.loggedInUser&&(e=r.a.createElement("div",{className:"games-container flex column totally-center"},r.a.createElement("h3",{className:"data-header"},"Per Game"),r.a.createElement(de,{isDashboard:!0,isProfile:!0,games:this.props.games})),!this.props.games.length)?r.a.createElement("div",{className:"container dashboard-container flex column align-center"},r.a.createElement("h3",{className:"dashboard-header"},"Publish games to see more")):r.a.createElement("div",{className:"container dashboard-container flex column align-center"},this.props.loggedInUser?r.a.createElement("h3",{className:"data-header"},"For All Games"):r.a.createElement("h3",{className:"dashboard-header"},"This is a demo of the dashboard, login to see your data"),r.a.createElement("div",{className:"flex info-cards-container"},r.a.createElement(Ie,{data:s},"Earned this month:"),r.a.createElement(Ie,{data:o},"Downloads this month:"),r.a.createElement(Ie,{data:c},"Downloads this week:")),r.a.createElement("div",{className:"charts-container flex wrap"},r.a.createElement(Ae,{games:this.props.games,orderDates:a}),r.a.createElement(De,{user:this.props.loggedInUser,games:this.props.games,sumOfGames:n})),e)}}]),t}(n.Component),Be={loadGames:L},_e=Object(c.b)((function(e){return{games:e.gameStore.games,loggedInUser:e.userStore.loggedInUser}}),Be)(Re),Pe=(a(512),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={games:[],gamesIds:[]},a.componentDidMount=function(){var e,t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=[],!a.props.user){n.next=6;break}return n.next=4,y.a.awrap(U.query({orderBy:a.props.user._id}));case 4:n.sent.forEach((function(t){t.gameIds.forEach((function(t){e.push(t)}))}));case 6:if(!e.length){n.next=11;break}return n.next=9,y.a.awrap(a.props.loadGames({shoppingCartIds:e}));case 9:t=n.sent,a.setState({games:t,gamesIds:e});case 11:case"end":return n.stop()}}))},a.onFilterBy=function(){var e,t,n=arguments;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:{},a.state.gamesIds.length){r.next=3;break}return r.abrupt("return");case 3:return e.gamesIds=a.state.gamesIds,r.next=6,y.a.awrap(a.props.loadGames(Object(X.a)({},e,{shoppingCartIds:a.state.gamesIds})));case 6:if(!e.sortBy){r.next=13;break}return r.next=9,y.a.awrap(T.sortGames(a.state.games,e.sortBy,e.isAscending));case 9:t=r.sent,a.setState({games:t}),r.next=14;break;case 13:a.setState({games:a.props.games});case 14:case"end":return r.stop()}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.games;return r.a.createElement("div",{className:"flex column align-center container"},r.a.createElement(je,{onFilterBy:this.onFilterBy}),r.a.createElement(de,{isProfile:!0,history:this.props.history,games:e}),this.props.user&&this.props.user.userName?r.a.createElement("div",{className:"publish-button btn"},r.a.createElement(E.a,{to:"/edit"},"Publish a game")):"")}}]),t}(n.Component)),Fe={loadGames:L},Le={Dashboard:_e,OwnedGames:Object(c.b)((function(e){return{games:e.gameStore.games,user:e.userStore.loggedInUser}}),Fe)(Pe)},We=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getComponent",value:function(){return Le[this.props.mode]}},{key:"render",value:function(){var e=this.getComponent();return r.a.createElement(r.a.Fragment,null,r.a.createElement(e,{history:this.props.history}))}}]),t}(n.Component),He=(a(513),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={mode:"OwnedGames",user:{_id:"null",fullName:"Guest",userName:"Guest",about:"Guest",createdAt:123879186123,imgUrl:"http://keenthemes.com/preview/metronic/theme/assets/pages/media/profile/profile_user.jpg",desiredGames:[{game:"gta"}]}},a.updateMode=function(e){var t=e.target.value;a.setState({mode:t})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.props.loggedInUser&&this.props.loggedInUser.userName&&this.setState({user:this.props.loggedInUser})}},{key:"render",value:function(){var e=this.state.user;return"null"!==e._id?e.createdAt=T.formatDate(T.dateFromObjectId(e._id)):e.createdAt="Dec 2013",r.a.createElement("div",{className:"profile-container"},r.a.createElement("div",{className:"user-card flex align-center container"},r.a.createElement("img",{className:"user-img small",alt:"",src:e.imgUrl}),r.a.createElement("div",{className:"user-details"},r.a.createElement("strong",null,e.userName),r.a.createElement("small",null,e.createdAt),r.a.createElement("div",null,r.a.createElement(Me,{shortLength:100,isLongTxtShown:!1,text:e.about}))),r.a.createElement(Te.a,{title:"Edit details",type:"edit",key:"edit"})),r.a.createElement("div",{className:"tab-nav flex justify-center"},r.a.createElement("label",{className:"OwnedGames"===this.state.mode?"inner-tab active":"inner-tab",htmlFor:"OwnedGames"},r.a.createElement("p",null,"Games"),r.a.createElement("input",{name:"tab",type:"radio",onChange:this.updateMode,checked:"OwnedGames"===this.state.mode,value:"OwnedGames",id:"OwnedGames"})),r.a.createElement("label",{className:"Dashboard"===this.state.mode?"inner-tab active":"inner-tab",htmlFor:"Dashboard"},r.a.createElement("p",null,"Dashboard"),r.a.createElement("input",{name:"tab",type:"radio",onChange:this.updateMode,value:"Dashboard",id:"Dashboard"}))),r.a.createElement(We,{className:"dynamic-prev",history:this.props.history,mode:this.state.mode}))}}]),t}(n.Component)),qe=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),{})(He),Je=a(266),Xe=a.n(Je),$e={setup:function(){Ge=Xe()("/")},terminate:function(){Ge=null},on:function(e,t){Ge.on(e,t)},off:function(e,t){Ge.off(e,t)},emit:function(e,t){Ge.emit(e,t)}};function Ke(e){return e.mediaUrls.map((function(t){return t.includes("mp4")?r.a.createElement("video",{key:t,onClick:e.onThumbNailPhotoClick,alt:"",className:"game-choose-thumbnail",src:"".concat(t,"#t=23")}):r.a.createElement("img",{key:t,onClick:e.onThumbNailPhotoClick,alt:"",className:"game-choose-thumbnail",src:t})}))}a(586);var ze=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orderCount:"",rating:"",publisherName:"",isOwned:!1},a.componentDidMount=function(){var e=a.props.game;a.setOrderCount(e),a.setGameRating(e),a.setPublisherName(e.publisher),a.purchaseCheck()},a.componentDidUpdate=function(e){var t=a.props.game;t.title!==e.game.title&&(a.setOrderCount(t),a.setGameRating(t),a.setPublisherName(t.publisher),a.purchaseCheck())},a.setOrderCount=function(e){var t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.a.awrap(T.getSum([e]));case 2:t=n.sent,a.setState({orderCount:t.downloadsByGame});case 4:case"end":return n.stop()}}))},a.onAddToCart=function(){a.props.onAddToCart(a.props.game._id)},a.setGameRating=function(e){var t=T.formatGameRating(T.getGameRating(e));a.setState({rating:t})},a.setPublisherName=function(e){var t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.a.awrap(W.getById(e));case 2:t=r.sent,n=t.userName,a.setState({publisherName:n});case 5:case"end":return r.stop()}}))},a.purchaseCheck=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=[],!a.props.user){t.next=5;break}return t.next=4,y.a.awrap(U.query({orderBy:a.props.user._id,gameId:a.props.game._id}));case 4:e=t.sent;case 5:if(!e.length){t.next=9;break}return t.abrupt("return",a.setState({isOwned:!0}));case 9:return t.abrupt("return",a.setState({isOwned:!1}));case 10:case"end":return t.stop()}}))},a.onPlayClikc=function(){h.push("/play/".concat(a.props.game._id))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.game,a=e.user,n=t.thumbnail,s=t.description,o=t.publishedAt,c=t.price,i=t._id,l=this.state,u=l.publisherName,m=l.rating,p=l.orderCount,d=l.isOwned?r.a.createElement("button",{onClick:this.onPlayClikc,className:"play-btn-container"},"Play"):r.a.createElement("button",{type:"primary",className:"buy-btn",onClick:this.onAddToCart},"$",c," Add to Cart "),g=new Date(o/1),h=T.formatDate(g);return r.a.createElement("div",{className:"desc desc-container flex column"},r.a.createElement("img",{alt:"",className:"game-thumbnail",src:n}),r.a.createElement("div",{className:"details flex space-between align-center"},r.a.createElement("p",{className:"publisher"},u),r.a.createElement("p",{className:"published"},h)),r.a.createElement("div",{className:"rating-downloads"},r.a.createElement("p",{className:"rating"},"Rating: ",m),r.a.createElement("p",{className:"downloads"},"Last month downloads: ",p)),r.a.createElement("p",{className:"description full"},s),r.a.createElement("div",{className:"flex space-between"},r.a.createElement("img",{alt:"like",className:"wish-btn",title:"Wish list",onClick:this.props.onToggleWishedGame,src:a&&a.wishedGames.find((function(e){return e===i}))?ee.a:ae.a}),r.a.createElement("div",null,d)))}}]),t}(n.Component),Ve=a(267),Ye=a.n(Ve),Qe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={text:""},a.inputChange=function(e){var t=e.target.name;a.setState(Object(f.a)({},t,e.target.value))},a.onAddComment=function(){var e=a.state.text;if(e){var t={userName:"Guest"};a.props.user&&(t=a.props.user),a.props.onAddCommentOrReview({text:e,user:t},!0),a.setState({text:""})}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.comments,t=this.state.text;if(!e)return"";var a=e.map((function(e){return e.user?r.a.createElement("p",{key:e.text+e.user.userName},e.user.userName," : ",e.text):r.a.createElement("p",{key:e.text},e.text)}));return r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"social-content-container"},a),r.a.createElement("div",{className:"flex new-comment-container"},r.a.createElement("textarea",{className:"full",type:"text",name:"text",value:t,onChange:this.inputChange,placeholder:"Write here"}),r.a.createElement("button",{className:"add-button btn",onClick:this.onAddComment,type:"primary"},r.a.createElement("img",{alt:"send",src:Ye.a}))))}}]),t}(n.Component),Ze=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={rating:"",text:""},a.inputChange=function(e){var t=e.target.name;a.setState(Object(f.a)({},t,e.target.value))},a.onAddReview=function(){var e=a.state,t=e.rating,n=e.text;t&&(a.props.onAddCommentOrReview({user:{userName:a.props.user.userName},rating:t,text:n},!0,"reviews"),a.setState({text:""}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.text;return r.a.createElement("div",null,r.a.createElement("div",{className:"new-comment-container flex align-center"},r.a.createElement("textarea",{type:"text",name:"text",value:e,onChange:this.inputChange,placeholder:"write your text"}),r.a.createElement("input",{className:"hidden",type:"radio",value:"like",onChange:this.inputChange,name:"rating",id:"like"}),r.a.createElement("label",{className:"like-img pointer",htmlFor:"like",name:"rating"},r.a.createElement("img",{alt:"like",src:"https://img.icons8.com/ultraviolet/40/000000/good-quality.png"})),r.a.createElement("input",{className:"hidden",type:"radio",onChange:this.inputChange,value:"dislike",name:"rating",id:"dislike"}),r.a.createElement("label",{htmlFor:"dislike",className:"dislike-img pointer",name:"rating"},r.a.createElement("img",{alt:"dislike",src:"https://img.icons8.com/ultraviolet/40/000000/poor-quality.png"})),r.a.createElement("button",{className:"add-button",onClick:this.onAddReview},"Add a Review")))}}]),t}(n.Component);var et=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),{})((function(e){return e.loggedInUser&&e.loggedInUser.userName?r.a.createElement("div",null,e.children):null})),tt=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.reviews,a=e.user;return r.a.createElement("div",{className:"reviews-container"},r.a.createElement("ul",{className:"social-content-container"},t.map((function(e){return r.a.createElement("div",{className:"review-container flex",key:e.text},r.a.createElement("div",{className:"flex column review-user-details"},r.a.createElement("p",null,e.user.userName),"like"===e.rating?r.a.createElement("img",{alt:"like",src:"https://img.icons8.com/ultraviolet/40/000000/good-quality.png"}):r.a.createElement("img",{alt:"dislike",src:"https://img.icons8.com/ultraviolet/40/000000/poor-quality.png"})),r.a.createElement("div",null,r.a.createElement("p",null,e.text)))}))),r.a.createElement(et,null,r.a.createElement(Ze,{user:a,onAddCommentOrReview:this.props.onAddCommentOrReview,onAddReview:this.onAddReview,inputChange:this.inputChange})))}}]),t}(n.Component),at=(a(587),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={currMediaUrl:"",toggleModal:!1,modalTxt:""},a.componentDidMount=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return window.scrollTo(0,0),e=a.props.match.params.id,t.next=4,y.a.awrap(a.props.loadGame(e));case 4:a.setState({currMediaUrl:a.props.game.mediaUrls[0]}),a.initiateSockets();case 6:case"end":return t.stop()}}))},a.initiateSockets=function(){$e.setup(),$e.emit("chat room",a.props.game.title),$e.on("chat newComment",a.onAddCommentOrReview)},a.componentWillUnmount=function(){$e.terminate()},a.onAddCommentOrReview=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"comments",r=Object(X.a)({},a.props.game);return r[n]=[].concat(Object(v.a)(r[n]),[e]),t?("comments"===n&&$e.emit("chat newComment",e),a.props.updateGame(r)):a.props.updateComments(r)},a.onAddToCart=function(e){try{a.props.addGameToCart(e),a.setState({modalTxt:"Game has been added to the cart",toggleModal:!0},a.onToggleModal())}catch(t){a.setState({modalTxt:"Game is already in the cart",toggleModal:!0},a.onToggleModal())}},a.toggleWishedGame=function(e){var t=a.props,n=t.loggedInUser,r=t.game;e.stopPropagation();var s,o=n&&n.wishedGames||[];s=-1===o.findIndex((function(e){return e===r._id}))?Object(X.a)({},n,{wishedGames:[].concat(Object(v.a)(o),[r._id])}):Object(X.a)({},n,{wishedGames:o.filter((function(e){return e!==r._id}))}),a.props.updateUser(s)},a.onToggleModal=function(){setTimeout((function(){a.setState((function(e){return{toggleModal:!e.toggleModal}}))}),2e3)},a.onThumbNailPhotoClick=function(e){a.setState({currMediaUrl:e.target.src})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(!this.props.game)return r.a.createElement("h1",null,"Loading");var e,t=this.props,a=t.loggedInUser,n=t.game,s=n.title,o=n.reviews,c=n.mediaUrls,i=n.tags,l=n.comments,u=this.state,m=u.modalTxt,p=u.currMediaUrl,d=u.toggleModal;return e=p.includes(".mp4")?r.a.createElement("iframe",{title:"video",src:"".concat(p,"?#t=0&#autoplay=1&mute=1"),allowFullScreen:"allowfullscreen",volume:0,className:"game-main-thumbnail"}):r.a.createElement("img",{src:p,alt:"",className:"game-main-thumbnail"}),r.a.createElement("div",{className:"container content-container"},d&&r.a.createElement(ie,null,r.a.createElement(le,{modalTxt:m,toggleModal:this.onToggleModal})),r.a.createElement("h1",null,s),r.a.createElement("div",{className:"grid game-main-content-container "},e,r.a.createElement("div",{className:"flex game-choose-thumbnail-container"},r.a.createElement(Ke,{onThumbNailPhotoClick:this.onThumbNailPhotoClick,mediaUrls:c})),r.a.createElement(ze,{user:a,onToggleWishedGame:this.toggleWishedGame,onAddToCart:this.onAddToCart,game:this.props.game})),r.a.createElement("h2",null,"Tags:"),i.map((function(e){return r.a.createElement("span",{className:"tag",key:e},e," ")})),r.a.createElement("h2",null,"Reviews :"),r.a.createElement(tt,{user:a,onAddCommentOrReview:this.onAddCommentOrReview,reviews:o}),r.a.createElement("h2",null,"Comments :"),r.a.createElement(Qe,{user:a,isDetails:!0,onAddCommentOrReview:this.onAddCommentOrReview,comments:l}))}}]),t}(n.Component)),nt={addGameToCart:z,loadGame:function(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(_.getById(e));case 3:return a=n.sent,t(F(a)),n.abrupt("return",a);case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}},updateGame:function(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(_.update(e));case 3:return a=n.sent,t(F(e)),n.abrupt("return",a);case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}}),null,null,[[0,8]])}},updateComments:function(e){return function(t){try{return t(F(e)),e}catch(a){}}},updateUser:H},rt=Object(c.b)((function(e){return{cart:e.cartStore.cart,game:e.gameStore.game,loggedInUser:e.userStore.loggedInUser}}),nt)(at),st=(a(588),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={comments:null},a.componentWillUnmount=function(){$e.terminate()},a.sendComment=function(e){$e.emit("chat newComment",e)},a.addComment=function(e){if(!a.state.comments)return a.setState({comments:[e]});a.setState((function(t){return{comments:[].concat(Object(v.a)(t.comments),[e])}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=this.props.loggedInUser?this.props.loggedInUser.userName:"Guest";$e.setup(),$e.emit("chat room",this.props.match.params.id),$e.emit("user joined",{text:"".concat(e," has joined the chat")}),$e.on("chat newComment",this.addComment),$e.on("user joined",this.addComment)}},{key:"render",value:function(){var e=this.state.comments,t=this.props.loggedInUser?"":"Buy the game to enjoy it fully";return r.a.createElement("div",{className:"container content-container play-container"},r.a.createElement("h3",null,t),r.a.createElement("div",{className:"game-content-container flex"},r.a.createElement("iframe",{title:"play",src:"https://www.gameflare.com/embed/cartoon-strike/",frameBorder:"0",scrolling:"no",width:"1000",height:"635",allowFullScreen:!0}),r.a.createElement("div",{className:"comments-container"},r.a.createElement(Qe,{user:this.props.loggedInUser,onAddCommentOrReview:this.sendComment,comments:e}))))}}]),t}(n.Component)),ot=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),{})(st),ct=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loadCart()}},{key:"render",value:function(){return this.props.isWishList?r.a.createElement("p",{style:{marginInlineEnd:"3px",alignSelf:"center",color:"white"}},this.props.user?this.props.user.wishedGames.length:0):r.a.createElement("p",{style:{alignSelf:"center",color:"white"}},this.props.cart.length)}}]),t}(n.Component),it={loadCart:function(){return function(e){e(V(K.query()))}}},lt=Object(c.b)((function(e){return{cart:e.cartStore.cart,user:e.userStore.loggedInUser}}),it)(ct),ut=(a(589),a(268)),mt=a.n(ut),pt=a(269),dt=a.n(pt),gt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).doLogOut=function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.awrap(a.props.logout());case 3:h.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Had issues while logging out ",e.t0);case 9:case"end":return e.stop()}}),null,null,[[0,6]])},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.loggedInUser,a=t?t.userName:"guest";return r.a.createElement("nav",{className:"nav-bar flex align-center"},r.a.createElement("div",{className:"nav-logo full"},r.a.createElement(E.a,{to:"/"},r.a.createElement("img",{alt:"logo",src:"/navbar-logo.png"}))),r.a.createElement("input",{type:"checkbox",className:"hidden",id:"menu"}),r.a.createElement("div",{className:"flex nav-link-container"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"nav-link flex align-center",onClick:function(){return e.props.toggleModal("wishlist")}},r.a.createElement(lt,{isWishList:!0}),r.a.createElement("img",{alt:"",src:mt.a})),r.a.createElement("div",{className:"nav-link flex align-center",onClick:function(){return e.props.toggleModal("shoppingCart")}},r.a.createElement(lt,null),r.a.createElement("img",{alt:"",src:dt.a}))),r.a.createElement("label",{className:"nav-bar-hamburger pointer",htmlFor:"menu"},"\u2630"),r.a.createElement("div",{className:"nav-bar-menu"},r.a.createElement(E.b,{to:"/",exact:!0,className:"nav-link flex align-center",activeClassName:"active"},"Homepage"),r.a.createElement(E.b,{to:"/game",exact:!0,className:"nav-link flex align-center",activeClassName:"active"},"Explore"),r.a.createElement(E.b,{to:"/user/".concat(a||"guest"),exact:!0,className:"nav-link flex align-center",activeClassName:"active"},"Profile"),t&&t.userName?r.a.createElement(E.b,{onClick:this.doLogOut,to:"/",exact:!0,className:"nav-link flex align-center",activeClassName:""},"Logout"):r.a.createElement(E.b,{to:"/login",exact:!0,className:"nav-link flex align-center",activeClassName:"active"},"Login"))))}}]),t}(n.Component),ht={logout:function(){return function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.awrap(W.logout());case 3:return e(q(null)),t.abrupt("return");case 7:throw t.prev=7,t.t0=t.catch(0),console.log("Had issues in logging out",t.t0),t.t0;case 11:case"end":return t.stop()}}),null,null,[[0,7]])}}},ft=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),ht)(gt);function vt(e){return r.a.createElement("div",null,r.a.createElement("p",null,"Confirm Delete"),r.a.createElement("button",{onClick:e.modalAction},"Confirm"),r.a.createElement("button",{onClick:function(){return e.toggleModal(e.modalType)}},"Cancel"))}function bt(e){return e.mediaUrls.map((function(t,a){return t.includes(".mp4")?r.a.createElement("div",{className:"media-container flex",key:t},r.a.createElement("iframe",{src:t,allowFullScreen:"allowfullscreen",title:"video",alt:t}),r.a.createElement("span",{className:"pointer absolute",onClick:function(){return e.removeMediaAndTags("mediaUrls",a)}},"X")):r.a.createElement("div",{className:"media-container  flex",key:t},r.a.createElement("img",{src:t,alt:t}),r.a.createElement("span",{className:"pointer absolute",onClick:function(){return e.removeMediaAndTags("mediaUrls",a)}},"X"))}))}function yt(e){var t=e.thumbnail;return r.a.createElement("div",{className:"flex media-container"},r.a.createElement("img",{src:t,alt:""}),r.a.createElement("span",{className:"pointer absolute",onClick:function(){return e.removeMediaAndTags("thumbnail")}},"X"))}function Et(e){return e.tags.map((function(t,a){return r.a.createElement("div",{className:"tag-container",key:t},r.a.createElement("span",{className:"pointer",onClick:function(){return e.removeMediaAndTags("tags",a)}},"X"),r.a.createElement("p",null,t))}))}var wt=a(270),xt=a.n(wt);function Ot(e){var t,a,n,s=e.onRemoveGame,o=e.inputChange,c=e.addMediaAndTags,i=e.onSubmit,l=e.removeMediaAndTags,u=e.form,m=u.price,p=u.publishedAt,d=u.title,g=u.mediaUrls,h=u.tags,f=u.thumbnail,v=u.description,b=u.loading;return g&&g.length&&(a=r.a.createElement(bt,{removeMediaAndTags:l,mediaUrls:g})),h&&h.length&&(t=r.a.createElement(Et,{removeMediaAndTags:l,tags:h})),f&&(n=r.a.createElement(yt,{thumbnail:f,removeMediaAndTags:l})),r.a.createElement("div",{className:"edit-container content-container"},b&&r.a.createElement("div",{className:"loader"}),r.a.createElement("p",null," Title : "),r.a.createElement("input",{type:"text",onChange:o,value:d,placeholder:"title",name:"title"}),r.a.createElement("p",null,"Publish Date"),r.a.createElement("input",{type:"date",onChange:o,value:p,name:"publishedAt"}),r.a.createElement("p",null," Descripiton: "),r.a.createElement("textarea",{type:"text",onChange:o,placeholder:"description",name:"description",value:v}),r.a.createElement("p",null," Thumbnail Img: "),r.a.createElement("input",{type:"file",onChange:c,placeholder:"thumbnail",name:"thumbnail"}),n,r.a.createElement("p",null," Media: "),r.a.createElement("div",null,r.a.createElement("input",{type:"file",onChange:c,placeholder:"Put your image Urls here",name:"mediaUrls",multiple:!0}),r.a.createElement("div",{className:"flex wrap"},a)),r.a.createElement("p",null,"Price: "),r.a.createElement("input",{type:"number",onChange:o,placeholder:"price",name:"price",value:m}),r.a.createElement("p",null,"Tags:"),r.a.createElement("input",{type:"tags",onChange:o,placeholder:"tags",name:"currTag"}),r.a.createElement("button",{name:"tags",onClick:c},"Add Tag"),r.a.createElement("div",{className:"flex"},t),r.a.createElement("button",{title:"Delete",className:"btn",onClick:s},r.a.createElement("img",{alt:"",src:xt.a})),r.a.createElement("button",{onClick:i},"Submit"))}a(590);var Nt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",description:"",thumbnail:"",mediaUrls:[],price:"",publishedAt:"",tags:[],currTag:"",loading:!1,modalType:"",toggleModal:!1},a.componentDidMount=function(){var e,t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e=a.props.match.params.id)){r.next=7;break}return r.next=4,y.a.awrap(_.getById(e));case 4:t=r.sent,n=a.getDateInput(t.publishedAt),a.setState(Object(X.a)({},t,{publishedAt:n}));case 7:case"end":return r.stop()}}))},a.onRemoveGame=function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({toggleModal:!0}),a.onToggleModal("confirmDelete");case 2:case"end":return e.stop()}}))},a.removeGame=function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState((function(e){return{toggleModal:!e.toggleModal,modalType:""}})),e.prev=1,e.next=4,y.a.awrap(_.remove(a.state._id));case 4:h.push("/user/".concat(a.props.loggedInUser.userName)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("cant remove game");case 10:case"end":return e.stop()}}),null,null,[[1,7]])},a.onToggleModal=function(e){a.state.toggleModal?e===a.state.modalType?a.setState((function(e){return{toggleModal:!e.toggleModal,modalType:""}})):a.setState({modalType:e}):a.setState({modalType:e,toggleModal:!0})},a.getDateInput=function(e){var t=new Date(e/1),a=("0"+t.getDate()).slice(-2),n=("0"+(t.getMonth()+1)).slice(-2);return t.getFullYear()+"-"+n+"-"+a},a.onSubmit=function(){var e,t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if((e=Object(X.a)({},a.state)).publishedAt=new Date(e.publishedAt).getTime(),e.mediaUrls){r.next=4;break}return r.abrupt("return");case 4:if(e.thumbnail){r.next=6;break}return r.abrupt("return");case 6:if(!a.props.match.params.id){r.next=13;break}return delete e.currTag,delete e.loading,r.next=11,y.a.awrap(_.update(e));case 11:return t=r.sent,r.abrupt("return",a.props.history.push("/game/".concat(t._id)));case 13:if(a.props.loggedInUser){r.next=15;break}return r.abrupt("return");case 15:return e.publisher=a.props.loggedInUser._id,e.comments=[],e.reviews=[],delete e.currTag,delete e.loading,r.next=22,y.a.awrap(_.add(e));case 22:return n=r.sent,r.abrupt("return",a.props.history.push("/game/".concat(n._id)));case 24:case"end":return r.stop()}}))},a.addMediaAndTags=function(e){var t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if("tags"===(t=e.target.name)){r.next=9;break}return a.setState({loading:!0}),r.next=5,y.a.awrap(Ee(e.target.files));case 5:if(n=r.sent,"thumbnail"!==t){r.next=8;break}return r.abrupt("return",a.setState({thumbnail:n[0],loading:!1}));case 8:return r.abrupt("return",a.setState((function(e){return{mediaUrls:[].concat(Object(v.a)(e.mediaUrls),Object(v.a)(n)),loading:!1}})));case 9:if(a.state.currTag){r.next=11;break}return r.abrupt("return");case 11:a.setState((function(e){return{tags:[].concat(Object(v.a)(e.tags),[a.state.currTag])}}));case 12:case"end":return r.stop()}}))},a.removeMediaAndTags=function(e,t){if("thumbnail"===e)return a.setState({thumbnail:""});var n=Object(v.a)(a.state[e]);n.splice(t,1),a.setState(Object(f.a)({},e,n))},a.inputChange=function(e){var t=e.target.name;a.setState(Object(f.a)({},t,e.target.value))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ot,{onRemoveGame:this.onRemoveGame,removeMediaAndTags:this.removeMediaAndTags,inputChange:this.inputChange,onSubmit:this.onSubmit,addMediaAndTags:this.addMediaAndTags,form:this.state}),"confirmDelete"===this.state.modalType&&r.a.createElement(ie,null,r.a.createElement(vt,{modalType:this.modalType,modalAction:this.removeGame,toggleModal:this.onToggleModal})))}}]),t}(n.Component),Ct=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),{})(Nt),jt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={games:null,gamesIds:null,sum:null},a.onUpdateUser=function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:a.props.updateUser(e);case 1:case"end":return t.stop()}}))},a.onRemoveFromCart=function(e){K.removeFromCart(e),a.loadGames()},a.onBuyClick=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.props.user){t.next=3;break}return h.push("/login"),t.abrupt("return");case 3:return e={createdAt:T.dateByMillisecond(),orderBy:a.props.user._id,gameIds:a.state.gamesIds},t.next=6,y.a.awrap(U.add(e));case 6:a.props.clearCart(),a.props.toggleModal("shoppingCart"),h.push("/user/".concat(a.props.user.userName));case 9:case"end":return t.stop()}}))},a.getSum=function(){var e=a.state.games.reduce((function(e,t){return e+t.price}),0);a.setState({sum:e})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadGames()}},{key:"loadGames",value:function(){var e,t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=K.query(),t=[],!e.length){a.next=6;break}return a.next=5,y.a.awrap(_.query({shoppingCartIds:e}));case 5:t=a.sent;case 6:this.setState({gamesIds:e,games:t}),this.state.games&&this.getSum();case 8:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement("div",{className:"modal totally-center"},this.state.games&&this.state.games.length?r.a.createElement("div",{className:"modal-content"},r.a.createElement(de,{isModal:!0,user:this.props.user,onUpdateUser:this.onUpdateUser,onRemoveFromCart:this.onRemoveFromCart,isCart:!0,games:this.state.games,history:this.props.history}),r.a.createElement("div",{className:"flex justify-center align-center space-between "},r.a.createElement("div",{className:"money-sum"}," Total: $",this.state.sum),r.a.createElement("button",{className:"pointer cla-btn",onClick:this.onBuyClick},"Purchase"))):r.a.createElement("h3",{className:"flex column totally-center"},"Your shopping cart is empty"))}}]),t}(n.Component),kt={clearCart:function(){return function(e){e(V(K.clear()))}},updateUser:H},St=Object(c.b)((function(e){return{user:e.userStore.loggedInUser}}),kt)(jt),Ut=(a(591),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onUpdateUser=function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:a.props.updateUser(e);case 1:case"end":return t.stop()}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){L()}},{key:"render",value:function(){if(this.props.user){var e=this.props,t=e.games,a=e.user,n=t.filter((function(e){return a.wishedGames.includes(e._id)}));return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement(de,{isModal:!0,isWishList:!0,history:this.props.history,user:a,onUpdateUser:this.onUpdateUser,games:n})))}return r.a.createElement("div",{className:"modal"},r.a.createElement("h3",{className:"modal-content empty-wishlist flex align-center"},"Please Login to see your wishlist"))}}]),t}(n.Component)),Tt={loadGames:L,updateUser:H},Mt=Object(c.b)((function(e){return{games:e.gameStore.games,user:e.userStore.loggedInUser}}),Tt)(Ut);a(592);function At(e){return r.a.createElement("div",{className:"footer-container totally-center flex column"},r.a.createElement("img",{className:"logo-footer",width:"10",alt:"logo",src:"/logo.png"}),r.a.createElement("small",{className:"rights"},"\xa9 2020, ",r.a.createElement("span",{className:"name"},"GameIn")," Inc. All rights reserved"),r.a.createElement("div",null,r.a.createElement(E.a,{to:"/about"},"About us")))}a(593);var Dt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={modalType:"",toggleModal:!1},a.toggleModal=function(e){a.state.toggleModal?e===a.state.modalType?a.setState((function(e){return{toggleModal:!e.toggleModal,modalType:""}})):a.setState({modalType:e}):a.setState({modalType:e,toggleModal:!0})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{history:h,className:"App Site"},r.a.createElement(ft,{toggleModal:this.toggleModal}),r.a.createElement(d.c,{className:"Site-content"},r.a.createElement(d.a,{path:"/",component:fe,exact:!0}),r.a.createElement(d.a,{path:"/login",component:ye,exact:!0}),r.a.createElement(d.a,{path:"/sign-up",component:Oe,exact:!0}),r.a.createElement(d.a,{path:"/edit/:id?",component:Ct,exact:!0}),r.a.createElement(d.a,{path:"/game/:id",component:rt,exact:!0}),r.a.createElement(d.a,{path:"/game",component:Ue,exact:!0}),r.a.createElement(d.a,{path:"/user/:id",render:function(){return r.a.createElement(qe,{history:h})},exact:!0}),r.a.createElement(d.a,{path:"/play/:id",component:ot,exact:!0})),r.a.createElement(At,null)),this.state.toggleModal&&r.a.createElement(ie,null,"wishlist"===this.state.modalType?r.a.createElement(Mt,null):r.a.createElement(St,{toggleModal:this.toggleModal})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var It=a(45),Gt=a(271),Rt={game:null,games:[],filterBy:{publisher:""}};var Bt=null;sessionStorage.user&&(Bt=JSON.parse(sessionStorage.user));var _t={loggedInUser:Bt};var Pt={cart:[]};var Ft=Object(It.c)({gameStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GAMES":return Object(X.a)({},e,{games:t.games});case"SET_FILTER":return Object(X.a)({},e,{filterBy:Object(X.a)({},t.filterBy)});case"SET_GAME":return Object(X.a)({},e,{game:t.game});default:return e}},userStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":case"UPDATE_USER":return Object(X.a)({},e,{loggedInUser:t.user});default:return e}},cartStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CART":return Object(X.a)({},e,{cart:t.cart});case"ADD_TO_CART":return Object(X.a)({},e,{cart:[].concat(Object(v.a)(e.cart),[t.item])});case"REMOVE_FROM_CART":return Object(X.a)({},e,{cart:Object(v.a)(e.cart.filter((function(e){return e!==t.item})))});case"CLEAR_CART":return Object(X.a)({},e,{cart:[]});default:return e}}}),Lt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||It.d,Wt=Object(It.e)(Ft,Lt(Object(It.a)(Gt.a)));o.a.render(r.a.createElement(c.a,{store:Wt},r.a.createElement(Dt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},78:function(e,t,a){e.exports=a.p+"static/media/full_heart.1aab119d.svg"},79:function(e,t,a){e.exports=a.p+"static/media/empty_heart.1ff089d1.svg"}},[[295,1,2]]]);
//# sourceMappingURL=main.64b294b6.chunk.js.map