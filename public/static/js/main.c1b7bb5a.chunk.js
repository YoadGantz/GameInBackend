(this["webpackJsonpfinal-project"]=this["webpackJsonpfinal-project"]||[]).push([[0],{104:function(e,t,a){e.exports=a.p+"static/media/play.110eb8dc.svg"},258:function(e,t,a){e.exports=a.p+"static/media/remove_from_cart.ccf11e5c.svg"},259:function(e,t,a){e.exports=a.p+"static/media/edit.a679f828.svg"},261:function(e,t,a){e.exports=a.p+"static/media/arrow_up.d7b22dd4.svg"},262:function(e,t,a){e.exports=a.p+"static/media/arrow_down.eb493c40.svg"},269:function(e,t,a){e.exports=a.p+"static/media/wishlist.58d71a39.svg"},270:function(e,t,a){e.exports=a.p+"static/media/shopping_cart.0ff5ef33.svg"},271:function(e,t,a){e.exports=a.p+"static/media/bin.817d91ee.svg"},296:function(e,t,a){e.exports=a(595)},502:function(e,t,a){},503:function(e,t,a){},504:function(e,t,a){},506:function(e,t,a){},507:function(e,t,a){},508:function(e,t,a){},509:function(e,t,a){},510:function(e,t,a){},511:function(e,t,a){},512:function(e,t,a){},513:function(e,t,a){},514:function(e,t,a){},584:function(e,t){},587:function(e,t,a){},588:function(e,t,a){},589:function(e,t,a){},590:function(e,t,a){},591:function(e,t,a){},592:function(e,t,a){},593:function(e,t,a){},594:function(e,t,a){},595:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(44),o=a.n(s),c=a(12),i=a(5),l=a(6),u=a(8),m=a(7),p=a(9),d=a(18),g=a(24),h=Object(g.a)(),f=a(19),v=a(16),b=a(1),y=a.n(b),E=a(26),w=a(101),x=a.n(w),O=x.a.create({withCredentials:!0}),C=function(e,t,a){return S(e,"GET",t,a)},N=function(e,t){return S(e,"POST",t)},j=function(e,t){return S(e,"PUT",t)},k=function(e,t){return S(e,"DELETE",t)};function S(e){var t,a,n,r,s=arguments;return y.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:"get",a=s.length>2&&void 0!==s[2]?s[2]:null,n=s.length>3?s[3]:void 0,s.length>4?s[4]:void 0,o.prev=4,o.next=7,y.a.awrap(O({url:"".concat("/api/").concat(e),method:t,data:a,params:n}));case 7:return r=o.sent,o.abrupt("return",r.data);case 11:throw o.prev=11,o.t0=o.catch(4),console.log("Had Issues ".concat(t,"ing to the backend, endpoint: ").concat(e,", with data: ").concat(a)),console.dir(o.t0),o.t0.response&&401===o.t0.response.status&&h.push("/login"),o.t0;case 17:case"end":return o.stop()}}),null,null,[[4,11]])}var U={query:function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",C("order","",e));case 1:case"end":return t.stop()}}))},add:function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N("order",e));case 1:case"end":return t.stop()}}))}};var T={sortGames:function(e,t){return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if("mostPopular"!==t){a.next=4;break}return a.abrupt("return",G(e));case 4:if("recentGames"!==t){a.next=8;break}return a.abrupt("return",I(e));case 8:return a.abrupt("return",D(e));case 9:case"end":return a.stop()}}))},sortByDownloads:G,getGraphsDetails:B,getGameRating:A,dateByMillisecond:M,dateFromObjectId:function(e){return new Date(1e3*parseInt(e.substring(0,8),16))},formatDate:function(e){var t=e.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+t},getSum:function(e){var t,a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.a.awrap(B(e,"games"));case 2:return t=n.sent,a=e.map((function(e,a){return t[a]*e.price})),n.abrupt("return",{sum:a,downloadsByGame:t});case 5:case"end":return n.stop()}}))},sortByPrice:function(e,t){return e.sort((function(e,a){return t?a.price>e.price?-1:a.price<e.price?0:1:a.price<e.price?-1:a.price>e.price?0:1}))},formatGameRating:function(e){return e>50?"Really positive":e>10?"Positive":e>-10?"Mixed":e>-50?"Negetive":"Really negetive"}};function A(e){var t=e.reviews;return+t.reduce((function(e,t){return"like"===t.rating?e+1:e-1}),0)/t.length*100}function M(e){var t=new Date;return e&&t.setDate(t.getDate()-e),t.getTime()}function I(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.sort((function(e,t){return t.publishedAt-e.publishedAt})),a.abrupt("return",t);case 2:case"end":return a.stop()}}))}function D(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.forEach((function(e){return e.totalRating=A(e)})),t=e.sort((function(e,t){return t.totalRating-e.totalRating})),a.abrupt("return",t);case 3:case"end":return a.stop()}}))}function G(e){var t,a,n,r=arguments;return y.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=r.length>1&&void 0!==r[1]&&r[1],s.next=3,y.a.awrap(B(e));case 3:return a=s.sent,e.forEach((function(e){e.downloadsCount=a[e.title]})),n=e.sort((function(e,a){return t?e.downloadsCount<a.downloadsCount?-1:e.downloadsCount>a.downloadsCount?0:1:e.downloadsCount>a.downloadsCount?-1:e.downloadsCount<a.downloadsCount?0:1})),s.abrupt("return",n);case 7:case"end":return s.stop()}}))}function B(e,t){var a,n,r,s,o,c=arguments;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:31,n=[],r={},s=[],o=[],e.forEach((function(e){n.push(U.query({lastMonthId:M(a),gameIds:e._id})),s.push(e.title),o.push(0)})),i.next=8,y.a.awrap(Promise.all(n));case 8:if(i.sent.forEach((function(e,a){return e.forEach((function(e,n){var c=new Date(e.createdAt/1),i=c.getDate();i+="/".concat(c.getMonth()+1);var l=r[i];if(!l||0!==n)return"games"===t?o[a]+=1:l?(r[s[a]]=n,r[i]=l+1):r[i]=1}))})),"games"!==t){i.next=12;break}return i.abrupt("return",o);case 12:return i.abrupt("return",r);case 13:case"end":return i.stop()}}))}var R={add:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(N("game",e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=C("game","",e);return t},getById:function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",C("game/".concat(e)));case 1:case"end":return t.stop()}}))},update:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(j("game/".concat(e._id),e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},remove:function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(k("game/".concat(e)));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}};function _(e){return{type:"SET_GAMES",games:e}}function P(e){return{type:"SET_GAME",game:e}}function F(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(R.query(e));case 3:return a=n.sent,t(_(a)),n.abrupt("return",a);case 8:n.prev=8,n.t0=n.catch(0),console.log("Had issues getting games",n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}}var L={login:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(N("auth/login",e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},signUp:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(N("auth/signup",e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},logout:function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(N("auth/logout"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))},add:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(N("user",e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},remove:function(e){return k("user/".concat(e))},getById:function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",C("user/".concat(e)));case 1:case"end":return t.stop()}}))},update:function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(j("user/".concat(e._id),e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))}};function W(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(L.update(e));case 3:return a=n.sent,t(q(a)),n.abrupt("return");case 8:throw n.prev=8,n.t0=n.catch(0),console.log("Had issues in updating user",n.t0),n.t0;case 12:case"end":return n.stop()}}),null,null,[[0,8]])}}function H(e){return{type:"SET_USER",user:e}}function q(e){return{type:"UPDATE_USER",user:e}}var J=a(13);var X={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)}},$={query:function(){return X.loadFromStorage("cart")},addToCart:function(e){var t=X.loadFromStorage("cart");try{if(t.find((function(t){return e===t}))){var a="Already in the cart";throw"Already in the cart"}return t.push(e),X.saveToStorage("cart",t),"success"}catch(a){throw console.log("Already in the cart"),a}},removeFromCart:function(e){var t=X.loadFromStorage("cart").filter((function(t){return t!==e}));X.saveToStorage("cart",t)},clear:function(){return X.saveToStorage("cart",[]),[]}};function K(e){return function(t){try{return $.addToCart(e),void t(function(e){return{type:"ADD_TO_CART",item:e}}(e))}catch(a){throw console.log(a),a}}}function z(e){return{type:"SET_CART",cart:e}}var V=a(21),Y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a.setData=function(e){var t=[];if(a.props.game){for(var n=30;n>=0;n--){var r=new Date;r.setDate(r.getDate()-n);var s="".concat(r.getDate(),"/").concat(r.getMonth()+1),o=void 0;o=e[s]?e[s]:0,t.push({name:s,sum:a.props.game.price*o})}a.setState({data:t})}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.gameOrders!==this.props.gameOrders&&this.setData(this.props.gameOrders)}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement("div",{className:"flex column chart align-center"},r.a.createElement("strong",{className:"small-chart-title"},"Income distribution per day"),r.a.createElement(V.d,{width:200,height:150,data:e,margin:{top:5,right:5,left:5,bottom:5}},r.a.createElement(V.h,{dataKey:"name"}),r.a.createElement(V.g,null),r.a.createElement(V.c,{stroke:"#45667d",dataKey:"sum",fill:"#5c88a7"})))}}]),t}(n.Component),Q=(a(502),a(78)),Z=a.n(Q),ee=a(79),te=a.n(ee),ae=a(258),ne=a.n(ae),re=a(259),se=a.n(re),oe=a(104),ce=a.n(oe),ie=document.getElementById("modal-root"),le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).el=document.createElement("div"),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){ie.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){ie.removeChild(this.el)}},{key:"render",value:function(){return o.a.createPortal(this.props.children,this.el)}}]),t}(r.a.Component);a(503);function ue(e){return r.a.createElement("div",{className:"notification"},r.a.createElement("p",null,e.modalTxt))}var me=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={publisherName:"",gameOrders:null,toggleModal:!1,modalTxt:""},a.onOpenDetails=function(e){h.push("/game/".concat(e))},a.onOpenEdit=function(e){e.stopPropagation(),h.push("/edit/".concat(a.props.game._id))},a.onRemoveFromCart=function(e){e.stopPropagation(),a.props.onRemoveFromCart(a.props.game._id),a.props.removeGameFromCart(a.props.game._id)},a.onPlayClick=function(e){e.stopPropagation(),h.push("/play/".concat(a.props.game._id))},a.getDetailsForChart=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(T.getGraphsDetails([a.props.game]));case 2:e=t.sent,a.setState({gameOrders:e});case 4:case"end":return t.stop()}}))},a.toggleWishedGame=function(e){var t=a.props,n=t.user,r=t.game;e.stopPropagation();var s,o=n&&n.wishedGames||[];s=-1===o.findIndex((function(e){return e===r._id}))?Object(J.a)({},n,{wishedGames:[].concat(Object(v.a)(o),[r._id])}):Object(J.a)({},n,{wishedGames:o.filter((function(e){return e!==r._id}))}),a.props.onUpdateUser(s)},a.onAddToCart=function(e){e.stopPropagation();try{a.props.addGameToCart(a.props.game._id),a.setState({modalTxt:"Game has been added to the cart",toggleModal:!0},a.onToggleModal())}catch(t){a.setState({modalTxt:"Game is already in the cart",toggleModal:!0},a.onToggleModal())}},a.onToggleModal=function(){setTimeout((function(){a.setState((function(e){return{toggleModal:!e.toggleModal}}))}),2e3)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e,t,a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.props.game,n.next=3,y.a.awrap(L.getById(e.publisher));case 3:t=n.sent,a=t.userName,this.setState({publisherName:a}),this.props.isDashboard&&this.getDetailsForChart();case 7:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.props,a=t.game,n=t.user,s=t.isProfile,o=t.isDashboard,c=t.isModal,i=t.isWishList,l=this.state,u=l.gameOrders,m=l.toggleModal,p=l.modalTxt,d=T.formatGameRating(T.getGameRating(a));return r.a.createElement("li",{className:o?"game-card flex column dsh-game-card":c?"modal-card flex modal-game-container":"game-card",onClick:function(){return e.onOpenDetails(a._id)}},o?r.a.createElement(Y,{game:a,gameOrders:u}):r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{alt:"thumbnail",className:"game-thumbnail",src:a.thumbnail})),r.a.createElement("section",{className:"details-container flex column"},r.a.createElement("div",{className:"full"},r.a.createElement("div",{className:c?"flex align-center column":"flex align-center"},r.a.createElement("strong",{className:c||o?"short-title":"full game-title",title:a.title},a.title),s&&o&&r.a.createElement("p",{className:"price"},"$",a.price),!s&&!c&&r.a.createElement("img",{alt:"like",className:c?"flex align-self-end like-icon":"like-icon",onClick:this.toggleWishedGame,src:n&&n.wishedGames.find((function(e){return e===a._id}))?Z.a:te.a})),!c&&!o&&r.a.createElement("strong",{className:"publisher"},this.state.publisherName)),r.a.createElement("div",{className:"flex space-between align-end"},!s&&r.a.createElement("p",{className:"price"},"$",a.price),!s&&!c&&r.a.createElement("p",{className:"rating"},d," (",a.reviews.length,")"),c&&!i&&r.a.createElement("img",{alt:"remove",src:ne.a,className:"pointer like-icon",onClick:this.onRemoveFromCart}),s&&!o&&r.a.createElement("div",{className:"play-btn-container flex flex-end"},r.a.createElement("button",{title:"Play",className:"play-btn btn",onClick:this.onPlayClick},r.a.createElement("img",{alt:"",src:ce.a}))),s&&o&&r.a.createElement("button",{title:"Edit",className:"btn",onClick:this.onOpenEdit},r.a.createElement("img",{alt:"",src:se.a})),i&&r.a.createElement("img",{alt:"like",className:c?"flex align-self-end like-icon":"like-icon",onClick:this.toggleWishedGame,src:n&&n.wishedGames.find((function(e){return e===a._id}))?Z.a:te.a}),i&&r.a.createElement("button",{type:"primary",className:"buy-btn",onClick:this.onAddToCart},"Add to cart "),m&&r.a.createElement(le,null,r.a.createElement(ue,{modalTxt:p,toggleModal:this.onToggleModal})))))}}]),t}(n.Component),pe={removeGameFromCart:function(e){return function(t){$.removeFromCart(e),t(function(e){return{type:"REMOVE_FROM_CART",item:e}}(e))}},addGameToCart:K},de=Object(c.b)((function(e){return{cart:e.cartStore.cart}}),pe)(me);function ge(e){var t=e.games,a=e.user;return r.a.createElement("ul",{className:e.isHomepage?"hp-cards-container clean-list container":e.isModal?"clean-list modal-cards":"cards-container clean-list container"},null===t||void 0===t?void 0:t.map((function(t){return r.a.createElement(de,{isModal:e.isModal,game:t,user:a,key:t._id,isProfile:e.isProfile,isHomepage:e.isHomepage,isDashboard:e.isDashboard,onUpdateUser:e.onUpdateUser,onRemoveFromCart:e.onRemoveFromCart,isWishList:e.isWishList})})))}a(504);var he=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={mostPopular:[],recentGames:[],topRated:[]},a.onUpdateUser=function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:a.props.updateUser(e);case 1:case"end":return t.stop()}}))},a.setGames=function(e){var t,n,r,s=arguments;return y.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:4,n=Object(v.a)(a.props.games),o.next=4,y.a.awrap(T.sortGames(n,e));case 4:(r=o.sent).splice(t,n.length),a.setState(Object(f.a)({},e,r));case 7:case"end":return o.stop()}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),e.next=3,y.a.awrap(this.props.loadGames());case 3:this.setGames("mostPopular"),this.setGames("recentGames"),this.setGames("topRated");case 6:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.mostPopular,a=e.recentGames,n=e.topRated;return r.a.createElement("div",{className:"homepage-container content-container container full"},r.a.createElement("div",{className:"hero-text flex column totally-center"},r.a.createElement("h1",{className:"main-heading"},"Gamein"),r.a.createElement("p",null,"The ultimate destination for buying, discussing, and playing games"),r.a.createElement(E.a,{to:"/game",onClick:this.on,className:"hero-btn"},"To the shop")),r.a.createElement("div",null,r.a.createElement("p",{className:"heading"},"Most Popular"),r.a.createElement(ge,{isHomepage:!0,user:this.props.user,onUpdateUser:this.onUpdateUser,games:t})),r.a.createElement("div",null,r.a.createElement("p",{className:"heading"},"Recently Released"),r.a.createElement(ge,{isHomepage:!0,user:this.props.user,onUpdateUser:this.onUpdateUser,games:a})),r.a.createElement("div",null,r.a.createElement("p",{className:"heading"},"Top Rated"),r.a.createElement(ge,{isHomepage:!0,user:this.props.user,onUpdateUser:this.onUpdateUser,games:n})))}}]),t}(n.Component),fe={loadGames:F,updateUser:W},ve=Object(c.b)((function(e){return{games:e.gameStore.games,user:e.userStore.loggedInUser}}),fe)(he),be=(a(506),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loginCred:{userName:"",password:""},isIncorrectInput:!1},a.loginHandleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){return{loginCred:Object(J.a)({},e.loginCred,Object(f.a)({},n,r))}}))},a.doLogin=function(e){var t,n,r,s;return y.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),t=a.state.loginCred,n=t.userName,r=t.password,n&&r){o.next=4;break}return o.abrupt("return",console.log("all details are required"));case 4:return s={userName:n,password:r},o.prev=5,o.next=8,y.a.awrap(a.props.login(s));case 8:a.setState({loginCred:{userName:"",password:""}},(function(){return h.push("/")})),o.next=15;break;case 11:o.prev=11,o.t0=o.catch(5),a.setState({isIncorrectInput:!0}),console.log("Had issues while logging in ");case 15:case"end":return o.stop()}}),null,null,[[5,11]])},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this.props.loggedInUser,t=r.a.createElement("form",{className:"login-form flex column justify-center align-center",onSubmit:this.doLogin},r.a.createElement("input",{className:"login-input input",type:"text",name:"userName",value:this.state.loginCred.userName,onChange:this.loginHandleChange,placeholder:"User name"}),r.a.createElement("input",{className:"login-input input",type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),this.state.isIncorrectInput&&r.a.createElement("strong",{className:"wrong-input"},"Wrong username/password please try again."),r.a.createElement("button",{className:"login-btn btn"},"Login"),r.a.createElement("p",null,"Not with us yet ?"),r.a.createElement("button",{className:"login-btn btn",onClick:function(){return h.push("/sign-up")}},"Join"));return r.a.createElement("div",{className:"login-container content-container flex column justify-center align-center container"},r.a.createElement("img",{className:"login-logo",alt:"logo",src:"/logo.png",width:"100px"}),(!e||!e.userName)&&t)}}]),t}(n.Component)),ye={login:function(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(L.login(e));case 3:return a=n.sent,t(H(a)),n.abrupt("return");case 8:throw n.prev=8,n.t0=n.catch(0),console.log(n.t0),n.t0;case 12:case"end":return n.stop()}}),null,null,[[0,8]])}}},Ee=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),ye)(be);a(507);function we(e){var t,a,n,r,s,o,c;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:for(t=[],a=0;a<e.length;a++){"dfdvfunfj","zc8aff64",n=e[a].type.split("/"),r="https://api.cloudinary.com/v1_1/".concat("dfdvfunfj","/").concat(n[0],"/upload"),(s=new FormData).append("file",e[a]),s.append("upload_preset","zc8aff64");try{t.push(x.a.post(r,s))}catch(l){console.log("Had issues uploading to cloudinary",l)}}return i.next=4,y.a.awrap(Promise.all(t));case 4:return o=i.sent,c=o.map((function(e){return e.data.url})),i.abrupt("return",c);case 7:case"end":return i.stop()}}))}var xe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={signUpCred:{fullName:"",userName:"",password:"",about:"",imgUrl:""},isLoadingImg:!1},a.addMediaAndTags=function(e){var t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a.setState({isLoadingImg:!0}),n.next=3,y.a.awrap(we(e.target.files));case 3:return t=n.sent,n.abrupt("return",a.setState({imgUrl:t[0],isLoadingImg:!1}));case 5:case"end":return n.stop()}}))},a.signUpHandleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){return{signUpCred:Object(J.a)({},e.signUpCred,Object(f.a)({},n,r))}}))},a.doSignUp=function(e){var t,n,r,s,o,c;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.preventDefault(),t=a.state.signUpCred,n=t.fullName,r=t.userName,s=t.password,o=t.about,n&&r&&s&&o){i.next=4;break}return i.abrupt("return",console.log("all inputs are required fullName, userName, password, about",n,r,s,o));case 4:return c={fullName:n,userName:r,password:s,about:o,imgUrl:a.state.imgUrl},i.prev=5,i.next=8,y.a.awrap(a.props.signUp(c));case 8:a.setState({signUpCred:{fullName:"",password:"",userName:"",about:"",imgUrl:""}},(function(){return h.push("/")})),i.next=14;break;case 11:throw i.prev=11,i.t0=i.catch(5),i.t0;case 14:case"end":return i.stop()}}),null,null,[[5,11]])},a.removeImg=function(){return a.setState({imgUrl:""})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this.state,t=e.imgUrl,a=e.isLoadingImg,n=this.props.loggedInUser,s="";t&&(s=r.a.createElement("div",{className:"media-container"},r.a.createElement("img",{src:t,className:"signup-img",alt:""}),r.a.createElement("span",{className:"pointer",onClick:this.removeImg},"X")));var o=r.a.createElement("form",{className:"signup-form flex column align-center",onSubmit:this.doSignUp},r.a.createElement("input",{type:"text",className:"input",name:"fullName",value:this.state.signUpCred.fullName,onChange:this.signUpHandleChange,placeholder:"Full Name"}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"input",name:"userName",value:this.state.signUpCred.userName,onChange:this.signUpHandleChange,placeholder:"UserName"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",className:"input",name:"password",value:this.state.signUpCred.password,onChange:this.signUpHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"input",name:"about",value:this.state.signUpCred.about,onChange:this.signUpHandleChange,placeholder:"About"}),r.a.createElement("br",null),r.a.createElement("input",{type:"file",className:"hidden",name:"imgUrl",placeholder:"Profile Image",onChange:this.addMediaAndTags,id:"upload"}),r.a.createElement("label",{htmlFor:"upload",className:"input pointer upload-button flex"},r.a.createElement("img",{src:"https://pngimage.net/wp-content/uploads/2018/06/png-upload-4.png"}),"Upload Img"),s,r.a.createElement("br",null),s&&r.a.createElement("button",{className:"signup-btn"},"Join"));return r.a.createElement("div",{className:"content-container signup-container flex column align-center"},r.a.createElement("img",{className:"signup-logo",alt:"logo",src:"/logo.png",width:"100px"}),a&&r.a.createElement("div",{className:"loader"}),(!n||!n.userName)&&o)}}]),t}(n.Component),Oe={signUp:function(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(L.signUp(e));case 3:return a=n.sent,t(H(a)),n.abrupt("return");case 8:throw n.prev=8,n.t0=n.catch(0),console.log("Had issues in signing up",n.t0),n.t0;case 12:case"end":return n.stop()}}),null,null,[[0,8]])}}},Ce=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),Oe)(xe),Ne=a(261),je=a.n(Ne),ke=a(262),Se=a.n(ke),Ue=(a(508),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",tag:"",filterBy:"title",sortBy:"",isAscending:!1},a.inputChange=function(e){var t=e.target.name;return"filterBy"===t?a.setState({title:"",tag:"",filterBy:e.target.value},(function(){return a.onFilterBy()})):"sortBy"===t?a.setState({sortBy:e.target.value},a.onFilterBy):void a.setState(Object(f.a)({},a.state.filterBy,e.target.value),a.onFilterBy)},a.onFilterBy=function(){a.props.onFilterBy(a.state)},a.changeOrder=function(){a.setState((function(e){return Object(J.a)({},e,{isAscending:!e.isAscending})}),a.onFilterBy)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.filterBy;return r.a.createElement("div",{className:"search-container totally-center"},r.a.createElement("input",{className:"search-input input",value:this.state[this.state.filterBy],type:"search",placeholder:"Search by ".concat(e),onChange:this.inputChange}),r.a.createElement("input",{className:"hidden",name:"filterBy",onChange:this.inputChange,defaultChecked:!0,id:"title",value:"title",type:"radio"}),r.a.createElement("label",{className:"btn title-btn pointer",htmlFor:"title"},"Title"),r.a.createElement("input",{className:"hidden",onChange:this.inputChange,name:"filterBy",id:"tag",value:"tag",type:"radio"}),r.a.createElement("label",{className:"btn tag-btn pointer",htmlFor:"tag"},"Tag"),r.a.createElement("span",null,"Sort by: "),r.a.createElement("input",{className:"hidden",name:"sortBy",onClick:this.inputChange,id:"popularity",value:"popularity",type:"radio"}),r.a.createElement("label",{className:"btn popularity-btn pointer",htmlFor:"popularity"},"Popularity"),r.a.createElement("input",{className:"hidden",onClick:this.inputChange,name:"sortBy",id:"price",value:"price",type:"radio"}),r.a.createElement("label",{className:"btn price-btn pointer",htmlFor:"price"},"Price"),r.a.createElement("button",{className:"btn order-btn",onClick:this.changeOrder},r.a.createElement("img",{alt:"",src:this.state.isAscending?je.a:Se.a})))}}]),t}(n.Component)),Te=(a(509),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={games:null},a.componentDidMount=function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0),a.onFilterBy();case 2:case"end":return e.stop()}}))},a.onUpdateUser=function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:a.props.updateUser(e);case 1:case"end":return t.stop()}}))},a.onFilterBy=function(){var e,t=arguments;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(e=t.length>0&&void 0!==t[0]?t[0]:{}).gamesIds=a.state.gamesIds,n.next=4,y.a.awrap(a.props.loadGames(Object(J.a)({},e,{shoppingCartIds:a.state.gamesIds})));case 4:"popularity"===e.sortBy?a.sortByDownloads(e.isAscending):"price"===e.sortBy?a.sortByPrice(e.isAscending):a.setState({games:a.props.games});case 5:case"end":return n.stop()}}))},a.sortByDownloads=function(e){var t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(v.a)(a.props.games),n.next=3,y.a.awrap(T.sortByDownloads(t,e));case 3:t=n.sent,a.setState({games:t});case 5:case"end":return n.stop()}}))},a.sortByPrice=function(e){var t=Object(v.a)(a.props.games);t=T.sortByPrice(t,e),a.setState({games:t})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.games;return r.a.createElement("div",{className:"content-container flex column container align-center"},r.a.createElement(Ue,{sortByPrice:this.sortByPrice,sortByDownloads:this.sortByDownloads,onFilterBy:this.onFilterBy}),r.a.createElement(ge,{history:this.props.history,user:this.props.user,onUpdateUser:this.onUpdateUser,games:e}))}}]),t}(n.Component)),Ae={loadGames:F,updateUser:W},Me=Object(c.b)((function(e){return{games:e.gameStore.games,user:e.userStore.loggedInUser}}),Ae)(Te),Ie=a(597),De=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLongTxtShown:a.props.isLongTxtShown},a.getText=function(){return a.state.isLongTxtShown?a.props.text:a.props.text.substring(0,a.props.shortLength)},a.handleReadMore=function(){a.setState((function(e){return{isLongTxtShown:!e.isLongTxtShown}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getButtonTxt",value:function(){return this.state.isLongTxtShown?"":"..."}},{key:"render",value:function(){return r.a.createElement("span",{className:"read-more",onClick:this.handleReadMore},this.getText(),this.props.text.length>=this.props.shortLength&&r.a.createElement("span",{className:"read-more-button"},this.getButtonTxt()))}}]),t}(n.Component),Ge=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:[{name:"0",purcheses:0}]},a.setData=function(e){var t=[];if(a.props.games.length){for(var n=29;n>=0;n--){var r=new Date;r.setDate(r.getDate()-n);var s="".concat(r.getDate(),"/").concat(r.getMonth()+1),o=void 0;o=e[s]?e[s]:0,t.push({name:s,purchases:o})}a.setState({data:t})}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.orderDates!==this.props.orderDates&&this.setData(this.props.orderDates)}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement("div",{className:"flex column chart align-center"},r.a.createElement("strong",{className:"chart-title"},"Downloads distribution per day"),r.a.createElement(V.b,{width:350,height:300,data:e,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement(V.h,{dataKey:"name"}),r.a.createElement(V.i,null),r.a.createElement(V.g,null),r.a.createElement(V.a,{type:"monotone",dataKey:"purchases",stroke:"#517692",fill:"#6899bc"})))}}]),t}(n.PureComponent),Be=(a(510),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={data:[{fill:"#16578F",name:"publish Games",value:1}],gameTitles:null,colors:["#6899bc","#517692","#3a5568","#81b2d5","#2e4453","#1b2a49","#465881","#00909e","#c9d1d3"]},a.setData=function(e){var t=a.state.colors,n=[],r=[];a.props.games.forEach((function(s,o){e[o]&&(!a.props.user&&o>3||(r.push(s.title),n.push({fill:t[o],name:s.title,value:e[o]})))})),a.setState({data:n,gameTitles:r})},a.renderCustomizedLabel=function(e){var t=e.cx,a=e.cy,n=e.midAngle,s=e.innerRadius,o=e.outerRadius,c=e.percent,i=(e.index,Math.PI/183),l=s+.5*(o-s),u=t+l*Math.cos(-n*i),m=a+l*Math.sin(-n*i);return r.a.createElement("text",{x:u,y:m,fill:"white",textAnchor:u>t?"start":"end",dominantBaseline:"central"},"".concat((100*c).toFixed(0),"%"))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.sumOfGames!==this.props.sumOfGames&&this.setData(this.props.sumOfGames)}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.gameTitles,n=e.colors;return r.a.createElement("div",{className:"flex column chart align-center"},r.a.createElement("strong",{className:"chart-title"},"Income distribution per game"),r.a.createElement("div",{className:"flex column align-center"},r.a.createElement(V.f,{width:250,height:250},r.a.createElement(V.e,{dataKey:"value",isAnimationActive:!0,data:t,cx:100,cy:100,outerRadius:100,fill:"#8884d8",labelLine:!1,label:this.renderCustomizedLabel}),r.a.createElement(V.g,null)),r.a.createElement("div",{className:"legend flex wrap"},a&&a.map((function(e,t){return r.a.createElement("div",{className:"legend-item flex",key:e},r.a.createElement("div",{className:"menu-color",style:{background:n[t],width:"20px",height:"20px"}}),r.a.createElement("div",{className:"title"},e))})))))}}]),t}(n.PureComponent));a(511);function Re(e){return r.a.createElement("div",{className:"info-card flex column align-center"},r.a.createElement("p",null,e.children),r.a.createElement("p",{className:"data"},e.children.includes("Earned")&&"$",e.data))}a(512);var _e,Pe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orders:null,filterBy:{_id:""},sumOfGames:[],monthMoneySum:null,downloadsByMonth:null,downloadsByWeek:null},a.getGraphsDetails=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(T.getGraphsDetails(a.props.games));case 2:e=t.sent,a.setState({orders:e});case 4:case"end":return t.stop()}}))},a.getWeekInfo=function(){var e,t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.a.awrap(T.getGraphsDetails(a.props.games,"games",7));case 2:e=n.sent,t=e.reduce((function(e,t){return e+t}),0).toLocaleString(),a.setState({downloadsByWeek:t});case 5:case"end":return n.stop()}}))},a.getMonthInfo=function(){var e,t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.a.awrap(T.getSum(a.props.games));case 2:e=r.sent,t=e.sum.reduce((function(e,t){return e+t}),0).toLocaleString(),n=e.downloadsByGame.reduce((function(e,t){return e+t}),0).toLocaleString(),a.setState({sumOfGames:e.sum,monthMoneySum:t,downloadsByMonth:n});case 6:case"end":return r.stop()}}))},a.componentDidUpdate=function(e){e.games.length!==a.props.games.length&&(a.getGraphsDetails(),a.getWeekInfo(),a.getMonthInfo())},a.componentDidMount=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a.props.loggedInUser?(e=a.props.loggedInUser._id,a.setState({filterBy:{_id:e}},(function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.awrap(a.props.loadGames(a.state.filterBy));case 2:case"end":return e.stop()}}))}))):a.props.loadGames(),t.next=3,y.a.awrap(a.getGraphsDetails());case 3:a.getWeekInfo(),a.getMonthInfo();case 5:case"end":return t.stop()}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.state,a=t.orders,n=t.sumOfGames,s=t.monthMoneySum,o=t.downloadsByMonth,c=t.downloadsByWeek;return this.props.loggedInUser&&(e=r.a.createElement("div",{className:"games-container flex column totally-center"},r.a.createElement("h3",{className:"data-header"},"Per Game"),r.a.createElement(ge,{isDashboard:!0,isProfile:!0,games:this.props.games})),!this.props.games.length)?r.a.createElement("div",{className:"container dashboard-container flex column align-center"},r.a.createElement("h3",{className:"dashboard-header"},"Publish games to see more")):r.a.createElement("div",{className:"container dashboard-container flex column align-center"},this.props.loggedInUser?r.a.createElement("h3",{className:"data-header"},"For All Games"):r.a.createElement("h3",{className:"dashboard-header"},"This is a demo of the dashboard, login to see your data"),r.a.createElement("div",{className:"flex info-cards-container"},r.a.createElement(Re,{data:s},"Earned this month:"),r.a.createElement(Re,{data:o},"Downloads this month:"),r.a.createElement(Re,{data:c},"Downloads this week:")),r.a.createElement("div",{className:"charts-container flex wrap"},r.a.createElement(Ge,{games:this.props.games,orderDates:a}),r.a.createElement(Be,{user:this.props.loggedInUser,games:this.props.games,sumOfGames:n})),e)}}]),t}(n.Component),Fe={loadGames:F},Le=Object(c.b)((function(e){return{games:e.gameStore.games,loggedInUser:e.userStore.loggedInUser}}),Fe)(Pe),We=(a(513),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={games:[],gamesIds:[]},a.componentDidMount=function(){var e,t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=[],!a.props.user){n.next=6;break}return n.next=4,y.a.awrap(U.query({orderBy:a.props.user._id}));case 4:n.sent.forEach((function(t){t.gameIds.forEach((function(t){e.push(t)}))}));case 6:if(!e.length){n.next=11;break}return n.next=9,y.a.awrap(a.props.loadGames({shoppingCartIds:e}));case 9:t=n.sent,a.setState({games:t,gamesIds:e});case 11:case"end":return n.stop()}}))},a.onFilterBy=function(){var e,t=arguments;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=t.length>0&&void 0!==t[0]?t[0]:{},a.state.gamesIds.length){n.next=3;break}return n.abrupt("return");case 3:return e.gamesIds=a.state.gamesIds,n.next=6,y.a.awrap(a.props.loadGames(Object(J.a)({},e,{shoppingCartIds:a.state.gamesIds})));case 6:a.setState({games:a.props.games},(function(){"popularity"===e.sortBy?a.sortByDownloads():"price"===e.sortBy&&a.sortByPrice()}));case 7:case"end":return n.stop()}}))},a.sortByDownloads=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.state.gamesIds.length){t.next=2;break}return t.abrupt("return");case 2:return e=Object(v.a)(a.state.games),t.next=5,y.a.awrap(T.sortByDownloads(e,a.state.isAscending));case 5:e=t.sent,a.setState((function(t){return{games:e,isAscending:!t.isAscending}}));case 7:case"end":return t.stop()}}))},a.sortByPrice=function(){if(a.state.gamesIds.length){var e=Object(v.a)(a.state.games);e=T.sortByPrice(e,a.state.isAscending),a.setState((function(t){return{games:e,isAscending:!t.isAscending}}))}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.games;return r.a.createElement("div",{className:"flex column align-center container"},r.a.createElement(Ue,{sortByPrice:this.sortByPrice,sortByDownloads:this.sortByDownloads,onFilterBy:this.onFilterBy}),r.a.createElement("div",{className:"publish-button btn"},r.a.createElement(E.a,{to:"/edit"},"Publish a game")),r.a.createElement(ge,{isProfile:!0,history:this.props.history,games:e}))}}]),t}(n.Component)),He={loadGames:F},qe={Dashboard:Le,OwnedGames:Object(c.b)((function(e){return{games:e.gameStore.games,user:e.userStore.loggedInUser}}),He)(We)},Je=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getComponent",value:function(){return qe[this.props.mode]}},{key:"render",value:function(){var e=this.getComponent();return r.a.createElement(r.a.Fragment,null,r.a.createElement(e,{history:this.props.history}))}}]),t}(n.Component),Xe=(a(514),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={mode:"OwnedGames",user:{_id:"null",fullName:"Guest",userName:"Guest",about:"Guest",createdAt:123879186123,imgUrl:"http://keenthemes.com/preview/metronic/theme/assets/pages/media/profile/profile_user.jpg",desiredGames:[{game:"gta"}]}},a.updateMode=function(e){var t=e.target.value;a.setState({mode:t})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.props.loggedInUser&&this.props.loggedInUser.userName&&this.setState({user:this.props.loggedInUser})}},{key:"render",value:function(){var e=this.state.user;return"null"!==e._id?e.createdAt=T.formatDate(T.dateFromObjectId(e._id)):e.createdAt="Dec 2013",r.a.createElement("div",{className:"profile-container"},r.a.createElement("div",{className:"user-card flex align-center container"},r.a.createElement("img",{className:"user-img small",alt:"",src:e.imgUrl}),r.a.createElement("div",{className:"user-details"},r.a.createElement("strong",null,e.userName),r.a.createElement("small",null,e.createdAt),r.a.createElement("div",null,r.a.createElement(De,{shortLength:100,isLongTxtShown:!1,text:e.about}))),r.a.createElement(Ie.a,{title:"Edit details",type:"edit",key:"edit"})),r.a.createElement("div",{className:"tab-nav flex justify-center"},r.a.createElement("label",{className:"OwnedGames"===this.state.mode?"inner-tab active":"inner-tab",htmlFor:"OwnedGames"},r.a.createElement("p",null,"Games"),r.a.createElement("input",{name:"tab",type:"radio",onChange:this.updateMode,checked:"OwnedGames"===this.state.mode,value:"OwnedGames",id:"OwnedGames"})),r.a.createElement("label",{className:"Dashboard"===this.state.mode?"inner-tab active":"inner-tab",htmlFor:"Dashboard"},r.a.createElement("p",null,"Dashboard"),r.a.createElement("input",{name:"tab",type:"radio",onChange:this.updateMode,value:"Dashboard",id:"Dashboard"}))),r.a.createElement(Je,{className:"dynamic-prev",history:this.props.history,mode:this.state.mode}))}}]),t}(n.Component)),$e=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),{})(Xe),Ke=a(268),ze=a.n(Ke),Ve={setup:function(){_e=ze()("/")},terminate:function(){_e=null},on:function(e,t){_e.on(e,t)},off:function(e,t){_e.off(e,t)},emit:function(e,t){_e.emit(e,t)}};function Ye(e){return e.mediaUrls.map((function(t){return t.includes("mp4")?r.a.createElement("video",{key:t,onClick:e.onThumbNailPhotoClick,alt:"",className:"game-choose-thumbnail",src:"".concat(t,"#t=23")}):r.a.createElement("img",{key:t,onClick:e.onThumbNailPhotoClick,alt:"",className:"game-choose-thumbnail",src:t})}))}a(587);var Qe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orderCount:"",rating:"",publisherName:"",isOwned:!1},a.componentDidMount=function(){var e=a.props.game;a.setOrderCount(e),a.setGameRating(e),a.setPublisherName(e.publisher),a.purchaseCheck()},a.componentDidUpdate=function(e){var t=a.props.game;t.title!==e.game.title&&(a.setOrderCount(t),a.setGameRating(t),a.setPublisherName(t.publisher),a.purchaseCheck())},a.setOrderCount=function(e){var t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.a.awrap(T.getGraphsDetails([e]));case 2:t=n.sent,a.setState({orderCount:t[e.title]});case 4:case"end":return n.stop()}}))},a.onAddToCart=function(){a.props.onAddToCart(a.props.game._id)},a.setGameRating=function(e){var t=T.formatGameRating(T.getGameRating(e));a.setState({rating:t})},a.setPublisherName=function(e){var t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.a.awrap(L.getById(e));case 2:t=r.sent,n=t.userName,a.setState({publisherName:n});case 5:case"end":return r.stop()}}))},a.purchaseCheck=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=[],!a.props.user){t.next=5;break}return t.next=4,y.a.awrap(U.query({orderBy:a.props.user._id,gameId:a.props.game._id}));case 4:e=t.sent;case 5:if(!e.length){t.next=9;break}return t.abrupt("return",a.setState({isOwned:!0}));case 9:return t.abrupt("return",a.setState({isOwned:!1}));case 10:case"end":return t.stop()}}))},a.onPlayClikc=function(){h.push("/play/".concat(a.props.game._id))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.game,a=e.user,n=t.thumbnail,s=t.description,o=t.publishedAt,c=t.price,i=t._id,l=this.state,u=l.publisherName,m=l.rating,p=l.orderCount,d=l.isOwned?r.a.createElement("button",{onClick:this.onPlayClikc,className:"btn play-btn"},r.a.createElement("img",{alt:"play",title:"Play",src:ce.a})):r.a.createElement("button",{type:"primary",className:"buy-btn",onClick:this.onAddToCart}," ",c,"$ Add to cart "),g=new Date(o/1),h=T.formatDate(g);return r.a.createElement("div",{className:"desc desc-container flex column"},r.a.createElement("img",{alt:"",className:"game-thumbnail",src:n}),r.a.createElement("table",{className:"details"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"publisher"},u),r.a.createElement("td",{className:"published"},h)))),r.a.createElement("div",{className:"rating-downloads"},r.a.createElement("p",{className:"rating"},"Rating: ",m),r.a.createElement("p",{className:"downloads"},"Last month downloads: ",p)),r.a.createElement("p",{className:"description full"},s),r.a.createElement("div",{className:"flex space-between"},r.a.createElement("img",{alt:"like",className:"wish-btn",title:"Wish list",onClick:this.props.onToggleWishedGame,src:a&&a.wishedGames.find((function(e){return e===i}))?Z.a:te.a}),r.a.createElement("div",null,d)))}}]),t}(n.Component),Ze=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={text:""},a.inputChange=function(e){var t=e.target.name;a.setState(Object(f.a)({},t,e.target.value))},a.onAddComment=function(){var e=a.state.text;if(e){var t={userName:"Guest"};a.props.user&&(t=a.props.user),a.props.onAddCommentOrReview({text:e,user:t},!0),a.setState({text:""})}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.comments,t=this.state.text;if(!e)return"";var a=e.map((function(e){return e.user?r.a.createElement("p",{key:e.text+e.user.userName},e.user.userName," : ",e.text):r.a.createElement("p",{key:e.text},e.text)}));return r.a.createElement("div",null,r.a.createElement("div",{className:"social-content-container"},a),r.a.createElement("div",null,r.a.createElement("div",{className:"flex new-comment-container align-center"},r.a.createElement("textarea",{type:"text",name:"text",value:t,onChange:this.inputChange,placeholder:"write your text"}),r.a.createElement("button",{className:"add-button",onClick:this.onAddComment,type:"primary"},"Add A Comment"))))}}]),t}(n.Component),et=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={rating:"",text:""},a.inputChange=function(e){var t=e.target.name;a.setState(Object(f.a)({},t,e.target.value))},a.onAddReview=function(){var e=a.state,t=e.rating,n=e.text;t&&(a.props.onAddCommentOrReview({user:{userName:a.props.user.userName},rating:t,text:n},!0,"reviews"),a.setState({text:""}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.text;return r.a.createElement("div",null,r.a.createElement("div",{className:"new-comment-container flex align-center"},r.a.createElement("textarea",{type:"text",name:"text",value:e,onChange:this.inputChange,placeholder:"write your text"}),r.a.createElement("input",{className:"hidden",type:"radio",value:"like",onChange:this.inputChange,name:"rating",id:"like"}),r.a.createElement("label",{className:"like-img pointer",htmlFor:"like",name:"rating"},r.a.createElement("img",{alt:"like",src:"https://img.icons8.com/ultraviolet/40/000000/good-quality.png"})),r.a.createElement("input",{className:"hidden",type:"radio",onChange:this.inputChange,value:"dislike",name:"rating",id:"dislike"}),r.a.createElement("label",{htmlFor:"dislike",className:"dislike-img pointer",name:"rating"},r.a.createElement("img",{alt:"dislike",src:"https://img.icons8.com/ultraviolet/40/000000/poor-quality.png"})),r.a.createElement("button",{className:"add-button",onClick:this.onAddReview},"Add a Review")))}}]),t}(n.Component);var tt=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),{})((function(e){return e.loggedInUser&&e.loggedInUser.userName?r.a.createElement("div",null,e.children):null})),at=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.reviews,a=e.user;return r.a.createElement("div",{className:"reviews-container"},r.a.createElement("ul",{className:"social-content-container"},t.map((function(e){return r.a.createElement("div",{className:"review-container flex",key:e.text},r.a.createElement("div",{className:"flex column review-user-details"},r.a.createElement("p",null,e.user.userName),"like"===e.rating?r.a.createElement("img",{alt:"like",src:"https://img.icons8.com/ultraviolet/40/000000/good-quality.png"}):r.a.createElement("img",{alt:"dislike",src:"https://img.icons8.com/ultraviolet/40/000000/poor-quality.png"})),r.a.createElement("div",null,r.a.createElement("p",null,e.text)))}))),r.a.createElement(tt,null,r.a.createElement(et,{user:a,onAddCommentOrReview:this.props.onAddCommentOrReview,onAddReview:this.onAddReview,inputChange:this.inputChange})))}}]),t}(n.Component),nt=(a(588),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={currMediaUrl:"",toggleModal:!1,modalTxt:""},a.componentDidMount=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return window.scrollTo(0,0),e=a.props.match.params.id,t.next=4,y.a.awrap(a.props.loadGame(e));case 4:a.setState({currMediaUrl:a.props.game.mediaUrls[0]}),a.initiateSockets();case 6:case"end":return t.stop()}}))},a.initiateSockets=function(){Ve.setup(),Ve.emit("chat room",a.props.game.title),Ve.on("chat newComment",a.onAddCommentOrReview)},a.componentWillUnmount=function(){Ve.terminate()},a.onAddCommentOrReview=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"comments",r=Object(J.a)({},a.props.game);return r[n]=[].concat(Object(v.a)(r[n]),[e]),t?("comments"===n&&Ve.emit("chat newComment",e),a.props.updateGame(r)):a.props.updateComments(r)},a.onAddToCart=function(e){try{a.props.addGameToCart(e),a.setState({modalTxt:"Game has been added to the cart",toggleModal:!0},a.onToggleModal())}catch(t){a.setState({modalTxt:"Game is already in the cart",toggleModal:!0},a.onToggleModal())}},a.toggleWishedGame=function(e){var t=a.props,n=t.loggedInUser,r=t.game;e.stopPropagation();var s,o=n&&n.wishedGames||[];s=-1===o.findIndex((function(e){return e===r._id}))?Object(J.a)({},n,{wishedGames:[].concat(Object(v.a)(o),[r._id])}):Object(J.a)({},n,{wishedGames:o.filter((function(e){return e!==r._id}))}),a.props.updateUser(s)},a.onToggleModal=function(){setTimeout((function(){a.setState((function(e){return{toggleModal:!e.toggleModal}}))}),2e3)},a.onThumbNailPhotoClick=function(e){a.setState({currMediaUrl:e.target.src})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(!this.props.game)return r.a.createElement("h1",null,"Loading");var e,t=this.props,a=t.loggedInUser,n=t.game,s=n.title,o=n.reviews,c=n.mediaUrls,i=n.tags,l=n.comments,u=this.state,m=u.modalTxt,p=u.currMediaUrl,d=u.toggleModal;return e=p.includes(".mp4")?r.a.createElement("iframe",{title:"video",src:"".concat(p,"?#t=0&#autoplay=1&mute=1"),allowFullScreen:"allowfullscreen",volume:0,className:"game-main-thumbnail"}):r.a.createElement("img",{src:p,alt:"",className:"game-main-thumbnail"}),r.a.createElement("div",{className:"container content-container"},d&&r.a.createElement(le,null,r.a.createElement(ue,{modalTxt:m,toggleModal:this.onToggleModal})),r.a.createElement("h1",null,s),r.a.createElement("div",{className:"grid game-main-content-container "},e,r.a.createElement("div",{className:"flex game-choose-thumbnail-container"},r.a.createElement(Ye,{onThumbNailPhotoClick:this.onThumbNailPhotoClick,mediaUrls:c})),r.a.createElement(Qe,{user:a,onToggleWishedGame:this.toggleWishedGame,onAddToCart:this.onAddToCart,game:this.props.game})),r.a.createElement("h2",null,"Tags:"),i.map((function(e){return r.a.createElement("span",{className:"tag",key:e},e," ")})),r.a.createElement("h2",null,"Reviews :"),r.a.createElement(at,{user:a,onAddCommentOrReview:this.onAddCommentOrReview,reviews:o}),r.a.createElement("h2",null,"Comments :"),r.a.createElement(Ze,{user:a,onAddCommentOrReview:this.onAddCommentOrReview,comments:l}))}}]),t}(n.Component)),rt={addGameToCart:K,loadGame:function(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(R.getById(e));case 3:return a=n.sent,t(P(a)),n.abrupt("return",a);case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}},updateGame:function(e){return function(t){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.awrap(R.update(e));case 3:return a=n.sent,t(P(e)),n.abrupt("return",a);case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}}),null,null,[[0,8]])}},updateComments:function(e){return function(t){try{return t(P(e)),e}catch(a){}}},updateUser:W},st=Object(c.b)((function(e){return{cart:e.cartStore.cart,game:e.gameStore.game,loggedInUser:e.userStore.loggedInUser}}),rt)(nt),ot=(a(589),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={comments:null},a.componentWillUnmount=function(){Ve.terminate()},a.sendComment=function(e){Ve.emit("chat newComment",e)},a.addComment=function(e){if(!a.state.comments)return a.setState({comments:[e]});a.setState((function(t){return{comments:[].concat(Object(v.a)(t.comments),[e])}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=this.props.loggedInUser?this.props.loggedInUser.userName:"Guest";Ve.setup(),Ve.emit("chat room",this.props.match.params.id),Ve.emit("user joined",{text:"".concat(e," has joined the chat")}),Ve.on("chat newComment",this.addComment),Ve.on("user joined",this.addComment)}},{key:"render",value:function(){var e,t=this.state.comments,a=this.props.loggedInUser?"":"Buy the game to enjoy the game fully";return e=r.a.createElement(Ze,{user:this.props.loggedInUser,onAddCommentOrReview:this.sendComment,comments:t}),r.a.createElement("div",{className:" container play-container"},r.a.createElement("h3",null,a),r.a.createElement("div",{className:"game-content-container flex"},r.a.createElement("iframe",{title:"play",src:"https://www.gameflare.com/embed/cartoon-strike/",frameBorder:"0",scrolling:"no",width:"1000",height:"635",allowFullScreen:!0}),r.a.createElement("div",{className:"comments-container"},e)))}}]),t}(n.Component)),ct=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),{})(ot),it=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loadCart()}},{key:"render",value:function(){return r.a.createElement("p",{style:{alignSelf:"center",color:"white"}},this.props.cart.length)}}]),t}(n.Component),lt={loadCart:function(){return function(e){e(z($.query()))}}},ut=Object(c.b)((function(e){return{cart:e.cartStore.cart}}),lt)(it),mt=(a(590),a(269)),pt=a.n(mt),dt=a(270),gt=a.n(dt),ht=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).doLogOut=function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.awrap(a.props.logout());case 3:h.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Had issues while logging out ",e.t0);case 9:case"end":return e.stop()}}),null,null,[[0,6]])},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.loggedInUser,a=t?t.userName:"guest";return r.a.createElement("nav",{className:"nav-bar flex align-center"},r.a.createElement("div",{className:"nav-logo full"},r.a.createElement(E.a,{to:"/"},r.a.createElement("img",{alt:"logo",src:"/navbar-logo.png"}))),r.a.createElement("input",{type:"checkbox",className:"hidden",id:"menu"}),r.a.createElement("div",{className:"flex nav-link-container"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"nav-link flex align-center",onClick:function(){return e.props.toggleModal("wishlist")}},r.a.createElement("img",{alt:"",src:pt.a})),r.a.createElement("div",{className:"nav-link flex align-center",onClick:function(){return e.props.toggleModal("shoppingCart")}},r.a.createElement(ut,null),r.a.createElement("img",{alt:"",src:gt.a}))),r.a.createElement("label",{className:"nav-bar-hamburger pointer",htmlFor:"menu"},"\u2630"),r.a.createElement("div",{className:"nav-bar-menu"},r.a.createElement(E.b,{to:"/",exact:!0,className:"nav-link flex align-center",activeClassName:"active"},"Homepage"),r.a.createElement(E.b,{to:"/game",exact:!0,className:"nav-link flex align-center",activeClassName:"active"},"Explore"),r.a.createElement(E.b,{to:"/user/".concat(a||"guest"),exact:!0,className:"nav-link flex align-center",activeClassName:"active"},"Profile"),t&&t.userName?r.a.createElement(E.b,{onClick:this.doLogOut,to:"/",exact:!0,className:"nav-link flex align-center",activeClassName:""},"Logout"):r.a.createElement(E.b,{to:"/login",exact:!0,className:"nav-link flex align-center",activeClassName:"active"},"Login"))))}}]),t}(n.Component),ft={logout:function(){return function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.awrap(L.logout());case 3:return e(H(null)),t.abrupt("return");case 7:throw t.prev=7,t.t0=t.catch(0),console.log("Had issues in logging out",t.t0),t.t0;case 11:case"end":return t.stop()}}),null,null,[[0,7]])}}},vt=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),ft)(ht);function bt(e){return r.a.createElement("div",null,r.a.createElement("p",null,"Confirm Delete"),r.a.createElement("button",{onClick:e.modalAction},"Confirm"),r.a.createElement("button",{onClick:function(){return e.toggleModal(e.modalType)}},"Cancel"))}function yt(e){return e.mediaUrls.map((function(t,a){return t.includes(".mp4")?r.a.createElement("div",{className:"media-container flex",key:t},r.a.createElement("iframe",{src:t,allowFullScreen:"allowfullscreen",title:"video",alt:t}),r.a.createElement("span",{className:"pointer absolute",onClick:function(){return e.removeMediaAndTags("mediaUrls",a)}},"X")):r.a.createElement("div",{className:"media-container  flex",key:t},r.a.createElement("img",{src:t,alt:t}),r.a.createElement("span",{className:"pointer absolute",onClick:function(){return e.removeMediaAndTags("mediaUrls",a)}},"X"))}))}function Et(e){var t=e.thumbnail;return r.a.createElement("div",{className:"flex media-container"},r.a.createElement("img",{src:t,alt:""}),r.a.createElement("span",{className:"pointer absolute",onClick:function(){return e.removeMediaAndTags("thumbnail")}},"X"))}function wt(e){return e.tags.map((function(t,a){return r.a.createElement("div",{className:"tag-container",key:t},r.a.createElement("span",{className:"pointer",onClick:function(){return e.removeMediaAndTags("tags",a)}},"X"),r.a.createElement("p",null,t))}))}var xt=a(271),Ot=a.n(xt);function Ct(e){var t,a,n,s=e.onRemoveGame,o=e.inputChange,c=e.addMediaAndTags,i=e.onSubmit,l=e.removeMediaAndTags,u=e.form,m=u.price,p=u.publishedAt,d=u.title,g=u.mediaUrls,h=u.tags,f=u.thumbnail,v=u.description,b=u.loading;return g&&g.length&&(a=r.a.createElement(yt,{removeMediaAndTags:l,mediaUrls:g})),h&&h.length&&(t=r.a.createElement(wt,{removeMediaAndTags:l,tags:h})),f&&(n=r.a.createElement(Et,{thumbnail:f,removeMediaAndTags:l})),r.a.createElement("div",{className:"edit-container content-container"},b&&r.a.createElement("div",{className:"loader"}),r.a.createElement("p",null," Title : "),r.a.createElement("input",{type:"text",onChange:o,value:d,placeholder:"title",name:"title"}),r.a.createElement("p",null,"Publish Date"),r.a.createElement("input",{type:"date",onChange:o,value:p,name:"publishedAt"}),r.a.createElement("p",null," Descripiton: "),r.a.createElement("textarea",{type:"text",onChange:o,placeholder:"description",name:"description",value:v}),r.a.createElement("p",null," Thumbnail Img: "),r.a.createElement("input",{type:"file",onChange:c,placeholder:"thumbnail",name:"thumbnail"}),n,r.a.createElement("p",null," Media: "),r.a.createElement("div",null,r.a.createElement("input",{type:"file",onChange:c,placeholder:"Put your image Urls here",name:"mediaUrls",multiple:!0}),r.a.createElement("div",{className:"flex wrap"},a)),r.a.createElement("p",null,"Price: "),r.a.createElement("input",{type:"number",onChange:o,placeholder:"price",name:"price",value:m}),r.a.createElement("p",null,"Tags:"),r.a.createElement("input",{type:"tags",onChange:o,placeholder:"tags",name:"currTag"}),r.a.createElement("button",{name:"tags",onClick:c},"Add Tag"),r.a.createElement("div",{className:"flex"},t),r.a.createElement("button",{title:"Delete",className:"btn",onClick:s},r.a.createElement("img",{alt:"",src:Ot.a})),r.a.createElement("button",{onClick:i},"Submit"))}a(591);var Nt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",description:"",thumbnail:"",mediaUrls:[],price:"",publishedAt:"",tags:null,currTag:"",loading:!1,modalType:"",toggleModal:!1},a.componentDidMount=function(){var e,t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e=a.props.match.params.id)){r.next=7;break}return r.next=4,y.a.awrap(R.getById(e));case 4:t=r.sent,n=a.getDateInput(t.publishedAt),a.setState(Object(J.a)({},t,{publishedAt:n}));case 7:case"end":return r.stop()}}))},a.onRemoveGame=function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({toggleModal:!0}),a.onToggleModal("confirmDelete");case 2:case"end":return e.stop()}}))},a.removeGame=function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState((function(e){return{toggleModal:!e.toggleModal,modalType:""}})),e.prev=1,e.next=4,y.a.awrap(R.remove(a.state._id));case 4:h.push("/user/".concat(a.props.loggedInUser.userName)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("cant remove game");case 10:case"end":return e.stop()}}),null,null,[[1,7]])},a.onToggleModal=function(e){a.state.toggleModal?e===a.state.modalType?a.setState((function(e){return{toggleModal:!e.toggleModal,modalType:""}})):a.setState({modalType:e}):a.setState({modalType:e,toggleModal:!0})},a.getDateInput=function(e){var t=new Date(e/1),a=("0"+t.getDate()).slice(-2),n=("0"+(t.getMonth()+1)).slice(-2);return t.getFullYear()+"-"+n+"-"+a},a.onSubmit=function(){var e,t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if((e=Object(J.a)({},a.state)).publishedAt=new Date(e.publishedAt).getTime(),e.mediaUrls){r.next=4;break}return r.abrupt("return");case 4:if(e.thumbnail){r.next=6;break}return r.abrupt("return");case 6:if(!a.props.match.params.id){r.next=13;break}return delete e.currTag,delete e.loading,r.next=11,y.a.awrap(R.update(e));case 11:return t=r.sent,r.abrupt("return",a.props.history.push("/game/".concat(t._id)));case 13:if(a.props.loggedInUser){r.next=15;break}return r.abrupt("return");case 15:return e.publisher=a.props.loggedInUser._id,e.comments=[],e.reviews=[],delete e.currTag,delete e.loading,r.next=22,y.a.awrap(R.add(e));case 22:return n=r.sent,r.abrupt("return",a.props.history.push("/game/".concat(n._id)));case 24:case"end":return r.stop()}}))},a.addMediaAndTags=function(e){var t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if("tags"===(t=e.target.name)){r.next=9;break}return a.setState({loading:!0}),r.next=5,y.a.awrap(we(e.target.files));case 5:if(n=r.sent,"thumbnail"!==t){r.next=8;break}return r.abrupt("return",a.setState({thumbnail:n[0],loading:!1}));case 8:return r.abrupt("return",a.setState((function(e){return{mediaUrls:[].concat(Object(v.a)(e.mediaUrls),Object(v.a)(n)),loading:!1}})));case 9:if(a.state.currTag){r.next=11;break}return r.abrupt("return");case 11:a.setState((function(e){return{tags:[].concat(Object(v.a)(e.tags),[a.state.currTag])}}));case 12:case"end":return r.stop()}}))},a.removeMediaAndTags=function(e,t){if("thumbnail"===e)return a.setState({thumbnail:""});var n=Object(v.a)(a.state[e]);n.splice(t,1),a.setState(Object(f.a)({},e,n))},a.inputChange=function(e){var t=e.target.name;a.setState(Object(f.a)({},t,e.target.value))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ct,{onRemoveGame:this.onRemoveGame,removeMediaAndTags:this.removeMediaAndTags,inputChange:this.inputChange,onSubmit:this.onSubmit,addMediaAndTags:this.addMediaAndTags,form:this.state}),"confirmDelete"===this.state.modalType&&r.a.createElement(le,null,r.a.createElement(bt,{modalType:this.modalType,modalAction:this.removeGame,toggleModal:this.onToggleModal})))}}]),t}(n.Component),jt=Object(c.b)((function(e){return{loggedInUser:e.userStore.loggedInUser}}),{})(Nt),kt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={games:null,gamesIds:null,sum:null},a.onUpdateUser=function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:a.props.updateUser(e);case 1:case"end":return t.stop()}}))},a.onRemoveFromCart=function(e){$.removeFromCart(e),a.loadGames()},a.onBuyClick=function(){var e;return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.props.user){t.next=3;break}return h.push("/login"),t.abrupt("return");case 3:return e={createdAt:T.dateByMillisecond(),orderBy:a.props.user._id,gameIds:a.state.gamesIds},t.next=6,y.a.awrap(U.add(e));case 6:a.props.clearCart(),a.props.toggleModal("shoppingCart"),h.push("/user/".concat(a.props.user.userName));case 9:case"end":return t.stop()}}))},a.getSum=function(){var e=a.state.games.reduce((function(e,t){return e+t.price}),0);a.setState({sum:e})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadGames()}},{key:"loadGames",value:function(){var e,t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=$.query(),t=[],!e.length){a.next=6;break}return a.next=5,y.a.awrap(R.query({shoppingCartIds:e}));case 5:t=a.sent;case 6:this.setState({gamesIds:e,games:t}),this.state.games&&this.getSum();case 8:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement("div",{className:"modal totally-center"},this.state.games&&this.state.games.length?r.a.createElement("div",{className:"modal-content"},r.a.createElement(ge,{isModal:!0,user:this.props.user,onUpdateUser:this.onUpdateUser,onRemoveFromCart:this.onRemoveFromCart,isCart:!0,games:this.state.games,history:this.props.history}),r.a.createElement("div",{className:"flex justify-center align-center space-between "},r.a.createElement("div",{className:"money-sum"}," Total: $",this.state.sum),r.a.createElement("button",{className:"pointer cla-btn",onClick:this.onBuyClick},"Purchase"))):r.a.createElement("h3",{className:"flex column totally-center"},"Your shopping cart is empty"))}}]),t}(n.Component),St={clearCart:function(){return function(e){e(z($.clear()))}},updateUser:W},Ut=Object(c.b)((function(e){return{user:e.userStore.loggedInUser}}),St)(kt),Tt=(a(592),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onUpdateUser=function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:a.props.updateUser(e);case 1:case"end":return t.stop()}}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){F()}},{key:"render",value:function(){if(this.props.user){var e=this.props,t=e.games,a=e.user,n=t.filter((function(e){return a.wishedGames.includes(e._id)}));return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement(ge,{isModal:!0,isWishList:!0,history:this.props.history,user:a,onUpdateUser:this.onUpdateUser,games:n})))}return r.a.createElement("div",{className:"modal"},r.a.createElement("h3",{className:"modal-content empty-wishlist flex align-center"},"Please Login to see your wishlist"))}}]),t}(n.Component)),At={loadGames:F,updateUser:W},Mt=Object(c.b)((function(e){return{games:e.gameStore.games,user:e.userStore.loggedInUser}}),At)(Tt);a(593);function It(e){return r.a.createElement("div",{className:"footer-container totally-center flex column"},r.a.createElement("img",{className:"logo-footer",width:"10",alt:"logo",src:"/logo.png"}),r.a.createElement("small",{className:"rights"},"\xa9 2020, ",r.a.createElement("span",{className:"name"},"GameIn")," Inc. All rights reserved"),r.a.createElement("div",null,r.a.createElement(E.a,{to:"/about"},"About us")))}a(594);var Dt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={modalType:"",toggleModal:!1},a.toggleModal=function(e){a.state.toggleModal?e===a.state.modalType?a.setState((function(e){return{toggleModal:!e.toggleModal,modalType:""}})):a.setState({modalType:e}):a.setState({modalType:e,toggleModal:!0})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{history:h,className:"App Site"},r.a.createElement(vt,{toggleModal:this.toggleModal}),r.a.createElement(d.c,{className:"Site-content"},r.a.createElement(d.a,{path:"/",component:ve,exact:!0}),r.a.createElement(d.a,{path:"/login",component:Ee,exact:!0}),r.a.createElement(d.a,{path:"/sign-up",component:Ce,exact:!0}),r.a.createElement(d.a,{path:"/edit/:id?",component:jt,exact:!0}),r.a.createElement(d.a,{path:"/game/:id",component:st,exact:!0}),r.a.createElement(d.a,{path:"/game",component:Me,exact:!0}),r.a.createElement(d.a,{path:"/user/:id",render:function(){return r.a.createElement($e,{history:h})},exact:!0}),r.a.createElement(d.a,{path:"/play/:id",component:ct,exact:!0})),r.a.createElement(It,null)),this.state.toggleModal&&r.a.createElement(le,null,"wishlist"===this.state.modalType?r.a.createElement(Mt,null):r.a.createElement(Ut,{toggleModal:this.toggleModal})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Gt=a(45),Bt=a(272),Rt={game:null,games:[],filterBy:{publisher:""}};var _t=null;sessionStorage.user&&(_t=JSON.parse(sessionStorage.user));var Pt={loggedInUser:_t};var Ft={cart:[]};var Lt=Object(Gt.c)({gameStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GAMES":return Object(J.a)({},e,{games:t.games});case"SET_FILTER":return Object(J.a)({},e,{filterBy:Object(J.a)({},t.filterBy)});case"SET_GAME":return Object(J.a)({},e,{game:t.game});default:return e}},userStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":case"UPDATE_USER":return Object(J.a)({},e,{loggedInUser:t.user});default:return e}},cartStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CART":return Object(J.a)({},e,{cart:t.cart});case"ADD_TO_CART":return Object(J.a)({},e,{cart:[].concat(Object(v.a)(e.cart),[t.item])});case"REMOVE_FROM_CART":return Object(J.a)({},e,{cart:Object(v.a)(e.cart.filter((function(e){return e!==t.item})))});case"CLEAR_CART":return Object(J.a)({},e,{cart:[]});default:return e}}}),Wt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Gt.d,Ht=Object(Gt.e)(Lt,Wt(Object(Gt.a)(Bt.a)));o.a.render(r.a.createElement(c.a,{store:Ht},r.a.createElement(Dt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},78:function(e,t,a){e.exports=a.p+"static/media/full_heart.1aab119d.svg"},79:function(e,t,a){e.exports=a.p+"static/media/empty_heart.1ff089d1.svg"}},[[296,1,2]]]);
//# sourceMappingURL=main.c1b7bb5a.chunk.js.map