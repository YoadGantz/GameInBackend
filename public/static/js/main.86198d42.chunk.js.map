{"version":3,"sources":["assets/icons/full_heart.svg","assets/icons/empty_heart.svg","assets/icons/remove_from_cart.png","assets/icons/wishlist.svg","assets/icons/shopping_cart.svg","history.js","services/HttpService.js","services/OrderService.js","services/UtilService.js","services/GameService.js","actions/gameActions.js","services/UserService.js","actions/userActions.js","services/StorageService.js","services/CartService.js","actions/cartActions.js","cmps/game-preview/GamePreview.js","cmps/game-list/GameList.js","pages/homepage/HomePage.js","pages/login/Login.js","services/MediaUploadService.js","pages/sign-up/SignUp.js","cmps/filter/Filter.js","pages/explore-page/Explore.js","cmps/helpers/LongTxt.js","cmps/modal/Modal.js","cmps/charts/AreaChart.js","cmps/charts/PieChart.js","cmps/infocard/InfoCard.js","cmps/helpers/ConfirmDelete.js","services/SocketService.js","cmps/dashboard/Dashboard.js","cmps/owned-games/OwnedGames.js","cmps/dynamic-cmps/DynamicTabMap.js","cmps/dynamic-cmps/DynamicTabPrev.js","pages/profile-page/ProfilePage.js","cmps/helpers/Notification.js","cmps/game-media/GameMedia.js","cmps/game-desc/GameDesc.js","cmps/comments/Comment.js","cmps/review/new-review/NewReview.js","cmps/is-user-logged-in/IsUserLoggedIn.js","cmps/review/Review.js","pages/game-details/game-details-page/GameDetailsPage.js","pages/game-details/GameDetails.js","pages/play-game/PlayGame.js","cmps/game-counter/GameCounter.js","cmps/nav-bar/NavBar.js","cmps/edit-game/media-url-list/MediaUrlList.js","cmps/edit-game/thumbnail/Thumbnail.js","cmps/edit-game/tag-list/TagList.js","cmps/edit-game/inputForm/InputForm.js","cmps/edit-game/EditGame.js","cmps/shopping-cart/ShoppingCart.js","cmps/wish-list/WishList.js","cmps/footer/Footer.js","App.js","serviceWorker.js","reducers/gameReducer.js","reducers/userReducer.js","reducers/cartReducer.js","reducers/index.js","store.js","index.js"],"names":["module","exports","history","createBrowserHistory","axios","Axios","create","withCredentials","endpoint","data","params","ajax","a","async","method","url","res","console","log","dir","response","status","push","query","filterBy","HttpService","add","order","sortGames","games","sortBy","sortByDownloads","_sortByRecency","_sortByRating","getGraphsDetails","getGameRating","objectIdByTime","dateFromObjectId","formatDate","date","year","getFullYear","getMonth","getSum","downloadsByGame","sum","map","currGame","idx","price","sortByPrice","isAscending","sort","game1","game2","formatGameRating","rating","game","reviews","reduce","acc","review","length","time","Date","setDate","getDate","Math","floor","getTime","toString","sortedGames","publishedAt","forEach","totalRating","downloadNumbers","downloadsCount","title","objectId","parseInt","substring","type","prms","ordersBy","gameByNameOrder","ordersByGame","OrderService","lastMonthId","gameIds","_id","Promise","all","orders","i","currOrderDate","createdAt","num","addedGame","getById","gameId","update","updatedGame","remove","setGames","setGame","loadGames","dispatch","GameService","login","loginCred","loggedInUser","signUp","signUpCred","logout","loggedOutUser","user","addedUser","userId","updatedUser","updateUser","UserService","_updateUser","setUser","loadFromStorage","key","val","localStorage","getItem","JSON","parse","saveToStorage","stringify","StorageService","addToCart","item","cartItems","find","currItem","err","removeFromCart","updatedCart","filter","clear","_setCart","cart","GamePreview","state","publisherName","onOpenDetails","props","onOpenEdit","ev","stopPropagation","onRemoveFromCart","removeGameFromCart","onPlayClick","toggleWishedGame","wishedGames","findIndex","id","wishedGame","onUpdateUser","this","publisher","userName","setState","isProfile","isDashboard","isCart","UtilService","className","onClick","alt","src","thumbnail","full_heart","empty_heart","remove_from_cart","onRemoveGame","Component","mapDispatchToProps","CartService","_removeFromCart","connect","cartStore","GameList","HomePage","mostDownloadGames","mostRecentGames","highestRatingGames","splice","to","on","gameStore","userStore","Login","password","loginHandleChange","target","name","value","prevState","doLogin","preventDefault","userCreds","loginSection","onSubmit","onChange","placeholder","width","cred","uploadImg","files","split","UPLOAD_URL","formData","FormData","append","post","filesData","urls","file","SignUp","fullName","about","imgUrl","addMediaAndTags","MediaUploadService","signUpHandleChange","doSignUp","signUpCreds","removeImg","imgPreview","signUpSection","Filter","tag","inputChange","fieldName","onFilterBy","Explore","componentDidMount","LongTxt","isLongTxtShown","getText","text","shortLength","handleReadMore","prevstate","getButtonTxt","Modal","el","document","createElement","getElementById","appendChild","removeChild","ReactDOM","createPortal","children","React","Graph","purcheses","setData","purchases","prevprops","orderDates","height","margin","top","right","left","bottom","dataKey","stroke","fill","PureComponent","PieCharts","gameTitles","colors","renderCustomizedLabel","cx","cy","midAngle","innerRadius","outerRadius","percent","RADIAN","index","PI","radius","x","cos","y","sin","textAnchor","dominantBaseline","toFixed","sumOfGames","isAnimationActive","labelLine","label","style","background","InfoCard","includes","ConfirmDelete","modalAction","toggleModal","modalType","socket","Dashboard","currGameId","monthMoneySum","downloadsByMonth","downloadsByWeek","onToggleModal","getWeekInfo","downloadsSum","gameSum","toLocaleString","getMonthInfo","componentDidUpdate","prevProps","removeGame","gameList","OwnedGames","gamesIds","orderBy","shoppingCartIds","DynamicTabPrev","DynamicTabMap","mode","Cmp","getComponent","Fragment","ProfilePage","updateMode","htmlFor","checked","setup","io","terminate","eventName","cb","off","emit","Notification","modalTxt","GameMedia","mediaUrls","onThumbNailPhotoClick","GameDesc","orderCount","isOwned","setOrderCount","setGameRating","setPublisherName","purchaseCheck","onAddToCart","publisherId","isPurchesed","description","priceOrPlay","publishedDate","onToggleWishedGame","Comment","onAddComment","onAddCommentOrReview","comments","commentMap","comment","NewReview","onAddReview","Review","GameDetailsPage","mainMedia","currMediaUrl","tags","allowFullScreen","volume","GameDetails","window","scrollTo","match","loadGame","initiateSockets","SocketService","componentWillUnmount","newText","isSent","newGame","updateGame","updateComments","addGameToCart","setTimeout","_addToCart","PlayGame","sendComment","newComment","addComment","addedComments","logInMsg","frameBorder","scrolling","GameCounter","loadCart","alignSelf","color","NavBar","doLogOut","exact","activeClassName","wishlistImg","shoppingCartImg","MediaUrlsList","removeMediaAndTags","TagList","InputForm","addedTags","addedUrls","addedThumbnail","form","multiple","EditGame","currTag","getDateInput","publishDate","day","slice","month","editedData","ShoppingCart","onBuyClick","clearCart","gamesToRender","WishList","Footer","App","path","render","component","Boolean","location","hostname","INITIAL_STATE","localLoggedInUser","sessionStorage","rootReducer","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","Store","createStore","applyMiddleware","thunk","store","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.86198d42.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/full_heart.1aab119d.svg\";","module.exports = __webpack_public_path__ + \"static/media/empty_heart.1ff089d1.svg\";","module.exports = __webpack_public_path__ + \"static/media/remove_from_cart.f23f172d.png\";","module.exports = __webpack_public_path__ + \"static/media/wishlist.58d71a39.svg\";","module.exports = __webpack_public_path__ + \"static/media/shopping_cart.0ff5ef33.svg\";","import { createBrowserHistory } from 'history';\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;","import { createBrowserHistory } from 'history';\r\nimport Axios from 'axios';\r\n\r\nconst history = createBrowserHistory();\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nlet axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data, params){\r\n        return ajax(endpoint, 'GET', data, params)\r\n    },\r\n    post(endpoint, data){\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data){\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data){\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method='get', data=null ,params, dispatch) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data,\r\n            params\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        if (err.response && err.response.status === 401) {\r\n          history.push('/'); // diaspatch ('authorition error')\r\n        }\r\n          // diaspatch ('error')\r\n          throw err; \r\n    }\r\n}","\r\nimport HttpService from './HttpService';\r\n\r\nexport default {\r\n    query,\r\n    add\r\n}\r\n\r\n\r\nasync function query(filterBy) {\r\n    return HttpService.get('order', '', filterBy);\r\n}\r\n\r\nasync function add(order) {\r\n    return HttpService.post('order', order);\r\n}\r\n\r\n\r\n","import OrderService from './OrderService';\r\nexport default {\r\n    sortGames,\r\n    sortByDownloads,\r\n    getGraphsDetails,\r\n    getGameRating,\r\n    objectIdByTime,\r\n    dateFromObjectId,\r\n    formatDate,\r\n    getSum,\r\n    sortByPrice,\r\n    formatGameRating\r\n}\r\n\r\nfunction getGameRating(game) {\r\n    const { reviews } = game\r\n    let sumOfRating = reviews.reduce((acc, review) => {\r\n        if (review.rating === 'like') {\r\n            return acc += 1\r\n        } else {\r\n            return acc -= 1\r\n        }\r\n    }, 0)\r\n    const rating = +(sumOfRating / reviews.length) * 100\r\n    return rating\r\n}\r\n\r\nfunction objectIdByTime(time) {\r\n    let date = new Date()\r\n    if (time) {\r\n        date.setDate(date.getDate() - time);\r\n    }\r\n    return Math.floor(date.getTime() / 1000).toString(16) + \"0000000000000000\"\r\n}\r\n\r\nasync function getSum(games) {\r\n    const downloadsByGame = await getGraphsDetails(games, 'games')\r\n    const sum = games.map((currGame, idx) => {\r\n        return downloadsByGame[idx] * currGame.price\r\n    })\r\n    return { sum, downloadsByGame }\r\n}\r\n\r\nasync function sortGames(games, sortBy) {\r\n    if (sortBy === 'mostDownloadGames') {\r\n        return sortByDownloads(games)\r\n    } else if (sortBy === 'mostRecentGames') {\r\n        return _sortByRecency(games)\r\n    } else {\r\n        return _sortByRating(games)\r\n    }\r\n\r\n}\r\n\r\nasync function _sortByRecency(games) {\r\n    const sortedGames = games.sort((game1, game2) => {\r\n        return game2.publishedAt - game1.publishedAt\r\n    })\r\n    return sortedGames\r\n}\r\n\r\nasync function _sortByRating(games) {\r\n    games.forEach(game => game.totalRating = getGameRating(game))\r\n    const sortedGames = games.sort((game1, game2) => {\r\n        return game2.totalRating - game1.totalRating\r\n    })\r\n    return sortedGames\r\n}\r\n\r\nasync function sortByDownloads(games, isAscending = false) {\r\n    const downloadNumbers = await getGraphsDetails(games)\r\n    games.forEach((game) => {\r\n        game.downloadsCount = downloadNumbers[game.title]\r\n    });\r\n    const sortedGames = games.sort((game1, game2) => {\r\n        if (isAscending) {\r\n            return game1.downloadsCount < game2.downloadsCount ? -1 : game1.downloadsCount > game2.downloadsCount ? 0 : 1\r\n        }\r\n        return game1.downloadsCount > game2.downloadsCount ? -1 : game1.downloadsCount < game2.downloadsCount ? 0 : 1\r\n    })\r\n    return sortedGames\r\n}\r\n\r\nfunction sortByPrice(games, isAscending) {\r\n    const sortedGames = games.sort((game1, game2) => {\r\n        if (isAscending) {\r\n            return game2.price > game1.price ? -1 : game2.price < game1.price ? 0 : 1\r\n        }\r\n        return game2.price < game1.price ? -1 : game2.price > game1.price ? 0 : 1\r\n    })\r\n    return sortedGames\r\n}\r\n\r\nfunction dateFromObjectId(objectId) {\r\n    const date = new Date(parseInt(objectId.substring(0, 8), 16) * 1000)\r\n    return date\r\n};\r\n\r\nfunction formatDate(date) {\r\n    const year = date.getFullYear()\r\n    const monthNames = [\r\n        \"Jan\", \"Feb\", \"Mar\", \"Apr\",\r\n        \"May\", \"Jun\", \"Jul\", \"Aug\",\r\n        \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n    let month = monthNames[date.getMonth()]\r\n    const fullDate = month + ' ' + year\r\n    return fullDate\r\n}\r\n\r\nasync function getGraphsDetails(games, type, date = 31) {\r\n    const prms = []\r\n    const ordersBy = {}\r\n    const gameByNameOrder = []\r\n    const ordersByGame = []\r\n    games.forEach((game) => {\r\n        prms.push(OrderService.query({\r\n            lastMonthId: objectIdByTime(date),\r\n            gameIds: game._id\r\n        }))\r\n        gameByNameOrder.push(game.title)\r\n        ordersByGame.push(0)\r\n    })\r\n    const gameOrders = await Promise.all(prms)\r\n\r\n    gameOrders.forEach((orders, i) => {\r\n        return orders.forEach((order, idx) => {\r\n            const currOrderDate = dateFromObjectId(order.createdAt).getDate()\r\n            let num = ordersBy[currOrderDate]\r\n            if (num && idx===0)return\r\n            if (type === 'games') {\r\n                return ordersByGame[i] += 1\r\n            }\r\n            if (!num) return ordersBy[currOrderDate] = 1\r\n            ordersBy[gameByNameOrder[i]] = idx\r\n            return ordersBy[currOrderDate] = num + 1\r\n        })\r\n    })\r\n    if (type === 'games') return ordersByGame\r\n    return ordersBy\r\n}\r\n\r\nfunction formatGameRating(rating) {\r\n    if (rating > 50) {\r\n        return 'Really positive'\r\n    } else if (rating > 10) {\r\n        return 'Positive'\r\n    } else if (rating > -10) {\r\n        return 'Mixed'\r\n    } else if (rating > -50) {\r\n        return 'Negetive'\r\n    } else {\r\n        return 'Really negetive'\r\n    }\r\n}\r\n\r\n","import HttpService from './HttpService';\r\n\r\nexport default {\r\n  add,\r\n  query,\r\n  getById,\r\n  update,\r\n  remove\r\n};\r\n\r\n// const gGames = createGames();\r\n\r\nfunction query(filterBy = '') {\r\n  const games = HttpService.get('game', '', filterBy);\r\n  return games\r\n}\r\n\r\nasync function update(updatedGame){\r\n  const game = await HttpService.put(`game/${updatedGame._id}`, updatedGame);\r\n  return game\r\n  \r\n}\r\n\r\nasync function remove(gameId) {\r\n  return await HttpService.delete(`game/${gameId}`);\r\n}\r\n\r\nasync function add(game) {\r\n  const addedGame  = await HttpService.post(`game`, game);\r\n  return  addedGame\r\n}\r\n\r\nasync function getById(gameId) {\r\n  return HttpService.get(`game/${gameId}`);\r\n}","import GameService from '../services/GameService';\r\n\r\nfunction setGames(games) {\r\n    return {\r\n        type: 'SET_GAMES',\r\n        games\r\n    }\r\n}\r\n\r\nfunction setGame(game) {\r\n    return {\r\n        type: 'SET_GAME',\r\n        game\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport function loadGames(filterBy) {\r\n    return async dispatch => {\r\n        try {\r\n            const games = await GameService.query(filterBy);\r\n            dispatch(setGames(games));\r\n            return games\r\n\r\n        } catch (err) {\r\n            console.log('Had issues getting games', err);\r\n        }\r\n    };\r\n}\r\n\r\nexport function loadGame(id) {\r\n    return async dispatch => {\r\n        try {\r\n            const game = await GameService.getById(id);\r\n            dispatch(setGame(game));\r\n            return game\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    };\r\n}\r\nexport function updateGame(newGame) {\r\n    return async dispatch => {\r\n        try {\r\n            const game = await GameService.update(newGame);\r\n            dispatch(setGame(newGame));\r\n            return game\r\n        } catch (err) {\r\n        }\r\n    };\r\n}\r\nexport function updateComments(newGame) {\r\n    return  dispatch => {\r\n        try {\r\n            dispatch(setGame(newGame));\r\n            return newGame\r\n        } catch (err) {\r\n        }\r\n    };\r\n}\r\n\r\nfunction setFilter(filterBy) {\r\n    return {\r\n        type: 'SET_FILTER',\r\n        filterBy\r\n    }\r\n}\r\nexport function setFilterBy(filterBy) {\r\n    return (dispatch) => dispatch(setFilter(filterBy))\r\n}","import HttpService from './HttpService';\r\n\r\nexport default {\r\n  login,\r\n  signUp,\r\n  logout,\r\n  add,\r\n  remove,\r\n  getById,\r\n  update\r\n}\r\n\r\nasync function login(loginCred) {\r\n  const loggedInUser = await HttpService.post('auth/login', loginCred)\r\n  return loggedInUser\r\n}\r\n\r\nasync function signUp(signUpCred) {\r\n  const loggedInUser = await HttpService.post('auth/signup', signUpCred)\r\n  return loggedInUser\r\n}\r\n\r\nasync function logout() {\r\n  const loggedOutUser = await HttpService.post('auth/logout')\r\n  return loggedOutUser\r\n}\r\n\r\nasync function update(updatedUser) {\r\n  const user = await HttpService.put(`user/${updatedUser._id}`, updatedUser);\r\n  return user\r\n}\r\n\r\nfunction remove(userId) {\r\n  return HttpService.delete(`user/${userId}`);\r\n}\r\n\r\nasync function add(user) {\r\n  const addedUser = await HttpService.post(`user`, user);\r\n  return addedUser\r\n}\r\n\r\nasync function getById(userId) {\r\n  return HttpService.get(`user/${userId}`);\r\n}","import UserService from '../services/UserService';\r\n\r\nexport function login(cred) {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await UserService.login(cred);\r\n            dispatch(setUser(user));\r\n            return;\r\n        } catch (err) {\r\n            console.log(err);\r\n            throw err;\r\n        }\r\n    };\r\n}\r\n\r\nexport function logout() {\r\n    return async dispatch => {\r\n        try {\r\n            await UserService.logout();\r\n            dispatch(setUser(null))\r\n            return;\r\n        } catch (err) {\r\n            console.log('Had issues in logging out', err)\r\n            throw err;\r\n        }\r\n    };\r\n}\r\n\r\nexport function signUp(cred) {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await UserService.signUp(cred);\r\n            dispatch(setUser(user));\r\n            return;\r\n        } catch (err) {\r\n            console.log('Had issues in signing up', err)\r\n            throw err;\r\n        }\r\n    };\r\n}\r\n\r\n\r\nexport function loadUser(userId) {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await UserService.query(userId);\r\n            dispatch(setUser(user));\r\n            return;\r\n        } catch (err) {\r\n            console.log('Had issues in getting user', err)\r\n            throw err;\r\n        }\r\n    };\r\n}\r\n\r\nexport function updateUser(user) {\r\n    return async dispatch => {\r\n        try {\r\n            const updatedUser = await UserService.update(user);\r\n            dispatch(_updateUser(updatedUser));\r\n            return;\r\n        } catch (err) {\r\n            console.log('Had issues in updating user', err)\r\n            throw err;\r\n        }\r\n    };\r\n}\r\n\r\nexport function setUser(user) {\r\n    return {\r\n        type: 'SET_USER',\r\n        user\r\n    };\r\n}\r\n\r\nfunction _updateUser(user) {\r\n    return {\r\n        type: 'UPDATE_USER',\r\n        user\r\n    }\r\n}\r\n","function loadFromStorage(key) {\r\n    var val = localStorage.getItem(key)\r\n    return (val)? JSON.parse(val) : [];\r\n}\r\n\r\nfunction saveToStorage(key, val) {\r\n    localStorage[key] = JSON.stringify(val);\r\n}\r\n\r\nexport default {\r\n    loadFromStorage,\r\n    saveToStorage\r\n}","import StorageService from './StorageService'\r\n\r\nexport default {\r\n    query,\r\n    addToCart,\r\n    removeFromCart,\r\n    clear\r\n}\r\n\r\nfunction query() {\r\n    return StorageService.loadFromStorage('cart')\r\n}\r\n\r\nfunction addToCart(item) {\r\n    const cartItems = StorageService.loadFromStorage('cart')\r\n    try {\r\n        if (!cartItems.find((currItem) => item === currItem)) {\r\n            cartItems.push(item)\r\n            StorageService.saveToStorage('cart', cartItems)\r\n            return 'success'\r\n        }\r\n    } catch (err) {\r\n        console.log('Already in the cart')\r\n        throw err\r\n    }\r\n}\r\n\r\nfunction removeFromCart(item) {\r\n    const cartItems = StorageService.loadFromStorage('cart')\r\n    const updatedCart = cartItems.filter((currItem) => currItem !== item)\r\n    StorageService.saveToStorage('cart', updatedCart)\r\n}\r\n\r\nfunction clear() {\r\n    StorageService.saveToStorage('cart', [])\r\n    return [];\r\n}","import CartService from '../services/CartService'\r\n\r\nexport function loadCart() {\r\n    return dispatch => {\r\n        const cart = CartService.query();\r\n        dispatch(_setCart(cart));\r\n    }\r\n}\r\n\r\nexport function clearCart() {\r\n    return dispatch => {\r\n        const cart = CartService.clear();\r\n        dispatch(_setCart(cart))\r\n    }\r\n}\r\n\r\nexport function removeGameFromCart(item) {\r\n    return dispatch => {\r\n        CartService.removeFromCart(item)\r\n        dispatch(_removeFromCart(item));\r\n    }\r\n}\r\n\r\nexport function addGameToCart(item) {\r\n    return dispatch => {\r\n        try {\r\n            CartService.addToCart(item)\r\n            dispatch(_addToCart(item))\r\n            return;\r\n        } catch (err) {\r\n            console.log(err);\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nfunction _setCart(cart) {\r\n    return {\r\n        type: 'SET_CART',\r\n        cart\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction _addToCart(item) {\r\n    return {\r\n        type: 'ADD_TO_CART',\r\n        item\r\n    }\r\n}\r\n\r\nfunction _removeFromCart(item) {\r\n    return {\r\n        type: 'REMOVE_FROM_CART',\r\n        item\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport UtilService from '../../services/UtilService'\r\nimport UserService from '../../services/UserService'\r\nimport { removeGameFromCart } from '../../actions/cartActions'\r\n\r\n\r\nimport full_heart from '../../assets/icons/full_heart.svg'\r\nimport empty_heart from '../../assets/icons/empty_heart.svg'\r\nimport remove_from_cart from '../../assets/icons/remove_from_cart.png'\r\n\r\nimport './_GamePreview.scss'\r\n\r\nclass GamePreview extends Component {\r\n    state = {\r\n        publisherName: '',\r\n    }\r\n    async componentDidMount() {\r\n        const { game } = this.props\r\n        const publisher = await UserService.getById(game.publisher)\r\n        const publisherName = publisher.userName\r\n        this.setState({ publisherName })\r\n    }\r\n\r\n    onOpenDetails = (gameId) => {\r\n        this.props.history.push(`/game/${gameId}`)\r\n    }\r\n    onOpenEdit = (ev) => {\r\n        ev.stopPropagation()\r\n        this.props.history.push(`/edit/${this.props.game._id}`)\r\n    }\r\n\r\n    onRemoveFromCart = (ev) => {\r\n        ev.stopPropagation();\r\n        this.props.onRemoveFromCart(this.props.game._id)\r\n        this.props.removeGameFromCart(this.props.game._id)\r\n    }\r\n\r\n    onPlayClick = (ev) => {\r\n        ev.stopPropagation()\r\n        this.props.history.push(`/play/${this.props.game._id}`)\r\n    }\r\n\r\n    toggleWishedGame = (ev) => {\r\n        const { user, game } = this.props\r\n        ev.stopPropagation();\r\n        let wishedGames = (user && user.wishedGames) || []\r\n        let updatedUser\r\n        const idx = wishedGames.findIndex(id => id === game._id)\r\n        if (idx === -1) {\r\n            updatedUser = { ...user, wishedGames: [...wishedGames, game._id] }\r\n        } else {\r\n            updatedUser = { ...user, wishedGames: wishedGames.filter(wishedGame => wishedGame !== game._id) }\r\n        }\r\n        this.props.onUpdateUser(updatedUser)\r\n    }\r\n    render() {\r\n        const { game, user, isProfile, isDashboard, isCart } = this.props\r\n        const review = UtilService.formatGameRating((UtilService.getGameRating(game)))\r\n        return (\r\n            <li className=\"game-card\" onClick={() => this.onOpenDetails(game._id)}>\r\n                <div className=\"img-container\">\r\n                    <img alt=\"thumbnail\" className=\"game-thumbnail\" src={game.thumbnail}></img>\r\n                </div>\r\n                <section className=\"details-container\">\r\n                    <div className=\"flex\">\r\n                        <strong className=\"full\">{game.title}</strong>\r\n                        {isProfile && isDashboard && <p className=\"price\">${game.price}</p>}\r\n                        {!isProfile &&\r\n                            <img alt=\"like\" className=\"like-icon\" onClick={this.toggleWishedGame} src={user && user.wishedGames.find(wishedGame => wishedGame === game._id) ?\r\n                                full_heart : empty_heart} />}\r\n                    </div>\r\n                    <strong className=\"publisher\">{this.state.publisherName}</strong>\r\n                    <div className=\"flex space-between\">\r\n                        {!isProfile && <p className=\"price\">${game.price}</p>}\r\n                        {!isProfile &&\r\n                            <p className=\"rating\">{review}( {game.reviews.length} )</p>}\r\n                        {isCart && <img alt=\"remove\" src={remove_from_cart} className=\"like-icon\" onClick={this.onRemoveFromCart} />}\r\n                        {isProfile && !isDashboard &&\r\n                            <button className=\"play-btn\" onClick={this.onPlayClick}>Play</button>}\r\n                        {isProfile && isDashboard && <div className=\"dsh-btn-container flex space-between\">\r\n                            <button className=\"edit-btn\" onClick={this.onOpenEdit}>Edit</button>\r\n                            {isDashboard && <button className=\"delete-btn\" onClick={this.onRemoveGame}>X</button>}\r\n                        </div>}\r\n                    </div>\r\n                </section >\r\n            </li >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        cart: state.cartStore.cart\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    removeGameFromCart,\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(GamePreview)\r\n","import GamePreview from '../game-preview/GamePreview'\r\nimport React from 'react'\r\n\r\nexport default function GameList(props) {\r\n    const { games, user } = props;\r\n    return <ul className=\"cards-container clean-list container\">\r\n        {games?.map((game) => {\r\n            return <GamePreview key={game._id} onRemoveFromCart={props.onRemoveFromCart} isCart={props.isCart}\r\n                history={props.history}\r\n                isProfile={props.isProfile}\r\n                isDashboard={props.isDashboard}\r\n                user={user}\r\n                onUpdateUser={props.onUpdateUser}\r\n                onRemoveGame={props.onRemoveGame}\r\n                game={game}>\r\n            </GamePreview>\r\n        })}\r\n    </ul >\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux'\r\n\r\nimport UtilService from '../../services/UtilService';\r\nimport { loadGames } from '../../actions/gameActions';\r\nimport { updateUser } from '../../actions/userActions'\r\nimport GameList from '../../cmps/game-list/GameList'\r\n\r\nimport './_HomePage.scss'\r\nclass HomePage extends Component {\r\n  state = {\r\n    mostDownloadGames: [],\r\n    mostRecentGames: [],\r\n    highestRatingGames: []\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.props.loadGames()\r\n    this.setGames('mostDownloadGames')\r\n    this.setGames('mostRecentGames')\r\n    this.setGames('highestRatingGames')\r\n  }\r\n\r\n  onUpdateUser = async (updatedUser) => {\r\n    this.props.updateUser(updatedUser)\r\n  }\r\n\r\n  setGames = async (sortBy, num = 3) => {\r\n    const games = [...this.props.games]\r\n    const sortedGames = await UtilService.sortGames(games, sortBy)\r\n    sortedGames.splice(num, games.length)\r\n    this.setState({ [sortBy]: sortedGames })\r\n  }\r\n\r\n\r\n  render() {\r\n    const { mostDownloadGames, mostRecentGames, highestRatingGames } = this.state\r\n    return (\r\n      <div className=\"homepage-container content-container container full\">\r\n        <div className=\"hero-text flex column totally-center\">\r\n          <h1 className=\"main-heading\">Gamein</h1>\r\n          <p>The ultimate destination for buying, discussing, and playing games</p>\r\n          <Link to=\"/game\" onClick={this.on} className=\"hero-btn\">To the shop</Link>\r\n        </div>\r\n        Most Popular\r\n      <GameList history={this.props.history} user={this.props.user} onUpdateUser={this.onUpdateUser} games={mostDownloadGames} />\r\n        Recent Released\r\n      <GameList history={this.props.history} user={this.props.user} onUpdateUser={this.onUpdateUser} games={mostRecentGames} />\r\n        Highest Rating\r\n      <GameList history={this.props.history} user={this.props.user} onUpdateUser={this.onUpdateUser} games={highestRatingGames} />\r\n      </div>)\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    games: state.gameStore.games,\r\n    user: state.userStore.loggedInUser\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  loadGames,\r\n  updateUser\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(HomePage);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport history from '../../history';\r\n\r\nimport { login } from '../../actions/userActions';\r\n\r\nimport './_Login.scss'\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    loginCred: {\r\n      userName: '',\r\n      password: ''\r\n    }\r\n  };\r\n\r\n  loginHandleChange = ev => {\r\n    const { name, value } = ev.target;\r\n    this.setState(prevState => ({\r\n      loginCred: {\r\n        ...prevState.loginCred,\r\n        [name]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  doLogin = async ev => {\r\n    ev.preventDefault();\r\n    const { userName, password } = this.state.loginCred;\r\n    if (!userName || !password) {\r\n      return console.log('all details are required');\r\n    }\r\n    const userCreds = { userName, password };\r\n\r\n    try {\r\n      await this.props.login(userCreds);\r\n      this.setState({ loginCred: { userName: '', password: '' } }, () => history.push('/'));\r\n    } catch (err) {\r\n      console.log('Had issues while logging in ')\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { loggedInUser } = this.props\r\n    const loginSection = (\r\n      <form className=\"login-form flex column justify-center align-center\" onSubmit={this.doLogin}>\r\n        <input className=\"login-input input\" type=\"text\" name=\"userName\" value={this.state.loginCred.userName}\r\n          onChange={this.loginHandleChange} placeholder=\"User name\" />\r\n        <input className=\"login-input input\" type=\"password\" name=\"password\" value={this.state.loginCred.password}\r\n          onChange={this.loginHandleChange} placeholder=\"Password\" />\r\n        <button className=\"btn\">Login</button>\r\n        <p>Not with us yet ?</p>\r\n        <button className=\"join-btn\" onClick={() => history.push('/sign-up')}>Join</button>\r\n      </form>\r\n    );\r\n\r\n    return (\r\n      <div className=\"login-container content-container flex column justify-center align-center container\">\r\n        <img className=\"login-logo\" alt=\"logo\" src=\"/logo.png\" width=\"100px\"/>\r\n        {(!loggedInUser || !loggedInUser.userName) && loginSection}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loggedInUser: state.userStore.loggedInUser\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  login\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Login);\r\n","import Axios from 'axios';\r\n\r\nexport default async function uploadImg(files) {\r\n    const prms = []\r\n    for (let i = 0; i < files.length; i++) {\r\n        const CLOUD_NAME = 'dfdvfunfj';\r\n        const PRESET_NAME = 'zc8aff64';\r\n        const type = files[i].type.split('/')\r\n        const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/${type[0]}/upload`;\r\n        const formData = new FormData();\r\n        formData.append('file', files[i])\r\n        formData.append('upload_preset', PRESET_NAME);\r\n        try {\r\n            prms.push(Axios.post(UPLOAD_URL, formData)\r\n            )\r\n        } catch (err) {\r\n            console.log('Had issues uploading to cloudinary', err);\r\n        }\r\n\r\n    }\r\n    const filesData = await Promise.all(prms)\r\n    const urls = filesData.map((file) => {\r\n        return file.data.url\r\n    })\r\n    return urls\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport history from '../../history';\r\n\r\nimport MediaUploadService from '../../services/MediaUploadService';\r\nimport { signUp } from '../../actions/userActions';\r\n\r\nclass SignUp extends Component {\r\n  state = {\r\n    signUpCred: {\r\n      fullName: '',\r\n      userName: '',\r\n      password: '',\r\n      about: '',\r\n      imgUrl: ''\r\n    }\r\n  };\r\n\r\n  addMediaAndTags = async ev => {\r\n    const imgUrl = await MediaUploadService(ev.target.files);\r\n    return this.setState({ imgUrl: imgUrl[0] })\r\n  }\r\n\r\n  signUpHandleChange = ev => {\r\n    const { name, value } = ev.target;\r\n    this.setState(prevState => ({\r\n      signUpCred: {\r\n        ...prevState.signUpCred,\r\n        [name]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  doSignUp = async ev => {\r\n    ev.preventDefault();\r\n    const { fullName, userName, password, about } = this.state.signUpCred;\r\n    if (!fullName || !userName || !password || !about) {\r\n      return console.log('all inputs are required fullName, userName, password, about', fullName, userName, password, about);\r\n    }\r\n    const signUpCreds = { fullName, userName, password, about, imgUrl: this.state.imgUrl };\r\n    try {\r\n      await this.props.signUp(signUpCreds);\r\n      this.setState({ signUpCred: { fullName: '', password: '', userName: '', about: '', imgUrl: '' } }, () => history.push('/'));\r\n    } catch (err) {\r\n      throw err\r\n    }\r\n  };\r\n\r\n  removeImg = () => {\r\n    return this.setState({ imgUrl: '' })\r\n  };\r\n\r\n  render() {\r\n    const { imgUrl } = this.state\r\n    const { loggedInUser } = this.props\r\n    let imgPreview = ''\r\n    if (imgUrl) {\r\n      imgPreview = <div className=\"media-container\">\r\n        <img src={imgUrl} alt=\"\" />\r\n        <span className=\"pointer\"\r\n          onClick={this.removeImg}>X</span>\r\n      </div>\r\n    }\r\n    const signUpSection = (\r\n      <form onSubmit={this.doSignUp}>\r\n        <input type=\"text\" name=\"fullName\" value={this.state.signUpCred.fullName}\r\n          onChange={this.signUpHandleChange} placeholder=\"Full Name\" />\r\n        <br />\r\n        <input type=\"text\" name=\"userName\" value={this.state.signUpCred.userName}\r\n          onChange={this.signUpHandleChange} placeholder=\"UserName\" />\r\n        <br />\r\n        <input type=\"password\" name=\"password\" value={this.state.signUpCred.password}\r\n          onChange={this.signUpHandleChange} placeholder=\"Password\" />\r\n        <br />\r\n        <input type=\"text\" name=\"about\" value={this.state.signUpCred.about}\r\n          onChange={this.signUpHandleChange} placeholder=\"About\" />\r\n        <br />\r\n        <input type=\"file\" name=\"imgUrl\" placeholder=\"Profile Image\"\r\n          onChange={this.addMediaAndTags} />\r\n        {imgPreview}\r\n        <br />\r\n        {(imgPreview && <button>Join</button>)}\r\n      </form>\r\n    );\r\n\r\n    return (\r\n      <div className='content-container'>\r\n        {(!loggedInUser || !loggedInUser.userName) && signUpSection}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loggedInUser: state.userStore.loggedInUser\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  signUp\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SignUp);\r\n","import React, { Component } from 'react'\r\n\r\nimport './_Filter.scss'\r\n\r\nexport default class Filter extends Component {\r\n    state = {\r\n        title: '',\r\n        tag: ''\r\n    }\r\n\r\n\r\n    inputChange = ev => {\r\n        let fieldName = ev.target.name;\r\n        this.setState({ [fieldName]: ev.target.value });\r\n    };\r\n\r\n    onFilterBy = (ev) => {\r\n        const value = ev.target.value;\r\n        const name = ev.target.name;\r\n        this.setState({ [name]: value }, () => this.props.onFilterBy(this.state))\r\n    }\r\n\r\n    render() {\r\n        const { sortByPrice, sortByDownloads } = this.props\r\n        return <div className=\"search-container\">\r\n            <input className=\"search-input input\" name='title' type=\"search\" placeholder=\"Search\" onChange={this.onFilterBy} />\r\n            <input className=\"search-input input\" name='tag' type='text' placeholder='Search by Tags' onChange={this.onFilterBy} />\r\n            <select onChange={this.onFilterBy} name='tag' >\r\n                <option value=''>All</option>\r\n                <option value='rpg'>RPG</option>\r\n                <option value='action'>Action</option>\r\n                <option value='simulator'>Simulator</option>\r\n                <option value='third-person'>Third Person</option>\r\n                <option value='open-world'>Open-World</option>\r\n            </select>\r\n            <span>Sort by</span>\r\n            <button onClick={sortByDownloads}>By Downloads </button>\r\n            <button onClick={sortByPrice}>By Price</button>\r\n        </div>\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { loadGames } from '../../actions/gameActions';\r\nimport { updateUser } from '../../actions/userActions';\r\n\r\nimport Filter from '../../cmps/filter/Filter';\r\nimport GameList from '../../cmps/game-list/GameList';\r\nimport UtilService from '../../services/UtilService';\r\n\r\nimport './_Explore.scss'\r\n\r\nclass Explore extends Component {\r\n    state = { games: null, isAscending: false }\r\n\r\n    componentDidMount = async () => {\r\n        this.onFilterBy()\r\n    }\r\n\r\n    onUpdateUser = async (updatedUser) => {\r\n        this.props.updateUser(updatedUser)\r\n    }\r\n\r\n    onFilterBy = async (filterBy) => {\r\n       await this.props.loadGames(filterBy)\r\n       this.setState({ games: this.props.games })\r\n    }\r\n\r\n    sortByDownloads = async () => {\r\n        let games = [...this.props.games]\r\n        games = await UtilService.sortByDownloads(games, this.state.isAscending)\r\n        this.setState((prevState) => ({ games, isAscending: !prevState.isAscending }))\r\n    }\r\n    sortByPrice = () => {\r\n        let games = [...this.props.games]\r\n        games = UtilService.sortByPrice(games, this.state.isAscending)\r\n        this.setState((prevState) => ({ games, isAscending: !prevState.isAscending }))\r\n    }\r\n\r\n    render() {\r\n        const { games } = this.state\r\n        return <div className=\"content-container flex column container align-center\">\r\n            <Filter sortByPrice={this.sortByPrice} sortByDownloads={this.sortByDownloads} onFilterBy={this.onFilterBy} />\r\n            <GameList history={this.props.history} user={this.props.user} onUpdateUser={this.onUpdateUser} games={games} />\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        games: state.gameStore.games,\r\n        user: state.userStore.loggedInUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    loadGames,\r\n    updateUser\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Explore);","import React,{ Component } from \"react\";\r\n\r\n\r\n\r\n\r\nexport default class LongTxt extends Component {\r\n\r\n    state = {\r\n        isLongTxtShown: this.props.isLongTxtShown\r\n    }\r\n\r\n    getText = () => {\r\n        return (this.state.isLongTxtShown) ? this.props.text : this.props.text.substring(0, this.props.shortLength);\r\n    }\r\n\r\n    handleReadMore = () => {\r\n        this.setState(prevstate => ({ isLongTxtShown: !prevstate.isLongTxtShown }))\r\n    }\r\n\r\n    getButtonTxt() {\r\n        return this.state.isLongTxtShown ? '': '...'\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <span className=\"read-more\" onClick={this.handleReadMore}>       \r\n                {this.getText()}\r\n                {this.props.text.length >= this.props.shortLength &&\r\n                    <span className=\"read-more-button\">\r\n                    {this.getButtonTxt()}\r\n                    </span>}\r\n            </span>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nexport default class Modal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.el = document.createElement('div');\r\n    }\r\n    \r\n    componentDidMount() {\r\n        const modalRoot = document.getElementById('modal');\r\n        modalRoot.appendChild(this.el);\r\n    }\r\n    \r\n    componentWillUnmount() {\r\n        const modalRoot = document.getElementById('modal');\r\n        modalRoot.removeChild(this.el);\r\n    }\r\n\r\n    render() {\r\n        return ReactDOM.createPortal(\r\n            this.props.children,\r\n            this.el,\r\n        );\r\n    }\r\n}","import React, { PureComponent } from 'react';\r\nimport {\r\n  AreaChart, Area, XAxis, YAxis , Tooltip,\r\n} from 'recharts';\r\n\r\nexport default class Graph extends PureComponent {\r\n  state = { data: [{ name: '0', purcheses: 0 }] }\r\n\r\n  componentDidUpdate(prevprops) {\r\n    if (prevprops.orderDates !== this.props.orderDates) {\r\n      this.setData(this.props.orderDates)\r\n    }\r\n  }\r\n\r\n  setData = (purchases) => {\r\n    const data = []\r\n    if (!this.props.games.length)return \r\n    for (let i = 30; i >=0; i--) {\r\n  let date=new Date()\r\n  date.setDate(date.getDate()-i)\r\n      let price\r\n      if (purchases[date.getDate()]) {\r\n        price = purchases[date.getDate()]\r\n      }else{\r\n        price=0\r\n      }\r\n      data.push({ name: date.getDate()+'/'+(date.getMonth()+1), purchases: price })\r\n    }\r\n    this.setState({ data })\r\n  }\r\n\r\n  render() {\r\n    const { data } = this.state\r\n    return (\r\n      <AreaChart\r\n        width={500}\r\n        height={400}\r\n        data={data}\r\n        margin={{\r\n          top: 10, right: 30, left: 0, bottom: 0,\r\n        }}\r\n      >\r\n        <XAxis dataKey=\"name\" />\r\n        <YAxis />\r\n        <Tooltip />\r\n        <Area type=\"monotone\" dataKey=\"purchases\" stroke=\"#8884d8\" fill=\"#8884d8\" />\r\n      </AreaChart>\r\n    );\r\n  }\r\n}\r\n\r\n","import React, { PureComponent } from 'react';\r\nimport { PieChart, Pie, Tooltip } from 'recharts';\r\nexport default class PieCharts extends PureComponent {\r\n  state = {\r\n    data: [{ fill: '#16578F', name: 'publish Games', value: 1 }],\r\n    gameTitles: null,\r\n    colors: ['#16578F', '#5F89D3', '#A45FC1',\r\n      '#4C96D7', 'lightblue', 'red', '#023436', '#FFC09F',\r\n      '#ADF7B6', '#D10000', '#65AFFF', '#274060']\r\n  }\r\n\r\n  componentDidUpdate(prevprops) {\r\n    if (prevprops.sumOfGames !== this.props.sumOfGames) {\r\n      this.setData(this.props.sumOfGames)\r\n    }\r\n  }\r\n\r\n  setData = (sum) => {\r\n    const { colors } = this.state\r\n    const data = []\r\n    const gameTitles = []\r\n    this.props.games.forEach((game, i) => {\r\n      if (!sum[i]) return\r\n      if (!this.props.user && i > 3) return\r\n      gameTitles.push(game.title)\r\n      data.push({ fill: colors[i], name: game.title, value:sum[i]})\r\n    })\r\n    this.setState({ data, gameTitles })\r\n  }\r\n\r\n  renderCustomizedLabel = ({ cx, cy, midAngle, innerRadius, outerRadius, percent, index }) => {\r\n    const RADIAN = Math.PI / 180;\r\n    const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\r\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\r\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\r\n\r\n    return (\r\n      <text x={x} y={y} fill=\"white\" textAnchor={x > cx ? 'start' : 'end'} dominantBaseline=\"central\">\r\n        {`${(percent * 100).toFixed(0)}%`}\r\n      </text>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { data, gameTitles, colors } = this.state\r\n\r\n    return (\r\n      <div>\r\n        <PieChart width={400} height={400}>\r\n          <Pie\r\n            dataKey=\"value\"\r\n            isAnimationActive={true}\r\n            data={data}\r\n            cx={200}\r\n            cy={200}\r\n            outerRadius={100}\r\n            fill=\"#8884d8\"\r\n            labelLine={false}\r\n            label={this.renderCustomizedLabel} />\r\n          <Tooltip />\r\n        </PieChart>\r\n        <table>\r\n          <tbody>\r\n            {gameTitles && gameTitles.map((title, i) => {\r\n              return <tr key={title}>\r\n                <td className=\"menu-color\" style={{ background: colors[i], width: \"20px\" }}>\r\n                </td>\r\n                <td>{title}</td>\r\n              </tr>\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div >\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport './_InfoCard.scss';\r\n\r\nexport default function InfoCard(props) {\r\n    return (\r\n        <div className='info-card flex column align-center'>\r\n            <p>\r\n                {props.children}\r\n            </p>\r\n            <p className=\"data\">\r\n                {props.children.includes('Earned') && '$'}{props.data}\r\n            </p>\r\n        </div>)\r\n\r\n}\r\n","import React from 'react'\r\n\r\nexport default function ConfirmDelete(props) {\r\n    return <div>\r\n        <p>Confirm Delete</p>\r\n        <button onClick={props.modalAction}>Confirm</button>\r\n        <button onClick={()=>props.toggleModal(props.modalType)}>Cancel</button>\r\n    </div>\r\n}","import io from 'socket.io-client';\r\n\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030';\r\n\r\nlet socket;\r\n\r\nexport default {\r\n  setup,\r\n  terminate,\r\n  on,\r\n  off,\r\n  emit\r\n};\r\n\r\nfunction setup() {\r\n  socket = io(BASE_URL);\r\n}\r\n\r\nfunction terminate() {\r\n  socket = null;\r\n}\r\n\r\nfunction on(eventName, cb) {\r\n  socket.on(eventName, cb);\r\n}\r\n\r\nfunction off(eventName, cb) {\r\n  socket.off(eventName, cb);\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n  socket.emit(eventName, data);\r\n}\r\n","\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport UtilService from '../../services/UtilService';\r\nimport GameService from '../../services/GameService'\r\nimport { loadGames } from '../../actions/gameActions';\r\n\r\nimport GameList from '../game-list/GameList';\r\nimport Modal from '../modal/Modal'\r\nimport AreaChart from '../charts/AreaChart';\r\nimport PieChart from '../charts/PieChart';\r\nimport InfoCard from '../infocard/InfoCard';\r\n\r\nimport ConfirmDelete from '../helpers/ConfirmDelete'\r\n\r\nimport './_Dashboard.scss'\r\nclass Dashboard extends Component {\r\n    state = {\r\n        orders: null,\r\n        filterBy: {\r\n            _id: '',\r\n        },\r\n        modalType: '',\r\n        toggleModal: false,\r\n        currGameId: '',\r\n        sumOfGames: [],\r\n        monthMoneySum: null,\r\n        downloadsByMonth: null,\r\n        downloadsByWeek: null\r\n    }\r\n\r\n    onToggleModal = (modalType) => {\r\n        if (!this.state.toggleModal) {\r\n            this.setState({ modalType, toggleModal: true });\r\n        } else if (modalType === this.state.modalType) {\r\n            this.setState(prevState => { return { toggleModal: !prevState.toggleModal, modalType: '' } })\r\n        } else {\r\n            this.setState({ modalType })\r\n        }\r\n    }\r\n\r\n    getGraphsDetails = async () => {\r\n        const ordersBy = await UtilService.getGraphsDetails(this.props.games)\r\n        this.setState({ orders: ordersBy })\r\n    }\r\n\r\n    getWeekInfo = async () => {\r\n        const downloadsSum = await UtilService.getGraphsDetails(this.props.games, 'games', 7)\r\n        const downloadsByWeek = downloadsSum.reduce((acc, gameSum) => {\r\n            return acc += gameSum\r\n        }, 0).toLocaleString()\r\n        this.setState({ downloadsByWeek })\r\n    }\r\n\r\n    getMonthInfo = async () => {\r\n        const sumOfGames = await UtilService.getSum(this.props.games)\r\n        const monthMoneySum = sumOfGames.sum.reduce((acc, gameSum) => {\r\n            return acc += gameSum\r\n        }, 0).toLocaleString()\r\n        const downloadsByMonth = sumOfGames.downloadsByGame.reduce((acc, gameSum) => {\r\n            return acc += gameSum\r\n        }, 0).toLocaleString()\r\n        this.setState({ sumOfGames: sumOfGames.sum, monthMoneySum, downloadsByMonth })\r\n    }\r\n\r\n    componentDidUpdate = (prevProps) => {\r\n        if (prevProps.games.length !== this.props.games.length) {\r\n            this.getGraphsDetails()\r\n            this.getWeekInfo()\r\n            this.getMonthInfo()\r\n        }\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        if (this.props.loggedInUser) {\r\n            const _id = this.props.loggedInUser._id\r\n            this.setState({\r\n                filterBy: {\r\n                    _id\r\n                }\r\n            }, async () => {\r\n                await this.props.loadGames(this.state.filterBy)\r\n            })\r\n        } else {\r\n            this.props.loadGames()\r\n        }\r\n        await this.getGraphsDetails()\r\n        this.getWeekInfo()\r\n        this.getMonthInfo()\r\n    }\r\n\r\n    onRemoveGame = async (gameId) => {\r\n        this.setState({\r\n            toggleModal: true,\r\n            currGameId: gameId\r\n        })\r\n        this.onToggleModal('confirmDelete')\r\n    }\r\n\r\n    removeGame = async () => {\r\n        this.setState(prevState => { return { toggleModal: !prevState.toggleModal, modalType: '' } })\r\n        await GameService.remove(this.state.currGameId)\r\n        this.props.loadGames()\r\n    }\r\n\r\n    render() {\r\n        const { orders, sumOfGames, monthMoneySum, downloadsByMonth, downloadsByWeek } = this.state\r\n        let gameList\r\n        if (this.props.loggedInUser) {\r\n            gameList = (<div className=\"games-container flex column totally-center\">\r\n                <h3 className=\"games-header\">Your uploaded games</h3>\r\n                <div className='publish-button'>\r\n                    <Link to='/edit'>Publish a game</Link>\r\n                </div>\r\n                <GameList onRemoveGame={this.onRemoveGame} history={this.props.history} isDashboard={true} isProfile={true} games={this.props.games} />\r\n                {this.state.modalType === 'confirmDelete' && <Modal >\r\n                    <ConfirmDelete modalType={this.modalType} modalAction={this.removeGame} toggleModal={this.onToggleModal} />\r\n                </Modal>}</div>\r\n            )\r\n        }\r\n        return (<div className=\"container dashboard-container flex column align-center\">\r\n            {!this.props.games.length && <h3 className=\"dashboard-header\">Publish games to see more</h3>}\r\n            {!this.props.loggedInUser && <h3 className=\"dashboard-header\">This is a demo of the dashboard, login to see your data</h3>}\r\n            <div className='flex info-cards-container'>\r\n                <InfoCard data={monthMoneySum}>Earned this month:</InfoCard>\r\n                <InfoCard data={downloadsByMonth}>Downloads this month:</InfoCard>\r\n                <InfoCard data={downloadsByWeek}>Downloads this week:</InfoCard>\r\n            </div>\r\n            <div className=\"charts-container flex wrap totally-center\">\r\n                <AreaChart games={this.props.games} orderDates={orders} />\r\n                <PieChart user={this.props.loggedInUser} games={this.props.games} sumOfGames={sumOfGames} />\r\n            </div>\r\n            {gameList}\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        games: state.gameStore.games,\r\n        loggedInUser: state.userStore.loggedInUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    loadGames\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Dashboard);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nimport GameList from '../game-list/GameList';\r\nimport Filter from '../filter/Filter'\r\n\r\nimport { loadGames } from '../../actions/gameActions';\r\nimport OrderService from '../../services/OrderService';\r\n\r\nclass OwnedGames extends Component {\r\n    state={games:[]}\r\n    componentDidMount=async () =>{\r\n        const gamesIds=[]\r\n        if (this.props.user){\r\n            const orders=   await OrderService.query({orderBy: this.props.user._id})\r\n         orders.forEach((order)=>{\r\n            order.gameIds.forEach((gameId)=>{\r\n                gamesIds.push(gameId)\r\n            })\r\n        })\r\n        }\r\n        if (gamesIds.length){\r\n         const games= await  this.props.loadGames({shoppingCartIds:gamesIds})\r\n         this.setState({games})\r\n        }\r\n    }\r\n\r\n    onFilterBy = (filterBy) => {\r\n        this.props.loadGames(filterBy)\r\n    }\r\n\r\n    render() {\r\n        const {games}=this.state\r\n        return (\r\n            <div className=\"content-container container\">\r\n                <Filter onFilterBy={this.onFilterBy}></Filter>\r\n                <GameList isProfile={true} history={this.props.history} games={games}></GameList>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        games: state.gameStore.games,\r\n        user: state.userStore.loggedInUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    loadGames\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(OwnedGames);\r\n","import Dashboard from '../dashboard/Dashboard';\r\nimport OwnedGames from '../owned-games/OwnedGames';\r\n\r\nexport default  {\r\n    Dashboard,\r\n    OwnedGames\r\n}","import React, { Component } from 'react';\r\n\r\nimport DynamicTabMap from './DynamicTabMap.js'\r\n\r\nexport default class DynamicTabPrev extends Component {\r\n    getComponent() {\r\n        return DynamicTabMap[this.props.mode]\r\n    }\r\n\r\n    render() {\r\n        const Cmp = this.getComponent();\r\n        return <React.Fragment>\r\n            <Cmp history={this.props.history}></Cmp>\r\n        </React.Fragment>\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { Icon } from 'antd';\r\n\r\nimport LongText from '../../cmps/helpers/LongTxt'\r\nimport UtilService from '../../services/UtilService'\r\nimport DynamicTabPrev from '../../cmps/dynamic-cmps/DynamicTabPrev';\r\n\r\nimport './_ProfilePage.scss'\r\nclass ProfilePage extends Component {\r\n  state = {\r\n    mode: 'OwnedGames',\r\n    user: {\r\n      \"_id\": \"null\",\r\n      \"fullName\": \"Guest\",\r\n      \"userName\": \"Guest\",\r\n      \"about\": \"Guest\",\r\n      \"createdAt\": 123879186123,\r\n      \"imgUrl\": \"http://keenthemes.com/preview/metronic/theme/assets/pages/media/profile/profile_user.jpg\",\r\n      \"desiredGames\": [{ game: 'gta' }],\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.loggedInUser && this.props.loggedInUser.userName) this.setState({ user: this.props.loggedInUser })\r\n  }\r\n\r\n  updateMode = (ev) => {\r\n    let mode = ev.target.value\r\n    this.setState({ mode })\r\n  }\r\n\r\n  render() {\r\n    const { user } = this.state\r\n    if (user._id !== 'null') user.createdAt = UtilService.formatDate(UtilService.dateFromObjectId(user._id))\r\n    else user.createdAt = 'Dec 2013'\r\n    return (\r\n      <div className=\"profile-container\">\r\n        <div className=\"user-card flex align-center container\">\r\n          <img className=\"user-img small\" alt=\"\" src={user.imgUrl} />\r\n          <div className=\"user-details\">\r\n            <strong>{user.userName}</strong>\r\n            <small>{user.createdAt}</small>\r\n            <div>\r\n            <LongText shortLength={100} isLongTxtShown={false} text={user.about}/>\r\n            </div>\r\n          </div>\r\n          <Icon title=\"Edit details\" type=\"edit\" key=\"edit\" />\r\n        </div>\r\n        <div className=\"tab-nav flex justify-center\">\r\n          <label className={(this.state.mode === \"OwnedGames\") ? \"inner-tab active\" : \"inner-tab\"} htmlFor=\"OwnedGames\">\r\n            <p>Games</p>\r\n            <input name=\"tab\" type=\"radio\" onChange={this.updateMode}\r\n              checked={this.state.mode === \"OwnedGames\"} value=\"OwnedGames\" id=\"OwnedGames\" />\r\n          </label>\r\n          <label className={(this.state.mode === \"Dashboard\") ? \"inner-tab active\" : \"inner-tab\"} htmlFor=\"Dashboard\">\r\n            <p>Dashboard</p>\r\n            <input name=\"tab\" type=\"radio\" onChange={this.updateMode} value=\"Dashboard\" id=\"Dashboard\" />\r\n          </label>\r\n        </div>\r\n        <DynamicTabPrev className=\"dynamic-prev\" history={this.props.history} mode={this.state.mode} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loggedInUser: state.userStore.loggedInUser,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ProfilePage);","import React from 'react'\r\nimport './_Notification.scss'\r\n\r\nexport default function Notification(props) {\r\n    return <div className=\"notification\">\r\n        <p>{props.modalTxt}</p>\r\n    </div>\r\n}","import React from 'react';\r\n\r\nexport default function GameMedia(props){\r\n\r\n    return  props.mediaUrls.map(url => {\r\n        if (url.includes(\"mp4\")) {\r\n          return (\r\n            <video  key={url}  onClick={props.onThumbNailPhotoClick}  alt=\"\" className=\"game-choose-thumbnail\" src={`${url}#t=23`} />   );\r\n        }\r\n        return (\r\n          <img key={url} onClick={props.onThumbNailPhotoClick} alt=\"\"  className=\"game-choose-thumbnail\" src={url}  />\r\n        );\r\n      })\r\n}\r\n","import React, { Component } from \"react\";\r\nimport UtilService from \"../../services/UtilService\";\r\nimport UserService from \"../../services/UserService\";\r\n\r\nimport full_heart from '../../assets/icons/full_heart.svg'\r\nimport empty_heart from '../../assets/icons/empty_heart.svg'\r\nimport OrderService from \"../../services/OrderService\";\r\n\r\nexport default class GameDesc extends Component {\r\n  state = { orderCount: '', rating: '', publisherName: '', isOwned: false }\r\n\r\n  componentDidMount = () => {\r\n    const { game } = this.props\r\n    this.setOrderCount(game)\r\n    this.setGameRating(game)\r\n    this.setPublisherName(game.publisher)\r\n    this.purchaseCheck()\r\n  }\r\n  componentDidUpdate= (prevProps)=>{\r\n    const { game } = this.props\r\n    if (game.title!==prevProps.game.title){\r\n      this.setOrderCount(game)\r\n      this.setGameRating(game)\r\n      this.setPublisherName(game.publisher)\r\n      this.purchaseCheck()\r\n    }\r\n  }\r\n\r\n  setOrderCount = async (game) => {\r\n    const orderCount = await UtilService.getGraphsDetails([game])\r\n    this.setState({ orderCount: orderCount[game.title] })\r\n  }\r\n\r\n  onAddToCart = () => {\r\n    this.props.onAddToCart(this.props.game._id)\r\n  }\r\n\r\n  setGameRating = (game) => {\r\n    const rating = UtilService.formatGameRating((UtilService.getGameRating(game)))\r\n    this.setState({ rating })\r\n  }\r\n\r\n  setPublisherName = async (publisherId) => {\r\n    const publisher = await UserService.getById(publisherId)\r\n    const publisherName = publisher.userName\r\n    this.setState({ publisherName })\r\n  }\r\n\r\n  purchaseCheck = async () => {\r\n    let isPurchesed = []\r\n    if (this.props.user) {\r\n      isPurchesed = await OrderService.query({ orderBy: this.props.user._id, gameId: this.props.game._id })\r\n    }\r\n    if (isPurchesed.length) {\r\n      return this.setState({ isOwned: true })\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  render() {\r\n    const { game, user } = this.props\r\n    const { thumbnail, description, publishedAt, price } = game\r\n    const { publisherName, rating, orderCount, isOwned } = this.state\r\n    const priceOrPlay = isOwned ? <button>Play</button> :\r\n      <button type=\"primary\" className='game-buy-button' onClick={this.onAddToCart}> {price}$ Add to cart </button>\r\n    const date = new Date(publishedAt / 1)\r\n    const publishedDate = UtilService.formatDate(date)\r\n    return (\r\n      <div className=\"desc flex column\">\r\n        <img alt=\"\" className=\"game-thumbnail\" src={thumbnail}></img>\r\n        <div className='game-description'>\r\n          <p > {description}</p>\r\n          <p> Published at: {publishedDate}</p>\r\n          <p> Publisher: {publisherName}</p>\r\n          <p> Rating: {rating}</p>\r\n          <p> Downloads last month :{orderCount}   </p>\r\n        </div>\r\n        <div className=\"flex space-between wish-btn\">\r\n          <img alt=\"like\" className=\"like-icon\" onClick={this.props.onToggleWishedGame} src={user && user.wishedGames.find(wishedGame => wishedGame === game._id) ?\r\n            full_heart : empty_heart} />\r\n          {priceOrPlay}\r\n        </div>\r\n      </div>)\r\n  }\r\n\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nexport default class Comment extends Component {\r\n  state = { text: \"\" };\r\n  inputChange = ev => {\r\n    let fieldName = ev.target.name;\r\n    this.setState({ [fieldName]: ev.target.value });\r\n  };\r\n\r\n  onAddComment = () => {\r\n    const { text } = this.state\r\n    if (!text) return\r\n    let user = { userName: 'Guest' }\r\n    if (this.props.user) user = this.props.user\r\n    this.props.onAddCommentOrReview({ text, user }, true)\r\n    this.setState({ text: '' })\r\n  }\r\n\r\n  render() {\r\n    const { comments } = this.props;\r\n    const { text } = this.state;\r\n    if (!comments) return ''\r\n    const commentMap = comments.map(comment => {\r\n      if (!comment.user) {\r\n        return <p key={comment.text}>{comment.text}</p>\r\n      }\r\n      return (\r\n        <p key={comment.text + comment.user.userName}>{comment.user.userName} : {comment.text}</p>\r\n      );\r\n    })\r\n    return (\r\n      <div>\r\n        <div className='social-content-container'>\r\n          {commentMap}\r\n        </div>\r\n        <h3>Add a Comment</h3>\r\n        <textarea\r\n          type=\"text\"\r\n          name=\"text\"\r\n          value={text}\r\n          onChange={this.inputChange}\r\n          placeholder=\"write your text\"\r\n        />\r\n        <button onClick={this.onAddComment} type='primary'>Add comment</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\n\r\nexport default class NewReview extends Component {\r\n    state = { rating: '', text: \"\" };\r\n\r\n    inputChange = ev => {\r\n        let fieldName = ev.target.name;\r\n        this.setState({ [fieldName]: ev.target.value });\r\n    };\r\n\r\n    onAddReview = () => {\r\n        const { rating, text } = this.state\r\n        if (!rating) return\r\n        this.props.onAddCommentOrReview({ user: { userName: this.props.user.userName }, rating, text }, true, 'reviews')\r\n        this.setState({ text: '' })\r\n    }\r\n\r\n\r\n    render() {\r\n        const { text } = this.state\r\n        return (\r\n            <div>\r\n                <h3>Add a review</h3>\r\n                <textarea\r\n                    type=\"text\"\r\n                    name=\"text\"\r\n                    value={text}\r\n                    onChange={this.inputChange}\r\n                    placeholder=\"write your text\"\r\n                />\r\n                <input className='hidden' type='radio' value='like' onChange={this.inputChange} name='rating' id='like' />\r\n                <label className='like-img pointer' htmlFor='like' name='rating'>\r\n                    <img alt='like' src=\"https://img.icons8.com/ultraviolet/40/000000/good-quality.png\" />\r\n                </label>\r\n                <input className='hidden' type='radio' onChange={this.inputChange} value='dislike' name='rating' id='dislike' />\r\n                <label htmlFor='dislike' className='dislike-img pointer' name='rating'>\r\n                    <img alt='dislike' src=\"https://img.icons8.com/ultraviolet/40/000000/poor-quality.png\" />\r\n                </label>\r\n                <button  onClick={this.onAddReview}>Add Review</button>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\n\r\n\r\nfunction IsUserLoggedIn(props) {\r\n    if (props.loggedInUser) {\r\n        return (\r\n            <div>\r\n              {props.children}\r\n            </div>\r\n        )\r\n    }\r\n    return null\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userStore.loggedInUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(IsUserLoggedIn);\r\n","import React, { Component } from 'react';\r\nimport NewReview from './new-review/NewReview';\r\nimport IsUserLoggedIn from '../is-user-logged-in/IsUserLoggedIn';\r\n\r\nexport default class Review extends Component {\r\n  render() {\r\n\r\n    const { reviews, user } = this.props;\r\n    return (\r\n      <div className='reviews-container' >\r\n        <ul className='social-content-container '>\r\n          {\" \"}\r\n          {reviews.map(review => {\r\n            return (\r\n              <div className='review-container' key={review.text}>\r\n                <p>{review.user.userName}</p>\r\n                <p>{review.text}</p>\r\n                {review.rating === 'like' ? <img alt='like' src=\"https://img.icons8.com/ultraviolet/40/000000/good-quality.png\" />\r\n                  : <img alt='dislike' src=\"https://img.icons8.com/ultraviolet/40/000000/poor-quality.png\" />}\r\n              </div>\r\n            );\r\n          })}\r\n        </ul>\r\n        <IsUserLoggedIn>\r\n          <NewReview user={user} onAddCommentOrReview={this.props.onAddCommentOrReview} onAddReview={this.onAddReview} inputChange={this.inputChange} />\r\n          </IsUserLoggedIn>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nimport Notification from '../../../cmps/helpers/Notification'\r\nimport GameMedia from '../../../cmps/game-media/GameMedia';\r\nimport GameDesc from '../../../cmps/game-desc/GameDesc';\r\nimport Comments from '../../../cmps/comments/Comment';\r\nimport Review from '../../../cmps/review/Review';\r\nimport Modal from '../../../cmps/modal/Modal'\r\n\r\nexport default function GameDetailsPage(props) {\r\n    if (!props.game) return <h1>Loading</h1>;\r\n    const { onAddCommentOrReview, onThumbNailPhotoClick, user, toggleWishedGame, onAddToCart,\r\n        onToggleModal, toggleModal, modalTxt, currMediaUrl, game: { title, reviews, mediaUrls, tags, comments } } = props\r\n    let mainMedia;\r\n    currMediaUrl.includes(\".mp4\") ?\r\n        mainMedia = <iframe title=\"video\" src={`${currMediaUrl}?#t=0&#autoplay=1&mute=1`} allowFullScreen='allowfullscreen' volume={0} className=\"game-main-thumbnail\" />\r\n        : mainMedia = <img src={currMediaUrl} alt=\"\" className=\"game-main-thumbnail\" />\r\n    return (\r\n        <div className=\"container content-container\" >\r\n            {toggleModal && <Modal><Notification modalTxt={modalTxt} toggleModal={onToggleModal} /></Modal>}\r\n            <h1>{title}</h1>\r\n            <div className=\"grid game-main-content-container \">\r\n                {mainMedia}\r\n                <div className=\"flex game-choose-thumbnail-container\">\r\n                    <GameMedia onThumbNailPhotoClick={onThumbNailPhotoClick} mediaUrls={mediaUrls} />\r\n                </div>\r\n                <GameDesc user={props.user} onToggleWishedGame={toggleWishedGame} onAddToCart={onAddToCart} game={props.game} />\r\n            </div>\r\n            <h2>Tags:</h2>\r\n            {tags.map(tag => {\r\n                return <span className=\"tag\" key={tag}>{tag} </span>;\r\n            })}\r\n            <h2>Reviews :</h2>\r\n            <Review user={user} onAddCommentOrReview={onAddCommentOrReview} reviews={reviews} />\r\n            <h2>Comments :</h2>\r\n            <Comments user={user} onAddCommentOrReview={onAddCommentOrReview} comments={comments} />\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from 'react-redux'\r\n\r\nimport SocketService from \"../../services/SocketService\";\r\n\r\nimport { loadGame, updateGame, updateComments } from \"../../actions/gameActions\";\r\nimport { updateUser } from '../../actions/userActions';\r\nimport { addGameToCart } from '../../actions/cartActions';\r\n\r\nimport './_GameDetails.scss';\r\nimport GameDetailsPage from \"./game-details-page/GameDetailsPage\";\r\n\r\nclass GameDetails extends Component {\r\n  state = {\r\n    currMediaUrl: '',\r\n    toggleModal: false,\r\n    modalTxt: ''\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    window.scrollTo(0,0);\r\n    const { id } = this.props.match.params\r\n    await this.props.loadGame(id)\r\n    this.setState({ currMediaUrl: this.props.game.mediaUrls[0] });\r\n    this.initiateSockets()\r\n  }\r\n\r\n  initiateSockets = () => {\r\n    SocketService.setup()\r\n    SocketService.emit('chat room', this.props.game.title);\r\n    SocketService.on('chat newComment', this.onAddCommentOrReview)\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    SocketService.terminate()\r\n  }\r\n\r\n  onAddCommentOrReview = (newText, isSent = false, name = 'comments') => {\r\n    const newGame = { ...this.props.game }\r\n    newGame[name] = [...newGame[name], newText]\r\n    if (!isSent) { return this.props.updateComments(newGame) }\r\n    if (name === 'comments') { SocketService.emit('chat newComment', newText); }\r\n    return this.props.updateGame(newGame)\r\n  }\r\n\r\n  onAddToCart = (gameId) => {\r\n    try {\r\n      this.props.addGameToCart(gameId)\r\n      this.setState({\r\n        modalTxt: 'Game has been added to the cart',\r\n        toggleModal: true\r\n      }, this.onToggleModal())\r\n    } catch {\r\n      this.setState({\r\n        modalTxt: 'Game is already in the cart',\r\n        toggleModal: true\r\n      }, this.onToggleModal())\r\n    }\r\n  };\r\n\r\n  toggleWishedGame = (ev) => {\r\n    const { loggedInUser, game } = this.props\r\n    ev.stopPropagation();\r\n    let wishedGames = (loggedInUser && loggedInUser.wishedGames) || []\r\n    let updatedUser\r\n    const idx = wishedGames.findIndex(id => id === game._id)\r\n    if (idx === -1) {\r\n      updatedUser = { ...loggedInUser, wishedGames: [...wishedGames, game._id] }\r\n    } else {\r\n      updatedUser = { ...loggedInUser, wishedGames: wishedGames.filter(wishedGame => wishedGame !== game._id) }\r\n    }\r\n    this.props.updateUser(updatedUser)\r\n  }\r\n\r\n  onToggleModal = () => {\r\n    setTimeout(() => {\r\n      this.setState(prevState => ({ toggleModal: !prevState.toggleModal }))\r\n    }, 2000)\r\n  }\r\n\r\n\r\n  onThumbNailPhotoClick = ev => {\r\n    this.setState({ currMediaUrl: ev.target.src });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <GameDetailsPage onThumbNailPhotoClick={this.onThumbNailPhotoClick}\r\n        onToggleModal={this.onToggleModal} toggleWishedGame={this.toggleWishedGame}\r\n        game={this.props.game} currMediaUrl={this.state.currMediaUrl} modalTxt={this.state.modalTxt}\r\n        onAddToCart={this.onAddToCart} onAddCommentOrReview={this.onAddCommentOrReview} user={this.props.loggedInUser} />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    cart: state.cartStore.cart,\r\n    game: state.gameStore.game,\r\n    loggedInUser: state.userStore.loggedInUser,\r\n  };\r\n};\r\nconst mapDispatchToProps = {\r\n  addGameToCart,\r\n  loadGame,\r\n  updateGame,\r\n  updateComments,\r\n  updateUser\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(GameDetails)\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport SocketService from \"../../services/SocketService\";\r\nimport Comments from \"../../cmps/comments/Comment\";\r\nimport './_PlayGame.scss'\r\nclass PlayGame extends Component {\r\n    state = { comments: null }\r\n\r\n    componentDidMount() {\r\n        let userName = 'Guest'\r\n        if (this.props.loggedInUser) userName = this.props.loggedInUser.userName\r\n        SocketService.setup()\r\n        SocketService.emit('chat room', this.props.match.params.id);\r\n        SocketService.emit('user joined', { text: `${userName} has joined the chat` });\r\n        SocketService.on('chat newComment', this.addComment)\r\n        SocketService.on('user joined', this.addComment)\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        SocketService.terminate()\r\n    }\r\n\r\n    sendComment = (newComment) => {\r\n        SocketService.emit('chat newComment', newComment);\r\n    };\r\n\r\n    addComment = newComment => {\r\n        if (!this.state.comments) return this.setState({ comments: [newComment] })\r\n        this.setState(prevState => ({ comments: [...prevState.comments, newComment] }));\r\n    };\r\n\r\n    render() {\r\n        const { comments } = this.state\r\n        let addedComments\r\n        const logInMsg = !this.props.loggedInUser ? 'Buy the game to enjoy the game fully' : '';\r\n        addedComments = <Comments onAddCommentOrReview={this.sendComment} comments={comments} />\r\n        return <div className='content-container'>\r\n            <h3>{logInMsg}</h3>\r\n            <div className='flex'>\r\n                <iframe title=\"play\" src=\"https://www.gameflare.com/embed/cartoon-strike/\" frameBorder=\"0\" scrolling=\"no\" width=\"1000\" height=\"635\" allowFullScreen></iframe>\r\n                <ul>{addedComments}</ul>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userStore.loggedInUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(PlayGame);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { loadCart } from '../../actions/cartActions'\r\n\r\nclass GameCounter extends Component {\r\n    componentDidMount() {\r\n        this.props.loadCart()\r\n    }\r\n\r\n    render() {\r\n        return <div  style={{ alignSelf:\"center\",color: \"white\" }}>{this.props.cart.length}</div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        cart: state.cartStore.cart\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    loadCart\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(GameCounter)","import React, { Component } from 'react';\r\nimport { NavLink, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport history from '../../history';\r\n\r\nimport { logout } from '../../actions/userActions';\r\nimport GameCounter from '../game-counter/GameCounter'\r\nimport './_NavBar.scss'\r\nimport wishlistImg from '../../assets/icons/wishlist.svg'\r\nimport shoppingCartImg from '../../assets/icons/shopping_cart.svg'\r\n\r\nclass NavBar extends Component {\r\n\r\n  doLogOut = async () => {\r\n    try {\r\n      await this.props.logout();\r\n      history.push('/')\r\n    } catch (err) {\r\n      console.log('Had issues while logging out ', err)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { loggedInUser } = this.props\r\n    const userName = (!loggedInUser) ? 'guest' : loggedInUser.userName;\r\n    return (\r\n      <nav className=\"nav-bar flex align-center\">\r\n        <div className=\"nav-logo full\">\r\n          <Link to=\"/\">\r\n            <img alt=\"logo\" src=\"/navbar-logo.png\" />\r\n          </Link>\r\n        </div>\r\n        <input type='checkbox' className='hidden' id='menu' />\r\n        <label className='nav-bar-hamburger' htmlFor='menu'>\r\n          \r\n          </label>\r\n        <div className=' nav-bar-menu'>\r\n          <NavLink to=\"/\" exact className=\"nav-link flex align-center\" activeClassName=\"active\" >\r\n            Homepage\r\n        </NavLink>\r\n          <NavLink to=\"/game\" exact className=\"nav-link flex align-center\" activeClassName=\"active\" >\r\n            Explore\r\n        </NavLink>\r\n          <NavLink to={`/user/${userName || 'guest'}`} exact className=\"nav-link flex align-center\" activeClassName=\"active\"  >\r\n            Profile\r\n        </NavLink>\r\n          {(!loggedInUser || !loggedInUser.userName) ? <NavLink to=\"/login\" exact className=\"nav-link flex align-center\" activeClassName=\"active\" >Login</NavLink>\r\n            : <NavLink onClick={this.doLogOut} to=\"/\" exact className=\"nav-link flex align-center\" activeClassName=\"\">Logout</NavLink>}\r\n          <div className=\"nav-link flex align-center\" onClick={() => this.props.toggleModal(\"wishlist\")}>\r\n            <img alt=\"\" src={wishlistImg} />\r\n          </div>\r\n          <div className=\"nav-link flex align-center\" onClick={() => this.props.toggleModal(\"shoppingCart\")}>\r\n            <GameCounter />\r\n            <img alt=\"\" src={shoppingCartImg} />\r\n          </div>\r\n        </div>\r\n      </nav >\r\n\r\n    )\r\n  }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loggedInUser: state.userStore.loggedInUser\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  logout\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(NavBar);","import React from 'react';\r\n\r\nexport default function MediaUrlsList(props) {\r\n  return props.mediaUrls.map((url, idx) => {\r\n    if (url.includes(\".mp4\")) {\r\n      return (\r\n        <div className=\"media-container flex\" key={url}>\r\n          <iframe src={url} allowFullScreen='allowfullscreen' title='video' alt={url} />\r\n          <span\r\n            className=\"pointer\"\r\n            onClick={() => props.removeMediaAndTags(\"mediaUrls\", idx)}\r\n          >\r\n            X\r\n          </span>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"media-container  flex\" key={url}>\r\n        <img src={url} alt={url} />\r\n        <span\r\n          className=\"pointer\"\r\n          onClick={() => props.removeMediaAndTags(\"mediaUrls\", idx)}\r\n        >\r\n          X\r\n        </span>\r\n      </div>\r\n    );\r\n  });\r\n}\r\n","import React from 'react';\r\n\r\nexport default function thumbnail(props) {\r\n  const { thumbnail } = props\r\n  return <div className=\"media-container\">\r\n    <img src={thumbnail} alt=\"\" />\r\n    <span className=\"pointer\"\r\n      onClick={() => props.removeMediaAndTags(\"thumbnail\")}>X</span>\r\n  </div>\r\n}\r\n","import React from 'react';\r\n\r\nexport default function TagList(props) {\r\n  return props.tags.map((tag, idx) => {\r\n    return (\r\n      <div className=\"tag-container\" key={tag}>\r\n        <span\r\n          className=\"pointer\"\r\n          onClick={() => props.removeMediaAndTags(\"tags\", idx)}\r\n        >\r\n          X\r\n        </span>\r\n        <p>{tag}</p>\r\n      </div>\r\n    );\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport MediaUrlsList from '../media-url-list/MediaUrlList';\r\nimport Thumbnail from '../thumbnail/Thumbnail';\r\nimport TagList from '../tag-list/TagList';\r\n\r\n\r\nexport default function InputForm(props) {\r\n    const { inputChange, addMediaAndTags, onSubmit, removeMediaAndTags,\r\n        form: { price, publishedAt, title, mediaUrls, tags, thumbnail, description } } = props\r\n    let addedTags;\r\n    let addedUrls;\r\n    let addedThumbnail\r\n    if (mediaUrls && mediaUrls.length) {\r\n        addedUrls = (<MediaUrlsList removeMediaAndTags={removeMediaAndTags} mediaUrls={mediaUrls} />)\r\n    }\r\n    if (tags && tags.length) {\r\n        addedTags = (<TagList removeMediaAndTags={removeMediaAndTags} tags={tags} />)\r\n    }\r\n    if (thumbnail) {\r\n        addedThumbnail = <Thumbnail thumbnail={thumbnail} removeMediaAndTags={removeMediaAndTags} />\r\n    }\r\n\r\n    return <div className=\"edit-container\">\r\n        <p> Title : </p>\r\n        <input type=\"text\" onChange={inputChange} value={title} placeholder=\"title\" name=\"title\" />\r\n        <p>Publish Date</p>\r\n        <input type=\"date\" onChange={inputChange} value={publishedAt} name=\"publishedAt\" />\r\n        <p> Descripiton: </p>\r\n        <textarea type=\"text\" onChange={inputChange} placeholder=\"description\" name=\"description\" value={description} />\r\n        <p> Thumbnail Img: </p>\r\n        <input type=\"file\" onChange={addMediaAndTags} placeholder=\"thumbnail\" name=\"thumbnail\" />\r\n        {addedThumbnail}\r\n        <p> Media: </p>\r\n        <div>\r\n            <input type=\"file\" onChange={addMediaAndTags} placeholder=\"Put your image Urls here\" name=\"mediaUrls\" multiple />\r\n            <div className=\"flex wrap\">{addedUrls}</div>\r\n        </div>\r\n        <p>Price: </p>\r\n        <input type=\"number\" onChange={inputChange} placeholder=\"price\" name=\"price\" value={price} />\r\n        <p>Tags:</p>\r\n        <input type=\"tags\" onChange={inputChange} placeholder=\"tags\" name=\"currTag\" />\r\n        <button name=\"tags\" onClick={addMediaAndTags}>\r\n            Add Tag\r\n          </button>\r\n        <div className=\"flex\">{addedTags}</div>\r\n        <button onClick={onSubmit}>Submit</button>\r\n    </div>\r\n\r\n\r\n\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nimport GameService from '../../services/GameService';\r\nimport MediaUploadService from '../../services/MediaUploadService';\r\n\r\nimport './_EditGame.scss';\r\nimport InputForm from './inputForm/InputForm';\r\nclass EditGame extends Component {\r\n  state = {\r\n    title: \"\",\r\n    description: \"\",\r\n    thumbnail: \"\",\r\n    mediaUrls: [],\r\n    price: \"\",\r\n    publishedAt: '',\r\n    tags: null,\r\n    currTag: ''\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    const params = this.props.match.params.id\r\n    if (params) {\r\n      const game = await GameService.getById(params)\r\n      const publishedAt = this.getDateInput(game.publishedAt)\r\n      this.setState({ ...game, publishedAt })\r\n    }\r\n  }\r\n\r\n  getDateInput = (publishDate) => {\r\n    const publishedAt = new Date(publishDate / 1)\r\n    const day = (\"0\" + publishedAt.getDate()).slice(-2);\r\n    const month = (\"0\" + (publishedAt.getMonth() + 1)).slice(-2);\r\n    const date = publishedAt.getFullYear() + \"-\" + (month) + \"-\" + (day)\r\n    return date\r\n  }\r\n\r\n  onSubmit = async () => {\r\n    const newGame = { ...this.state }\r\n    newGame.publishedAt = new Date(newGame.publishedAt).getTime()\r\n    console.log(newGame)\r\n    if (!newGame.mediaUrls) return\r\n    if (!newGame.thumbnail) return\r\n    if (this.props.match.params.id) {\r\n      delete newGame.currTag\r\n      const game = await GameService.update(newGame)\r\n      return this.props.history.push(`/game/${game._id}`)\r\n    }\r\n    if (!this.props.loggedInUser) return\r\n    newGame.publisher = this.props.loggedInUser._id\r\n    newGame.comments = []\r\n    newGame.reviews = []\r\n    delete newGame.currTag\r\n    const game = await GameService.add(newGame)\r\n    return this.props.history.push(`/game/${game._id}`)\r\n  }\r\n\r\n  addMediaAndTags = async ev => {\r\n    const fieldName = ev.target.name\r\n    if (fieldName !== \"tags\") {\r\n      const urls = await MediaUploadService(ev.target.files);\r\n      if (fieldName === 'thumbnail') {\r\n        return this.setState({ thumbnail: urls[0] })\r\n      }\r\n      return this.setState(prevState => ({\r\n        mediaUrls: [...prevState.mediaUrls, ...urls]\r\n      }));\r\n    }\r\n    if (!this.state.currTag) return\r\n    this.setState(prevState => ({\r\n      tags: [...prevState.tags, this.state.currTag]\r\n    }))\r\n  }\r\n\r\n  removeMediaAndTags = (fieldName, idx) => {\r\n    if (fieldName === 'thumbnail') {\r\n      return this.setState({ thumbnail: '' })\r\n    }\r\n    let editedData = [...this.state[fieldName]];\r\n    editedData.splice(idx, 1);\r\n    this.setState({\r\n      [fieldName]: editedData\r\n    });\r\n  };\r\n\r\n  inputChange = ev => {\r\n    let fieldName = ev.target.name;\r\n    this.setState({ [fieldName]: ev.target.value });\r\n  };\r\n\r\n  render() {\r\n    return <InputForm removeMediaAndTags={this.removeMediaAndTags} inputChange={this.inputChange}\r\n      onSubmit={this.onSubmit} addMediaAndTags={this.addMediaAndTags} form={this.state} />\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loggedInUser: state.userStore.loggedInUser,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(EditGame);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport history from '../../history'\r\n\r\n\r\nimport CartService from '../../services/CartService'\r\nimport GameList from '../../cmps/game-list/GameList'\r\nimport GameService from '../../services/GameService';\r\nimport UtilService from '../../services/UtilService';\r\nimport OrderService from '../../services/OrderService';\r\n\r\nimport { updateUser } from '../../actions/userActions'\r\nimport { clearCart } from '../../actions/cartActions';\r\n\r\nclass ShoppingCart extends Component {\r\n    state = {\r\n        games: null,\r\n        gamesIds: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadGames()\r\n    }\r\n\r\n    async loadGames() {\r\n        const gamesIds = CartService.query();\r\n        let gamesToRender = []\r\n        if (gamesIds.length) {\r\n            gamesToRender = await GameService.query({ shoppingCartIds: gamesIds })\r\n        }\r\n        this.setState({ gamesIds, games: gamesToRender })\r\n    }\r\n\r\n    onUpdateUser = async (updatedUser) => {\r\n        this.props.updateUser(updatedUser)\r\n    }\r\n\r\n    onRemoveFromCart = (gameId) => {\r\n        CartService.removeFromCart(gameId)\r\n        this.loadGames()\r\n    }\r\n\r\n    onBuyClick = () => {\r\n        if (!this.props.user) {history.push('/login'); return}\r\n\r\n        const order = {\r\n            createdAt: UtilService.objectIdByTime(),\r\n            orderBy: this.props.user._id,\r\n            gameIds: this.state.gamesIds\r\n        }\r\n        OrderService.add(order)\r\n        this.props.clearCart()\r\n        this.loadGames()\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"modal totally-center\">\r\n            {(this.state.games && this.state.games.length) ?\r\n                <div className=\"modal-content\">\r\n                    <GameList user={this.props.user} onUpdateUser={this.onUpdateUser} onRemoveFromCart={this.onRemoveFromCart} isCart={true} games={this.state.games} history={this.props.history}></GameList>\r\n                    <button className=\"cla-btn flex\" onClick={this.onBuyClick}>Checkout</button>\r\n                </div>\r\n                : <h3 className=\"flex column totally-center\">Your shopping cart is empty</h3>}\r\n        </div>\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.userStore.loggedInUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    clearCart,\r\n    updateUser\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ShoppingCart);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nimport { updateUser } from '../../actions/userActions'\r\nimport { loadGames } from '../../actions/gameActions'\r\nimport GameList from '../game-list/GameList'\r\n\r\nimport './_WishList.scss'\r\n\r\nclass WishList extends Component {\r\n    componentDidMount() {\r\n        loadGames()\r\n    }\r\n\r\n    onUpdateUser = async (updatedUser) => {\r\n        this.props.updateUser(updatedUser)\r\n    }\r\n\r\n    render() {\r\n        if (this.props.user) {\r\n            const { games, user } = this.props\r\n            let wishedGames = games.filter(game => user.wishedGames.includes(game._id))\r\n            return <div className=\"modal\">\r\n                <div className=\"modal-content\">\r\n                    <GameList history={this.props.history} user={user} onUpdateUser={this.onUpdateUser} games={wishedGames}></GameList>\r\n                </div>\r\n            </div>\r\n        }\r\n        return <div className=\"modal\"><h3 className=\"modal-content empty-wishlist flex align-center\">Please Login to see your wishlist</h3></div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        games: state.gameStore.games,\r\n        user: state.userStore.loggedInUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    loadGames,\r\n    updateUser\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(WishList);","import React from 'react'\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './_Footer.scss'\r\n\r\nexport default function Footer(props) {\r\n    return (\r\n        <div className=\"footer-container totally-center flex column\">\r\n            <img className=\"logo-footer\" width=\"10\"alt=\"logo\" src=\"/logo.png\" />\r\n            <small className=\"rights\"> 2020, <span className=\"name\">GameIn</span> Inc. All rights reserved</small>\r\n            <div>\r\n                <Link to=\"/about\">About us</Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { Component } from 'react';\r\nimport { Router, Switch, Route } from 'react-router';\r\n\r\nimport history from './history';\r\n\r\nimport HomePage from './pages/homepage/HomePage';\r\nimport Login from './pages/login/Login';\r\nimport SignUp from './pages/sign-up/SignUp';\r\nimport Explore from './pages/explore-page/Explore';\r\nimport ProfilePage from './pages/profile-page/ProfilePage';\r\nimport GameDetails from './pages/game-details/GameDetails';\r\nimport PlayGame from './pages/play-game/PlayGame';\r\n\r\nimport NavBar from './cmps/nav-bar/NavBar';\r\nimport Modal from './cmps/modal/Modal'\r\nimport EditGame from './cmps/edit-game/EditGame';\r\nimport ShoppingCart from './cmps/shopping-cart/ShoppingCart';\r\nimport WishList from './cmps/wish-list/WishList';\r\nimport Footer from './cmps/footer/Footer';\r\n\r\nimport './assets/styles/global.scss'\r\n\r\nexport default class App extends Component {\r\n   state = {\r\n      modalType: '',\r\n      toggleModal: false\r\n   }\r\n\r\n   toggleModal = (modalType) => {\r\n      if (!this.state.toggleModal) {\r\n         this.setState({ modalType, toggleModal: true });\r\n      } else if (modalType === this.state.modalType) {\r\n         this.setState(prevState => { return { toggleModal: !prevState.toggleModal, modalType: '' } })\r\n      } else {\r\n         this.setState({ modalType })\r\n      }\r\n   }\r\n\r\n   render() {\r\n      return (\r\n         <React.Fragment>\r\n            <Router history={history} className=\"App Site\">\r\n               <NavBar toggleModal={this.toggleModal} />\r\n               <Switch className=\"Site-content\">\r\n                  <Route path=\"/\" render={() => <HomePage history={history} />} exact />\r\n                  <Route path=\"/login\" component={Login} exact />\r\n                  <Route path=\"/sign-up\" component={SignUp} exact />\r\n                  <Route path=\"/edit/:id?\" component={EditGame} exact />\r\n                  <Route path=\"/game/:id\" component={GameDetails} exact />\r\n                  <Route path=\"/game\" render={() => <Explore history={history} />} exact />\r\n                  <Route path=\"/user/:id\" render={() => <ProfilePage history={history} />} exact />\r\n                  <Route path=\"/play/:id\" component={PlayGame} exact />\r\n               </Switch>\r\n               <Footer></Footer>\r\n            </Router>\r\n            {this.state.toggleModal && <Modal>\r\n               {(this.state.modalType === 'wishlist') ? <WishList history={history} /> : <ShoppingCart history={history} />}\r\n            </Modal>}\r\n         </React.Fragment>\r\n      )\r\n   }\r\n}\r\n\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","const INITIAL_STATE = {\r\n  game: null, games: [], filterBy: { publisher: '' }\r\n};\r\n\r\nexport default function gameReducer(state = INITIAL_STATE, action) {\r\n  switch (action.type) {\r\n    case \"SET_GAMES\":\r\n      return { ...state, games: action.games };\r\n    case 'SET_FILTER':\r\n      return { ...state, filterBy: { ...action.filterBy } }\r\n    case 'SET_GAME':\r\n      return { ...state, game: action.game }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","let localLoggedInUser = null;\r\nif (sessionStorage.user) localLoggedInUser = JSON.parse(sessionStorage.user);\r\n\r\nconst INITIAL_STATE = {\r\n    loggedInUser: localLoggedInUser\r\n};\r\n\r\nexport default function userReducer(state = INITIAL_STATE, action) {\r\n    \r\n    switch (action.type) {\r\n        case 'SET_USER':\r\n            return { ...state, loggedInUser: action.user };\r\n        case 'UPDATE_USER':\r\n            return { ...state, loggedInUser: action.user };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","const INITIAL_STATE = {\r\n  cart: []\r\n};\r\n\r\nexport default function cartReducer(state = INITIAL_STATE, action) {\r\n  switch (action.type) {\r\n    case \"SET_CART\":\r\n      return {\r\n        ...state,\r\n        cart: action.cart\r\n      };\r\n    case \"ADD_TO_CART\":\r\n      return {\r\n        ...state,\r\n        cart: [...state.cart, action.item]\r\n      }\r\n    case \"REMOVE_FROM_CART\":\r\n      return {\r\n        ...state,\r\n        cart: [...state.cart.filter(item => item !== action.item)]\r\n      }\r\n    case \"CLEAR_CART\":\r\n      return {\r\n        ...state,\r\n        cart: []\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport gameReducer from './gameReducer'\r\nimport userReducer from './userReducer'\r\nimport cartReducer from './cartReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  gameStore: gameReducer,\r\n  userStore: userReducer,\r\n  cartStore: cartReducer\r\n})\r\n\r\nexport default rootReducer;","import { createStore, applyMiddleware, compose } from 'redux';\r\n\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from '../src/reducers/index';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst Store = createStore(\r\n  rootReducer,\r\n  composeEnhancers(applyMiddleware(thunk))\r\n);\r\n\r\nexport default Store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\n// TODO: use scss\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport Store from './store';\r\n\r\nReactDOM.render(\r\n  <Provider store={Store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n)\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}